4	sro...@gmail.com	1195527108000	Fixed in Subversion 
5	sro...@gmail.com	1195525659000	These are fixed in Subversion now. 
11	sro...@gmail.com	1196037796000	Should be fixed now -- Ant provides a cross-platform &lt;length&gt; task which does the trick. 
14	sro...@gmail.com	1196212335000	Good idea. I have submitted a fix for this in Subversion. 
18	sro...@gmail.com	1200012501000	Which version, regular or basic? Regular won't work since the device does not support JSR-234. What happens, does the application run and not decode, or is there a problem running it? 
18	sro...@gmail.com	1200931534000	Ahhh... I may have just stumbled upon the problem, thanks for calling my attention back to this a second  time.  The class is called &quot;ZXingMIDlet&quot; but the exception mentions &quot;ZXingMidlet&quot; (note different capitalization). It  looks like the manifest file I wrote gets this wrong. I suppose that the devices I happened to test on worked  around this or were treating this as case-insensitive.  I'll correct this first thing tomorrow and put up a new version, to see if that solves this issue.  By the way, the difference between &quot;basic&quot; and &quot;main&quot; is exactly that one class, AdvancedMultimediaManager.  If you &quot;ant build-basic&quot; in the &quot;javame&quot; directory, you should get exactly what you describe here actually.    
18	sro...@gmail.com	1200986588000	I think I have fixed this particular problem by correcting the MANIFEST.MF file in the .jar. Can you try the most recent version from zxing.org/w/ZXingReaderBasic.jad (version 0.2.2)? 
20	sro...@gmail.com	1201049492000	This is fixed in subversion.  On other phones there is always a default OK button, but not all it seems. 
20	sro...@gmail.com	1201069659000	Yes it is in subversion but not released yet. If you build from the source code now it should work as intended. It'll come out soon in 0.2.3.  Roadmap -- there's not a very firm roadmap, but I can tell you that the next major improvement will be to 1D barcode support. I am rewriting it now to support more formats and refactor the code.  Also I suppose we will want to turn out the Android client source soon.  Later -- Data Matrix support.  In between, bug fixing and improvements as needed. 
20	sro...@gmail.com	1202097220000	Should be OK in 0.3 
23	sro...@gmail.com	1202096994000	I think this should be fixed. In 0.3 I introduced a change that should ensure there is always an OK/Yes button. 
24	sro...@gmail.com	1202123420000	Is the error message like this?  Expecting class path separator ';' before 'and' in argument number X  This is an error from ProGuard and is kind of a bug in ProGuard, I think. I will look into a workaround. The build.xml file is correctly producing a platform-independent path to feed to ProGuard in this argument but it does result in this error.  Workarounds for now:  1. Checkout to a directory without spaces 2. Comment out the proguard step in build.xml 3. Hand-craft the librarypaths argument to ProGuard in the build.xml file 
24	sro...@gmail.com	1202188518000	OK this wasn't so hard to work around. I just had to copy and pass the list of library jars to ProGuard differently. It's in Subversion now; you can snag this copy:  http://code.google.com/p/zxing/source/browse/trunk/javame/build.xml 
29	sro...@gmail.com	1202340498000	I just made a change in Subversion that should address this. It will just ignore the fact that the K850 does not support FocusControl.AUTO_LOCK. You can build from SVN to try it or wait for the next release. 
29	sro...@gmail.com	1202966264000	I put in a fix for this particular issue in 0.4; no guarantee that there are not other issues. 
38	sro...@gmail.com	1203325368000	Thanks for the good test case. I will debug and see what is going on tomorrow. 
38	sro...@gmail.com	1203384681000	I've made improvements to Code 128 decoding that make it capable of recognizing this image. The fix is in Subversion now and will roll out with the next release. I went ahead and pushed these fixes to the decoder at zxing.org. You can try decoding this at zxing.org/w/decode.jspx and see that it works. 
38	sro...@gmail.com	1203652434000	(No comment was entered for this change.) 
39	sro...@gmail.com	1203325576000	Hmm, sounds like a problem with the optimizer. If you have the time and ability to do so, you could help debug by building this locally without ProGuard optimization and see if the problem persists. I'll do my best to investigate. 
39	sro...@gmail.com	1208252397000	I wonder if this is the same issue that came up on some Nokia JVMs, a mysterious NoSuchMethodError, which should be fixed in the next release (and is fixed in Subversion) by a slight change to the class declarations? 
39	sro...@gmail.com	1208907916000	Marking this as (possibly) fixed 
41	sro...@gmail.com	1204068108000	I actually just committed this a few days ago. It's in Subversion. 
50	sro...@gmail.com	1206879980000	A-ha, on Windows, this command is &quot;dx.bat&quot;. Yes, looks like we need some logic to account for this on Windows. I'll digest your patch and commit it or something similar. 
50	sro...@gmail.com	1208247814000	Interesting, this patch doesn't seem to address the issue that I'm seeing here, which is the same as yours. I played around with vmlauncher and location vs. value in the &lt;property&gt; task, but I think all that doesn't quite matter. I think we have to conditionally set the property to &quot;dx&quot; vs. &quot;dx.bat&quot; based on the OS. Ant makes this relatively painless so I can fix that. Actually I think I should suggest this as an enhancement to the Android tools, since right now it generates a slightly different build file for Windows, which doesn't seem optimal. 
50	sro...@gmail.com	1208252103000	OK I see the need for some of these changes. I added them plus a change to select dx.bat versus dx on Windows. This appears to be the only .bat file needed by the build file. It appears to work, is checked into SVN, and will go out with the next release. 
56	sro...@gmail.com	1210199593000	Sounds like a good bug report, I'll take a look at why it is misidentified today. 
56	sro...@gmail.com	1210205810000	Interesting, good bug. It was picking up (43,58) as a finder pattern. If you look at the pixels above/below and left/right of it, indeed they match the finder pattern profile. Since this is the third finder pattern found, and it can be confirmed with a second check on the next row, the detector stops and does not find the third one.  Here, we know the third &quot;finder pattern&quot; is bogus since it is bigger than the others by a noticeable margin. I basically added a heuristic to check this, and if the confirmed finder patterns are too different in size, it keeps looking.  Then it finds the real third finder pattern. Later when it has to pick which 3 of 4 are the real ones, it does get it right.  The fix makes this image work. Of course, if we misidentified a finder pattern that matched real ones in size, we would still have a decode problem. This is a weakness in the current FinderPatternFinder -- it's trying to be fast but will miss tricky corner cases like this.  At least, it is less easily fooled now. This image now decodes.  The fix is checked into Subversion. The change is just to FinderPatternFinder, so you could just pick up that change, recompile. 
69	sro...@gmail.com	1217315279000	Hah OK you caught me. I had made the method private after moving it into the QR Code package and didn't want to make it more public just for testing, and thought this was probably not going to change or break. Not really the best argument. I will re-add it and expose the ECI decoding again at least to the package. 
69	sro...@gmail.com	1217404966000	OK I readded this test in a different form, by adding the start of proper tests for DecodedBitStreamParser. 
70	sro...@gmail.com	1217460256000	Good one. We need to catch for NoClassDefFoundError too to make this Default/AdvancedMultimediaManager  trick work out on all platforms. I committed this to SVN. 
70	sro...@gmail.com	1217475504000	Hmm, sounds like a platform bug then? I wonder what class is not found? It shouldn't be FocusControl because by the time instantiation is done, it has loaded AdvancedMultimediaManager, which has a compile-time dependency on FocusControl. I can't see how FocusControl would cause the NCDFE. If it is something else, it's a platform bug. 
70	sro...@gmail.com	1217477365000	Hmm, maybe it is behaving differently than I expect (not sure if it is *supposed* to load all imported classes at class load time or not, but I thought it was supposed to). Regardless, I could put get the FocusControl, etc. in the constructor so at least those errors would get thrown and caught at instantiation. Let me do that -- look in SVN shortly. 
70	sro...@gmail.com	1217478459000	Yes I understand the issue, that some phones do not have JSR-234 classes at all. We're trying some clever tricks to avoid writing two versions of the code, as we did before, one which has references to JSR-234 and one which doesn't.  Check out the trick that DefaultMultimediaManager tries to pull. It basically loads a class that has the JSR-234 references, and sees if it fails, and if it does, just falls back on its own self to implement setFocus() et al. as no-ops.  The weird thing is, if FocusControl et al. don't exist, you should see a NoClassDefFoundError when AdvancedMultimediaManager is instantiated. that was how JVMs have to work, I thought, but could be wrong. But it's happening later when setFocus() is called and you try to get a FocusControl object -- you shouldn't even have been able to load this class if FocusControl isn't available, I'm saying.  So you get a NoClassDefFoundError there. (I'm assuming it's not some other class internally that's not found, which would mean the E65 just has a platform bug.) I committed another attempt at a workaround which places references to these classes in the constructor, in an attempt to induce the failure there. 
70	sro...@gmail.com	1217480873000	I'm pretty sure this is not correct. In Java SE, this would definitely fail at class load time, not later when the missing class is instantiated. So if you're right, all of Java SE is doing it wrong. I wrote a quick test class to make sure I'm not nuts here.  I can only imagine that there is actually no guarantee about this either way (or else the Nokia JVM is doing it wrong but let's not assume that). Yikes, strikes me as an interesting source of subtle bugs between Java SE and platforms that behave differently. But shame on us if we depend on class load order I guess.  I hope the latest change does it. My only worry is that ProGuard will optimize this away. 
70	sro...@gmail.com	1217481060000	For the interested, the answer is there is no guarantee! http://java.sun.com/docs/books/jls/second_edition/html/execution.doc.html section 12.1.2:  The resolution step is optional at the time of initial linkage. An implementation may resolve symbolic references from a class or interface that is being linked very early, even to the point of resolving all symbolic references from the classes and interfaces that are further referenced, recursively. (This resolution may result in errors from these further loading and linking steps.) This implementation choice represents one extreme and is similar to the kind of &quot;static&quot; linkage that has been done for many years in simple implementations of the C language. (In these implementations, a compiled program is typically represented as an &quot;a.out&quot; file that contains a fully-linked version of the program, including completely resolved links to library routines used by the program. Copies of these library routines are included in the &quot;a.out&quot; file.)  An implementation may instead choose to resolve a symbolic reference only when it is actively used; consistent use of this strategy for all symbolic references would represent the &quot;laziest&quot; form of resolution.   I know some phone JVMs choose to emulate Java SE's all-upfront resolution approach. 
71	sro...@gmail.com	1217580843000	(No comment was entered for this change.) 
71	christia...@gmail.com	1217612272000	The change had been made locally, but I had forgotten to submit it into Subversion.   
73	sro...@gmail.com	1218579217000	Ah, did you do this part?  In the build.properties file at the top level of zxing, set tomcat-home to the location where Tomcat was installed.   
73	sro...@gmail.com	1218582945000	Sorry now I see what you mean. Tomcat has the J2EE classes. I think the issue is that backslashes are actually special characters here -- replace \ with \\ and I bet it will work. See the commented-out examples in the file. 
73	sro...@gmail.com	1218584082000	Done, I improved the documentation. 
76	sro...@gmail.com	1220897986000	I think we fixed this recently -- it's in SVN and will be in version 1.0. NoClassDefFoundERror was not caught correctly in some cases. If recent versions don't work reopen this. 
77	sro...@gmail.com	1220897910000	That is odd. So it runs successfully, but the screen whites out, it freezes, then simply does nothing? It works well on similar SE devices and you say it worked in the past. I am not sure... it sounds like a platform problem and we aren't really putting any effort into workarounds for J2ME phones.  I'll leave it open for a while in case you find more info or others can provide any insight. 
77	sro...@gmail.com	1221078767000	I think the more likely conclusion is that a recent change causes the application to trip a bug in some phone's J2ME implementations. I say that since it sounds like problems a number of devices are having with references to JSR-234 classes. The app is written correctly from this perspective, and works on many phones.  Or, it could be a different issue. If you can provide more information maybe that would help determine whether it's the same or not. Is there an error, a message saying &quot;No barcode found&quot;, or nothing? This may be hard to debug since we don't have a SE K850 around.  In general we are here to write a correct J2ME application, and I think we did that. If a phone doesn't run it, it is likely because the phone is buggy. If there's an easy workaround, OK we might stick that in, but won't actively try to find workarounds ourselves. J2ME implementations are just too varied and buggy to make this worthwhile, especially considering J2ME is on its way out as a primary mobile development platform. We are focused more on the iPhone, Android, maybe BlackBerry (which is J2ME, yes).  There are other good readers out there that either avoid or workaround issues it seems. See the InterestingLinks wiki for a ton of good readers that might work on the K850. 
77	sro...@gmail.com	1221086079000	The DataMatrixReader is terrible -- er, &quot;alpha&quot; quality. I can say that because I wrote it. I would not consider it usable yet. It is just my first attempt at getting something to work. That's why it is not called from MultiFormatReader.  Nah we won't drop support and will try to figure out workarounds, just saying we probably won't be able to buy phones and spend weeks understanding what's wrong with certain phones and how to fix it. 
77	sro...@gmail.com	1221943054000	So basically this distills down to two items: Data Matrix doesn't decode well, which  is quite true at this point, and several phones don't like the new build with any  reference to JSR-234 classes. The first is, yeah, kinda a known issue. The second, I  am not sure what to do with, since it seems like a platform problem. Maybe we should  put up an alternate build again with the JSR-234 classes commented out. I wanted to  get away from that, and the main build *should* work even on non-JSR-234 phones, but,  seems better to have a solution rather than stick to some principle. 
77	sro...@gmail.com	1223061140000	Done 
77	sro...@gmail.com	1223499220000	I am bringing this issue back to its original point, since it really does seem to concern some change since 0.8 that has caused trouble on Sony Ericssons. It doesn't seem to be JSR-234-related. I am not so sure what change could have caused this but a few people have reported it so I think it's legit.  I am taking the liberty of reassigning since I don't have any SE to test on but I know Daniel and crew have access to a K800i. Daniel you can pass on to the other devs as you see fit to investigate. I'd provide pointers about what might be wrong... but really nothing functional changed so I am at a loss too. No doubt it is some other implementation quirk -- a small change has triggered an obscure problem. 
77	christia...@gmail.com	1224723834000	I just downloaded the reader from zxing.org/w for my SE K800i. For one thing, it claims to be version 0.9; for  another, it doesn't seem to work.   Specifically, the behaviour I'm getting is:  1) Start the app 2) Open the camera cover 3) Visible live image on screen; point at barcode, press a key (though the camera shutter key doesn't work for  this, strangely enough) 4) get the 'Allow application to take pictures with the camera?' screen 5) Press 'YES'  6) 'Allow application to take pictures with the camera?' screen remains 7) press 'YES' again 8) 'Allow Allow application to take pictures with the camera?' screen goes away, is replaced by an error  message saying &quot;Error, Failed to take Snapshot&quot; 9) after a brief pause, screen shows feed from camera again  Best wishes,  // Christian Brunschen   
77	sro...@gmail.com	1224731149000	Yeah it seems whatever recent changes happened since 0.8 made many phones unhappy (though I totally claim the app is written correctly and the phones are at fault!). I think what I am going to do is a) update the published version to 1.1 and b) re-publish a version without any reference to JSR-234 again. That could begin to resolve the issues. 
77	dswit...@gmail.com	1224731263000	Thanks Sean. 
77	sro...@gmail.com	1224968818000	Try http://zxing.org/w/BarcodeReader.jad (proper version 1.1), and http://zxing.org/w/basic/BarcodeReader.jad (the &quot;basic&quot; version) ?  I do not know that it will resolve this, but is worth a try. 
77	christia...@gmail.com	1224970709000	On SE K800i: the new 'proper' version 1.1 does not work; same symptoms as before: have to confirm twice  (rather than once) that the app is allowed to take pictures, and then get an error 'snapshot failed'. However, the 'basic' version does work: as expected, it only asks once for permission, then focuses, takes a  snapshot, and parses the result, presenting it (and allowing URLs to be opened, etc). 
77	christia...@gmail.com	1224973629000	Correction: the Basic version, on a K800i, does work, but I don't think it focuses before taking the picture, as I  erroneously said above.    
77	sro...@gmail.com	1231790832000	I have posted yet another version, and another user says this problem does not occur on his K800i (has a  different issue). I am tentatively marking as fixed, therefore, especially considering if it's not I have no idea what  to do. 
79	sro...@gmail.com	1221763774000	AFAIK this is only generated by the Blackberry IDE? we are kinda a Mac-only group so  can't use their IDE.  Right now I'm focused on getting an OTA download working. Any chance a kind soul like  yourself can post an .alx file for the current build? we can include it. 
79	sro...@gmail.com	1221766576000	So does something like this work for you?   &lt;loader version=&quot;1.0&quot;&gt;   &lt;application id=&quot;BarcodeReader&quot;&gt;    &lt;name&gt;BarcodeReader&lt;/name&gt;    &lt;version&gt;1.0&lt;/version&gt;    &lt;vendor&gt;ZXing project&lt;/vendor&gt;    &lt;fileset Java=&quot;1.2&quot;&gt;     &lt;files&gt;BarcodeReader.cod&lt;/files&gt;    &lt;/fileset&gt;   &lt;/application&gt;  &lt;/loader&gt;   I am obtaining signing keys and a Windows machine so we can finally  deal with BB apps properly. But if the above happens to work, sure I  can post it and include it right away.  
79	sro...@gmail.com	1221941855000	I made some changes to generate a simple .alx file with the build. 
80	sro...@gmail.com	1221858861000	Interesting, I'll re-read the spec and look into this. 
80	sro...@gmail.com	1221859307000	Yep, clear bug. The fix is as you say to simply not remove the check digit if there  was no check digit appended to begin with, because it was a code that does not result  in a printable character. I was thinking, simply look at whether the last code was &gt;=  96 for A/B or 100 for C, and if so, don't pull the check digit. Same thing, just  without a flag. Will fix shortly. 
80	sro...@gmail.com	1221941728000	Yes, you're right, so I ended up committing a change more like you suggested. See if  the latest code works for you. 
80	sro...@gmail.com	1222020705000	Ah right, good point. I tried again. If I still got it wrong could you post your example code so I can make a proper test case? 
80	sro...@gmail.com	1222204613000	OK think I finally fixed it -- I added these as tests as I should have done to start and verified it works now. 
82	sro...@gmail.com	1222392798000	Could you attach the images?  Blur is, yeah, a big problem. When the image blurs to the point that lines merge  into one another, it seems that the only solution is significantly more  sophisticated algorithms. See the discussion here about Delicious Monster.  One take on this that this is a problem that is much better and more reliably fixed  by better optics (see the video on the Google Groups list where Daniel shows off how  fast/reliable it is with the G1 optics). And, also, other people have made some nice  readers that can better handle blur. So one kind of lazy take on this is, it's a  problem that's sort of been fixed for everyone by others, and that should go away,  and is hard to tackle, so... punt.  But, I have a feeling that now that other dust has settled, this will in fact be a  next area to tackle. Clearly, the 1D barcode scanner stuff was a big ol' hit on  Android, judging by the winners of the dev challenge. Seems like this may call on  this project -- or maybe those lovely app teams that just got some seed money? :) --  to step up and improve 1D scanning technology here too. 
82	dswit...@gmail.com	1222815656000	Thanks for posting these, we'll add them to the unit tests. My guess is that the start marker (the two thin lines  on the left) are too indistinct and so we give up without trying to read the rest.  Daniel 
82	dswit...@gmail.com	1222831826000	These images are now in the unit tests, and we'll work on improving recognition for them for future releases. 
82	sro...@gmail.com	1223916923000	Oh, what a sensible approach! yeah someone suggested this a while ago and I changed the code to work like this. It looks like several Nokia phones at least reject the application now since it has references to JSR-234 classes that they don't have (not in this snippet of code, but then in the rest of the code that gets called as a result of this detection). I still hesitate to step backwards here but unfortunately it doesn't work on some phones. 
82	sro...@gmail.com	1285171193000	(No comment was entered for this change.) 
83	sro...@gmail.com	1222725312000	This could be the same bug with Code 128 that I juuuust fixed a few days ago. The  fix would be in SVN but not in the most recent distribution. If you can build from  source maybe you can get the fix that way.  I will in any event debug later and see if it is the same problem, or something else. 
83	sro...@gmail.com	1222806940000	The one that is missing characters has been fixed in SVN.  The unrecognized one is interesting. It fails the checksum. The final '1' is read as a '.'. That is, the code starting at x=474 in the image should be 17, which is bars in these proportions:        {1, 2, 3, 2, 2, 1}  but is being read as 14:        {1, 2, 2, 2, 3, 1}  The black/white pattern read is {2, 3, 4, 3, 4, 1}. This matches both equally well -- inspect it for a minute. The algorithm just picks 14 and that ends up being wrong, so the code fails the checksum.  So it's not quite a bug... the image is too low resolution and as read, that sequence of pixels could equally well be two different characters. Try a slightly higher resolution capture? 
84	dswit...@gmail.com	1222831725000	Crap, they must have removed AndroidHttpClient from 1.0 for some reason. I'll look into it. 
84	dswit...@gmail.com	1223521510000	I don't have anything new to report. Ideally AndroidHttpClient would be put back in the SDK. If you need to build  today, you can change it locally to DefaultHttpClient, although the behavior will be somewhat different in terms  of timeouts, cookies, etc. 
84	dswit...@gmail.com	1223860228000	I got permission to copy AndroidHttpClient into our package, so with that change the Android client builds again  using the 1.0 SDK. 
86	sro...@gmail.com	1223077819000	Exactly, sounds like the same thing. BaseMonochromeBitmapSource is an abstract class which implements an interface defining methods like getHeight() and getWidth(). The abstract class doesn't have to define an implementation for all the interface methods, and it doesn't define these. This is fine, Java says it can still reference the methods since it implements the interface that defines them (well, subclasses will be forced to define them). But the Nokia JVMs don't seem to accept that, which I believe is best viewed as a bug. The workaround is so easy that sure, we can just add...  public abstract int getHeight(); public abstract int getWidth();  I think I fixed it in SVN? 
86	sro...@gmail.com	1223239147000	I will add those other two methods.  The issue is almost certainly not resolution, but focus. A clear 640x480 image should  decode fine. Blur is a problem. 
93	christia...@gmail.com	1224787866000	Looking into this. Good catch, thanks! 
93	christia...@gmail.com	1224788203000	A minor point: the GF256 class's exp_ and log_ valarrays were explicitly initialized one entry at a time in the  GF256 constructor. Either way, I've added arguments to the valarray constructor calls to specify the contents of the valarrays  explicitly. Could you verify whether this fixes the problem? Best wishes, // Christian Brunschen   
97	sro...@gmail.com	1225337446000	Sounds like a good bug report, I'll get on it. 
97	sro...@gmail.com	1225425025000	Yeah, I think a pretty clear bug. We need to allow for up to 3 additional, superfluous bits at the end of the stream. It's addressed now in SVN. 
98	sro...@gmail.com	1225564336000	Looks like we have to be more lenient in detecting Shift_JIS. The source I based the original code on suggested that only certain bytes can follow certain other first bytes in a double-byte sequence, but it doesn't seem correct after more investigation, since this message here and others correctly decode as Shift_JIS in Java at least. I just adjusted the rule accordingly. 
102	sro...@gmail.com	1225995292000	(No comment was entered for this change.) 
102	sro...@gmail.com	1226107798000	Sounds like a great catch. Sounds like QR Code is different from Datamatrix in how Reed-Solomon proceeds.  I see the difference you note in the specifications. I adjusted the syndrome calculation to work differently for QR Code and Datamatrix.  I re-read the specs and it looked on the surface like the error locator poly is different, but, in practice I don't think there is a difference in how QR Code vs. Datamatrix works because the errors are located correctly.  Something more is different about error magnitude as a result. I tried your change but it didn't seem to work in cases of more than one error.  The difference must not be large because the QR Code computation actually worked -- nearly, actually the syndrome was off but in a way that only slightly reduced the error correction power of the computation, but that still worked otherwise. So I am now looking for how the magnitude poly computation has to change as a result too.   (Do we have the same spec? I have ISO 16022:2006. I see what you refer to in Annex O for instance). 
102	sro...@gmail.com	1226190301000	OK I have the 2006 version I guess. Does yours even cover ECC200? no matter, I think they are the same as far as we are concerned here.  Well, I put in a change to correctly compute the syndrome, and then a counter-balancing change to the syndrome later that makes it still work as it used to -- that is, mostly works, but can't correct all the errors that it should.  I am still kind of stumped. The version of RS I implemented is from two papers I found plus C++ code I cribbed/ported from Google (with permission :) ). This version matches QR Code entirely. I am only able to understand part of how Datamatrix's variation works; there is plainly still some issue. 
102	sro...@gmail.com	1226336791000	If I write the right test, it fails. Which is sort of a good thing, on the other hand it means the entire build fails. I was thinking of this as a known issue at the moment.  I copied the current RS test case into a new one for Datamatrix, yes. The test has to be a bit different.  You can post a patch here. If you think you might want to continue working on this regularly we can make you a project member / committer and then you have SVN submit access. 
102	sro...@gmail.com	1226365351000	Thanks, I am digesting this now. I don't know what the tweak in Forney's formula does, but if it makes it work for Datamatrix that is great! That change alone makes the unit tests as they are fail though... I am still looking at how your tests differ to see what's up.  I take your point about ensuring the byte is actually different though it wouldn't explain the failure. Good point on the test, I have left at least a TODO in the code. 
102	sro...@gmail.com	1226436745000	The unit tests do pass actually, just mis-applied the patch. This is great. I don't think I would have been able to figure this out myself. I have added you as an author on this part of the code since that is a significant contribution. I adapted the changes you sent in. The bit about ensuring the new byte is different is nice. I also like comparing against the field value rather than a new boolean param. I will submit the net change shortly. 
102	sro...@gmail.com	1226440081000	Done, I see your point there now. 
108	sro...@gmail.com	1226539457000	The payload of QR Codes and Datamatrix codes are bytes, yes. The interpretation of these bytes is almost always as text. The QR Code spec implies that even in 'byte' mode, the content should be interpreted as an ISO88591 string. This is of course by far the primary use case, to encode strings. So, I would have to strongly disagree that it is not intended to carry text (not necessarily UCS-2 Unicode, no, but a string, yes), since that is in fact precisely what they were designed for.  But more importantly it is not really possible to defer the interpretation of the bytes either. They have no meaning per se; interpretation depends on the format that was used. For instance a QR Code that only has a byte payload still contains a short &quot;byte mode&quot; header. It does not seem reasonable to couple other parts of the client downstream to knowledge about how to interpret this byte stream.  But all that said I 100% agree, no reason not to give access to the raw bytes. The Result object already does this, see the 'raw bytes' property. Already done! 
108	sro...@gmail.com	1226609519000	Yes you are right, but that is the only meaningful 'raw bytes' available from the barcode.  I do think there is a good point in here... say you really want to encode binary data in a QR Code. You would use one segment, in byte mode, which is a bit of a hack despite its name since it is really &quot;text encoded as ISO88591, sort of&quot; mode. Not all bytes are even legal in this mode. So from that perspective the spec doesn't have any real support for binary data.  But, assume the encoder/decoder overlook that last technicality. Seems like it would be nice to be able to get, directly, the actual bytes used in byte segments only. I agree.  I need to go back and read the Datamatrix spec to review how Datamatrix behaves in this regard. I can see a potential argument for a variation on what you are proposing.  If the QR Code really was just one byte segment, then calling getBytes(&quot;ISO88591&quot;) on the resulting String should give you those bytes back (&quot;should&quot; because this technically shouldn't work out, but probably does in practice). But otherwise, the result of getBytes() isn't meaningful -- was not necessarily anything to do with the bytes in the QR Code. Hence I don't think the result of getBytes() should be exposed in the Result object.  I'll also take a look at the bug you mention, I am guessing you are right though I have never looked at this part of the algorithm. Thanks for that. 
108	sro...@gmail.com	1226699500000	I fixed the bug, good catch.  I also added a new ResultMetadataType called BYTE_SEGMENTS. You can look for this in the Result metadata --  if there were byte-mode segments in a QR Code or Datamatrix code, it will contain their raw bytes. This is a  step better than looking at the raw bytes, which are already available, since these are just the bytes from the byte  segments. 
108	sro...@gmail.com	1226703541000	Here's an example that may illustrate my thinking. Let's say you want to encode UTF-8 text in a QR Code. I've  seen people do it, and it's not clearly within or outside the spec. You encode the text as bytes in UTF-8, then  put them into a 'byte mode' segment for the QR Code. The resulting stream of bytes is  [byte mode header] [      UTF-8-encoded text ...   ] [terminator header]  Right now, the Result from decoding would return from getText() the String representing the text that was  encoded. It would return from getRawBytes() the entire byte stream above.  I had interpreted your suggestion to mean, please return the result of getText().getBytes(encoding) in the API  -- to retrieve the original bytes in the byte segment above. This begins to uncover all kinds of problems.  Which encoding? If the intent is to support applications that actually just stuck in binary data, then we'd have  to assume they used ISO88591 (or another character set with a 1-1 mapping between characters and bytes  for values 0-255... so this is even ambiguous, and not even 100% true for ISO88591). If I decode the text as  ISO88591, I do not get the original bytes. It doesn't necessarily work at all since the String is Unicode. The list  of problems goes on from there.  The raw bytes above do contain the bytes of the byte segment that you are interested in. So that's why I said  &quot;it already exists&quot;. But then you would have to re-parse the stream above to pick out the byte segments. That  seems less than ideal  The same thing generally goes for Datamatrix though there the Base-256 encodation seems legitimately  appropriate for binary data, though it does still suggest this is to be interpreted as text encoded as ISO88591.  I am not suggesting the entire byte stream above has any sensible interpretation other than data encoded  according to the QR Code or Datamatrix spec, no.  I am acknowledging the use case you describe, where you might want to get the raw bytes from just the byte  segment above -- that is, without the headers. That is what I have implemented.   In your example, to be semantically correct, you need to use byte mode in QR Code or Base-256 in  Datamatrix. You / the encoder need to encode what you mean. If you do not intend this to be interpreted as  text, and the encoder interprets it as text, and encodes as ASCII, it is no surprise that you get the wrong thing  out: the decoder (correctly) interprets the encoded data as text.  If you have an encoder that is forcing you to treat all input as text, then I suppose this illustrates my over- arching point, that both these formats &quot;really&quot; operate on text, period. They have ambiguous, half-baked  provision for carrying true binary data. Even using byte mode / Base-256, the specs imply that the decoder  should impute an interpretation as text. But hopefully you are in a position to use the encoder to encode  exactly what you intend.  (What the text, or bytes, mean is indeed up to the application. But the question of text vs. bytes is relevant to  encoding/decoding.) 
108	sro...@gmail.com	1226795799000	I am quite confused, since I think you are still operating under mistaken impressions of how Datamatrix and  QR Code work, which I tried to clarify above, and yet, I have also implemented exactly the functionality you  want, so I am not sure what the remaining issue is? Maybe the issue is that you're using a different copy of  the Datamatrix spec from 1997? we are using ISO 16004:2006, and using the ECC200 format (which is  Datamatrix as we know it today), not ECC100 or ECC140.  First, and most importantly, no, it is entirely incorrect to say it is this library choice to treat the input and  output of QR Code and Datamatrix as strings rather than bytes. Both formats explicitly operate on character  data. This has absolutely nothing to do with project goals; it has everything to do with the specifications.  QR Code includes four modes: numeric, alphanumeric, kanji and &quot;byte&quot; mode. The latter, however, is  supposed to be interpreted as the encoding of a string in ISO88591. Or according to the encoding in force  from an earlier ECI segment. Datamatrix has a quite similar story - section 4.1.e says it quite clearly. Even its  &quot;byte mode&quot;, Base-256 encodation, is supposed to be interpreted as ISO88591.  If we disagree here, I can go over the specs with you in more detail, but I think you'll see what I mean by  reading them. Stop here unless you agree with the above.   Let me repeat: these symbologies *do not technically support binary data*. There is no way to signal to a  reader that part of the payload is just uninterpreted bytes. If you disagree, please show me in either of the  specs.  Therefore: a strictly correct API would not include any notion of &quot;just the raw data bytes&quot; since there is no  such notion in the specifications. The API *already* let you get at the raw QR Code or Datamatrix encoding,  which includes its internal headers and signal bits and so on, which is not the same thing.  Again let me repeat: all of this means that no, it would be incorrect to implement what you are saying,  technically, according the specifications.   All that said -- it is not such a gross hack to consider sticking binary data in a &quot;byte mode&quot; segment of a QR  Code. In general this will be meaningless to readers, since they are supposed to read it as text.  But presumably you are thinking of a specific application using custom readers -- these codes would never  be consumes by standard reader software. OK.  Strawman: no, this is completely wrong. The raw bytes of the code include short headers (4-bit segment  identifiers) which have no relationship to UTF-8 text. No QR Code is encoded this way. This would cause the  reader to fail 100% of the time!  Do you mean, assume that the bytes in the &quot;byte mode&quot; segments are UTF-8? OK, but, they aren't! Read the  spec. They are ISO88591. If you did this, you would misread some text. (Note that the decoder does try to  intelligently guess when someone has, in fact, used Shift_JIS or UTF-8 encoding in a byte mode segment. It's  wrong, but people do it, so we try to accommodate. But  you certainly can't assume UTF-8.)   But the thing that really bewilders me is, you already have access to the raw bytes at two levels -- what are  you asking for then? You can get the complete raw QR Code or Datamatrix encoding bytes from the existing  getRawBytes() method. You can get the raw bytes from byte mode segments from the new mechanism I  added.  Please review my changes and the discussion above, and the specs, and then let's talk more if you have questions. 
108	sro...@gmail.com	1226886465000	I think we're getting to the real central question, which is character encoding issues.  About internal representation -- indeed, I generally agree, which is why the API didn't even expose the raw  bytes until a few versions ago, and why I initially didn't want to add more access to the internal encoding.  Do the bytes have semantic value that readers understand? the raw bytes do, yes. The 4-bit mode header in  QR Code that says &quot;following this is kanji-encoded stuff&quot; -- yes, that has meaning to the reader. Does the  Kanji itself have meaning to the reader? no. (Interpreting the contents as a URL, for example, is something a  reader might do but is outside the scope of QR Code per se.) Do the bytes in a byte mode have any meaning  to the reader? *yes*, insofar as the reader is supposed to construe them as characters according to some  encoding.  And here we come to the real problem: what encoding? It is supposed to be ISO-8859-1. What are we going  to do about other character sets? we're not making up standards, so the real question is what does QR Code /  Datamatrix provide, and the answers aren't so great.  Yes, the answer they both provide is &quot;use ECI indicators&quot;. The bad news is that I cannot find a single reference  on which ECI values map to which encodings. Even the for-pay specification for ECI *does not specify this!*  We reverse engineered and guessed a few values. We do support ECI, but nobody really uses it.  What's worse, the specs seem to leave some wiggle room about whether you really have to use ISO-8859-1 in  byte mode. In practice I can tell you that Japan puts Shift-JIS-encoded text in byte mode segments in QR  Codes all the time. I see UTF-8 too. So in practice we try to guess the encoding -- using clues like, yes, a  byte-order marker header for UTF-8. But this is less than ideal.  I suppose the right answer is use ISO-8859-1 if you can, and if you absolutely can't, at least include an ECI  segment.   Always assuming UTF-8 doesn't work because... - Well, it's supposed to be ISO-8859-1, and reading as UTF-8 is only partly compatible with that. Shift_JIS is  definitely not going to be read the same as UTF-8 - Not all sequences of bytes are valid encodings of a string in UTF-8. So this outright fails in some cases. - It is possible for two byte sequences to encode the same character string in UTF-8. So reversing the  encoding might not give you the original.  ISO-8859-1, the proper default, has only the first problem, but, if it's binary data you're encoding, the  resulting interpretation as text is garbage anyhow. Readers are going to read it as garbage. But, presumably  you are thinking of specialized readers which understand the interpretation you wish them to apply somehow.  I guess to repeat a point -- yes, readers *do* need to interpret the contents as text, according to the spec. I  don't think this affects your reasoning, or means that readers can't provide additional info, of course.  So this is why I give you the raw contents of the byte mode segments themselves. I think this plus giving you  access to the raw bytes of the whole QR Code payload, should enable you to create any specialized reader  application you want from this library. 
117	sro...@gmail.com	1228851139000	Hmm, I cannot reproduce this myself on Linux or a Mac with similar Ant/Java versions. Not sure, looks like the  target is correct and there's no stray double-quote lying around. I don't suppose there is any chance the file  got corrupted or subtly changed over there? probably not since it happened on two copies.  I will see if I can find a Windows machine to try it on but not sure if we can do much about it if it's a problem,  since the build looks correct.  (The warnings are &quot;class not found&quot; warnings? set the location of various libraries in build.properties to  address that) 
117	sro...@gmail.com	1228859260000	Yes I can reproduce this on a Windows machine now. Interesting.  I think the bug you cite is relevant, having something to do with newlines and escaping in this attribute. That  suggests a reason that it would work on one platform but not another.  I will look at workarounds like using the &lt;footer&gt; element. 
117	sro...@gmail.com	1228861391000	It is some glitch in how this HTML text is passed to javadoc as a command-line argument, that only comes up  on Windows. Fortunately I located a workaroudn: useexternalfile=&quot;true&quot;. This causes args to be passed via a  temp file, and that apparently avoids whatever this is. I am committing the change now. 
117	sro...@gmail.com	1228874053000	Do you have the latest Android SDK? If this didn't exist the code wouldn't compile. It seems OK for me on the  latest 1.0 SDK. 
120	sro...@gmail.com	1229645213000	Hmm, the android client should not let a RuntimeException kill the client -- I think  that's the best way to address this sort of thing.  Daniel I'm away from internet and any tools for almost a week, can I punt back to  you? 
120	dswit...@gmail.com	1229647422000	Yeah, I don't mind looking at it. My instinct would be for the QR Code to catch this exception in core, then throw  ReaderException instead, since that's what the interface promises. That would solve the problem across all  clients too. Seem reasonable? 
120	sro...@gmail.com	1229725056000	Agree on that, I think the exception is not the right one to come out of the top level of the client anyway. 
120	sro...@gmail.com	1229827201000	I committed changes to turn this situation into a ReaderException at the top level of core, which is the more  correct thing to happen.  I think the exception handling makes sense now, having reviewed it again, though one could be forgiven for  looking at it and not immediately seeing its grand genius. 
120	dswit...@gmail.com	1230001454000	(No comment was entered for this change.) 
121	dswit...@gmail.com	1229636977000	Original URL:  http://chart.apis.google.com/chart?cht=qr&amp;chs=350x350&amp;chl=smsto:15039988415:Whaddup%20dawg?  
121	dswit...@gmail.com	1229641306000	Fixed in r794. We were not handling question marks in the subject or body correctly, believing them to always  be URL query syntax. 
124	sro...@gmail.com	1231374248000	I haven't tested recently since I don't have access to a K800i anymore, but it was working with auto-focus for me  on this device. You are using the 'regular' version and not the 'basic' one right?  Also you are sure it is not auto-focusing? it doesn't focus for long, about 3/4 of a second. It is possible that  even after that it fails to decode the image; a failure alone doesn't indicate the auto-focus doesn't work.   
124	sro...@gmail.com	1231483852000	Just to rule out really dumb mistakes like me building the 'basic' version when I meant to build the 'regular'  version, I rebuilt everything and uploaded new binaries to http://zxing.org/w/BarcodeReader.jad -- try this  again? 
124	sro...@gmail.com	1231538811000	Thanks, I fixed up this code to make it a bit easier to switch back and forth. 
124	sro...@gmail.com	1231724695000	Marking 'fixed' since I kind of think there was a goof here, that I just fixed. Please reopen if not working. I  unfortunately do not have a way to test on a J2ME phone anymore. 
125	sro...@gmail.com	1231471950000	Yep that was fixed a little while ago. I thought it went out in the very latest app build a few weeks ago? could be wrong, but, double-check that you have the latest build. In any event, it's fixed in SVN. Thanks for the report. 
125	sro...@gmail.com	1244648429000	Hmm, works for me. I just tried it with the latest release and it and decode as 'etdeffgf'.  
126	sro...@gmail.com	1232095500000	Good call. I committed a substantially similar change. 
127	sro...@gmail.com	1232435717000	So, the crash part was fixed a while ago but a new version has not yet been released with the fix.  In the current code this still fails to decode -- the QR Code sequence here is using Structured Append which we  don't support. It's an optional part of the spec, and rarely used, and would be a bit tricky to support, and we  haven't seen a real-world use for it.  But I can change the code to reflect this situation better -- done. 
127	sro...@gmail.com	1232514586000	Actually on second thought, I changed the code to just basically ignore structured append messages. When  scanning it you'll see whatever portion of the overall message the symbol encodes. Structured append still  isn't really supported but at least you can read codes that use it, partly.  In this particular case it was used to encode actual binary data, which isn't quite kosher. It is using byte mode,  for which the default interpretation is text. It comes out gibberish of course since it was meant to be  interpreted as a PNG but there's no way to signal this. A reader would have to know ahead of time to expect  the data in this format and interpret accordingly. We do return to the caller the raw bytes, but the library,  naturally, cannot attempt to construe byte-mode data as an image every time.  This is entirely separate from the question of using structured append -- would happen without structured  append too. 
135	sro...@gmail.com	1232735654000	Good one, yes. We fixed this a short time ago but it's not released yet. You can grab the latest code from SVN  and compile if it's more urgent. 
136	sro...@gmail.com	1232960205000	I just cut the dependency recently, actually -- it helped ensure core compiles in J2ME but there was really little  risk of that breaking and we'd catch it anyway. The code in SVN no longer has core needing WTK. 
143	sro...@gmail.com	1233855873000	Yeah, unfortunately that is not part of the syntax for geo: URIs. Even if we supported it, other readers wouldn't, so it would not be useful to encode this.  But it sure should not crash anything. I imagine I know the problem and can fix it easily. 
143	sro...@gmail.com	1233869432000	Fixed in SVN -- will no longer crash. This is not a valid geo: URI though, so will just be treated as text. 
143	sro...@gmail.com	1233986935000	Yup that's the one. Fixed in SVN. 
145	dswit...@gmail.com	1234236830000	(No comment was entered for this change.) 
145	dswit...@gmail.com	1234238910000	(No comment was entered for this change.) 
146	sro...@gmail.com	1234634226000	Interesting, yeah I suppose it's a matter of letting the text scroll off or truncate rather than the image. Is this what &quot;gravity&quot; controls? 
146	dswit...@gmail.com	1234647678000	I just need to wrap the whole thing in a ScrollView, it's an easy fix. 
146	dswit...@gmail.com	1234833066000	OK, I added a ScrollView, it seems to work fine. I also added support for multiple email addresses and phone  numbers, which would have made this bug more visible. 
148	sro...@gmail.com	1235853858000	Good one, should be fixed in SVN now. 
149	sro...@gmail.com	1235853900000	I also committed a fix for this but am consulting with Yohann (author) to see if it's valid. 
150	dswit...@gmail.com	1236117100000	Apparently the problem is that Dialer doesn't support TEL: only tel: Uris. So this is not a regression from Android  1.0, and is not a ZXing bug. However I think we can force lowercase on some incoming Uris we receive, and catch  the exception throw from the intent to be more compatible and more bulletproof. 
150	sro...@gmail.com	1236162352000	I just changed to normalize this in the code. Perhaps we should treat MAILTO:, URLTO: etc the same? 
150	dswit...@gmail.com	1236206790000	Yeah, I suppose we should convert all Uri prefixes to lowercase. Are you up for doing that? 
150	sro...@gmail.com	1236295680000	Done, the only thing left that didn't normalize was geo: 
152	sro...@gmail.com	1236162033000	(That URL really should escape '@' since it's unsafe and reserved in the https scheme, but...)  Yeah I think the fastest fix is to consider matching URIs before email addresses.  The email parser is really  permissive, technically too permissive. I was sort of concerned about missing some non-standard email  addresses in Japan. 
152	dswit...@gmail.com	1236568486000	Thanks, it's working. 
152	sro...@gmail.com	1285171666000	(No comment was entered for this change.) 
158	sro...@gmail.com	1237517497000	Pretty sure there is a bug here -- already found one off-by-one error that makes a difference in this small  image. Still hunting it down. 
158	sro...@gmail.com	1237521095000	Still working on this -- question, what is this code supposed to encode? I have gotten past the detector problem  but it fails now because it seems to use &quot;FNC1&quot; which we don't support yet. Is that intended? If you don't know  what that means then the answer is probably 'no' :) 
158	sro...@gmail.com	1237593087000	I have no doubt the code is valid. Its contents are a bit unusual, which makes me wonder what the contents are supposed to be? Do you know? This would help determine whether there is another problem here. 
158	sro...@gmail.com	1237873657000	Good, it is decoding with FNC1 as first symbol. I suppose there is not much harm in ignoring the symbol  rather than reject the code. Will have to think about that and revisit when I can get back to work on it.  
158	sro...@gmail.com	1237875279000	I am on vacation away from my workstation but should be ready shortly after I get back - about 2 weeks 
158	sro...@gmail.com	1237875394000	Ps as a qorkaround you can try decoding a larger version of the image which should dilute the off by one  error enough to work. Then you need to change the code to ignore rather than reject FNC1 
158	sro...@gmail.com	1238997375000	I changed the code to ignore DM symbols that are not supported. I also committed the detector fix after getting  it right, plus a few more small improvements. The test image work now. 
158	sro...@gmail.com	1241464609000	The &quot;MultiFormatReader&quot; does not look for DataMatrix by default. You would have to change the runner to use DataMatrixReader, or else pass a hint parameter that indicates you want to look for DataMatrix 
158	sro...@gmail.com	1241597328000	Yeah actually the original image does not work again. Will have to see what I broke... it has to do with the part of the code that determines the dimension of symbol. 
158	sro...@gmail.com	1246345183000	No big updates, some of the small bugs have been fixed, and clean images will decode, but many real images fail. What is posted in the online decoder is just about the latest code.  There are some change to dithering in progress which could help... I figure that will be done in a month or so. 
158	sro...@gmail.com	1246428340000	A pure black and white image should decode. A pretty clear photo (not much blur or uneven lighting or rotation) ought to decode. Really what seems to trip it up now is uneven lighting. The corner detector is just too sensitive. I think the dumb-but-fast approach in the code now may not be up to the task, but, Daniel is working on lighting adjustment improvements that might just rescue it. 
158	sro...@gmail.com	1248282153000	I think this is as 'fixed' as it's going to be anytime soon. 
161	sro...@gmail.com	1238415257000	Looks like a clear boo-boo indeed. I can fix this when I get back to a workstation. 
161	sro...@gmail.com	1238999907000	(No comment was entered for this change.) 
163	sro...@gmail.com	1238415611000	Simple enough that I can take on fixing this. 
163	sro...@gmail.com	1239000059000	(No comment was entered for this change.) 
164	sro...@gmail.com	1238415578000	Again looks like a clear and embarrassing bug that has been around for ages. I will confirm and fix in about a week when I am back at a proper workstation. 
164	sro...@gmail.com	1239000749000	(No comment was entered for this change.) 
165	sro...@gmail.com	1238415666000	Same story, looks convincing to me. Thanks for the great reports. I will take a deeper look soon and fix as needed. 
165	sro...@gmail.com	1239000966000	(No comment was entered for this change.) 
166	sro...@gmail.com	1238415696000	(No comment was entered for this change.) 
166	sro...@gmail.com	1239001119000	(No comment was entered for this change.) 
168	sro...@gmail.com	1238589977000	yeah that server isn't responding and I am away from a means to fix it for a few days. Coming back soon 
168	sro...@gmail.com	1238611910000	(No comment was entered for this change.) 
177	sro...@gmail.com	1239949882000	Whoa, surely this one can't decode! I can't reproduce in the sense that I don't detect anything in this, but, from the stack trace I see what's going on. I committed a change that should make sure the IAE becomes a ReaderException at least. That is the essence of the issue? Reopen if no. 
179	sro...@gmail.com	1239986505000	Ah, the problem is the period. The filter for a URL and raw text is pretty similar since a URL might be as simple as &quot;foo.com&quot;. The second is rejected as a URL since it has a space, for sure. The first happens to pass all the checks though. I can strengthen it to reject the first one too. 
184	sro...@gmail.com	1240772984000	So you are saying you do not see search results, though you do correctly end up at mobile product search.   I am not seeing this in the UK, but iit makes me wonder if it is something to do with the recent changes to  the mobile product search UI. But that should be rolled out here in the UK too. Neveertheless I somehow  suspect the landing URL may have changed.   Forwarding to Daniel who would know more.  
184	dswit...@gmail.com	1240961571000	Mobile product search launched for .com and .co.uk. If you ask for google.fr/m/products, for example, you'll get  sent to the mobile home page instead. I'm not sure what's going on here because I don't know what locale the  bug is happening with. I think the best thing to do is send all non U.S. and U.K. product search queries to the  new U.S. mobile site, since it's so much better than the desktop version. 
184	dswit...@gmail.com	1241134338000	I believe this is fixed in v2.7, which I just posted to the Market today. Please try again and reopen this bug if the  problem continues. 
184	dswit...@gmail.com	1242802133000	Mike, do you mean that scanning a product sends you to the main m.google.com homepage, and not mobile  Product Search? I changed the code so that unknown domains should go to the U.S. mobile Product Search page.  I wonder if they are redirecting you based on IP. 
184	dswit...@gmail.com	1243320433000	Hi folks, can you try again please? There has been a server-side change which should have fixed this issue.  Thanks, Daniel 
184	dswit...@gmail.com	1243379931000	(No comment was entered for this change.) 
187	sro...@gmail.com	1241539619000	Let's see, it looks like it is missing the &quot;MECARD:&quot; in front. But I'm trying it locally and it is generating barcodes that encode text like so:  MECARD:N:Sean Owen;EMAIL:srowen@google.com;;  These work fine, are recognized as contact info.  I looked into this since I recently changed this very code and wondered if my last change actually went in the build and I broke something. For once, it was the opposite. The previous version had a small bug:          mContents = &quot;MECARD:&quot;;         ...         if (name != null &amp;&amp; name.length() &gt; 0) {           mContents = &quot;N:&quot; + name + ';';  (last line needs +=)  Anyway, this is actually already fixed in SVN as a result. 
189	sro...@gmail.com	1241592834000	OK, think I got it. In this scenario, of course, the code finds lots and lots of 'false positive' QR codes, sets of 3 finder patterns which aren't related. Once in a while, however, the code partially succeeds in parsing the garbage as a QR code. In this case it gets far enough to read the version and format info from the 'QR code'. The version is wrong, and soon it results in an error. The fix is just to make sure the version info that is read makes any sense -- the dimension of the QR code matches what it should be given the version that was read. 
189	sro...@gmail.com	1241592842000	(No comment was entered for this change.) 
194	sro...@gmail.com	1242804464000	Is this fix to replace -&gt;count_ with -&gt;count()? Or even just to kill all the DEBUG blocks? happy to do that too. 
194	sro...@gmail.com	1242862622000	OK, try now? just removed those blocks in SVN. 
205	sro...@gmail.com	1246996011000	The first two Code 39 look pretty good... I think the decoder is getting tripped up by a little bit of grain in the image. I am seeing it think there are lots of small transitions between white and black within the white bars. Daniel's next changes to the image processing might help. Yeah, this should be decodable but isn't going to quite work this second.  The other, looks like a problem with the encoder. The decoder thinks it is using error correction level Q for some reason and so fails. That is a good one. 
205	dswit...@gmail.com	1256633765000	(No comment was entered for this change.) 
205	sro...@gmail.com	1261426921000	(brian.moran: Don't tack on an unrelated issue to an existing one please. First ask  questions in the discussion group, then file an issue here once you're sure it's an issue.)  This is an invalid QR code; it is a mirror image of a valid code. When flipped it decodes  as 67a9bae29c02cb0327e7bd4dda8a9b323d7565ca  
205	sro...@gmail.com	1267383914000	Just looking at this again -- good news is it was fixed. Really, the issue was the  generated QR code was mirrored (!). I believe that was addressed some time ago. So  Brian's comment was, actually, relevant I think. My bad there.  I regenerated the barcode as above and it gives the right result.  I also committed a related change that addresses the issue in finding the right format  info even in problem cases like this. 
208	sro...@gmail.com	1247769056000	Yeah this is a good example. It is definitely ISO-8859-1, but also has characteristics  that make it valid Shift_JIS too. I don't have a good solution for this, other than to  further tweak the guessing algorithm a little to get this right. 
215	sro...@gmail.com	1248115218000	That's a good report. It highlighted a way in which the detector could be simplified,  and reject a few less images that could actually be decoded. I just committed changes  that will cause this to decode, and overall improved accuracy very slightly. 
216	sro...@gmail.com	1248153172000	Hmm, it sounds like the device is automatically using the flash when it thinks lighting is too low. Is that a bad thing -- yes, it is probably going to take extra time. I don't see a way to control this in the Android APIs. Daniel, over to you, but is it something we can even control? 
216	dswit...@gmail.com	1248153931000	I'll ask the team. 
216	dswit...@gmail.com	1248158345000	OK, I've checked in a camera parameter to disable the flash. The Samsung doesn't appear to honor this flag at  the moment though. I'll continue to follow up on that internally. But I'm going to close out the ZXing side of this  bug. 
216	sro...@gmail.com	1248679838000	 Issue 218  has been merged into this issue. 
216	sro...@gmail.com	1248718011000	Interestingly, you suggest enabling the flash (I think) while this issue suggests  disabling it. Daniel reports that it doesn't do anything though? which suggests it is  always using the flash?  So, marcus what does your change do, enable the flash? It sounds like that is always  on anyhow or something?  I am not convinced that we shouldn't just let the hardware do what it thinks best,  just as we let the hardware focus and set brightness, white balance. I don't see that  it's always best to disable, or enable, the flash.  Daniel, others, thoughts? 
216	dswit...@gmail.com	1248737739000	Thanks Marcus. I'm checking with the Android team about this. 
216	sro...@gmail.com	1248795664000	I get it now. Yes this makes sense to me.  
216	dswit...@gmail.com	1250639688000	I've just released version 2.91 with a fix for the flash, which has been tested successfully on a Galaxy. 
216	sro...@gmail.com	1250696425000	That is the value Daniel ended up using... well, Daniel I notice you put the String &quot;2&quot; in rather than the int  primitive 2. Is there some possible issue there?  But I also know you say you tested this and it works. 2.91 is in the market now so I am assuming all here truly  are updated to 2.91, and that's not the issue. 
216	dswit...@gmail.com	1250724828000	I'm not sure what's going on here, but we will get it fixed. I don't personally have a device to test on which is the  biggest problem. Hang in there a little longer. 
216	dswit...@gmail.com	1250745342000	I've made a new beta using both of these:      parameters.set(&quot;flash-value&quot;, 2);     parameters.set(&quot;flash-mode&quot;, &quot;off&quot;);  Marcus, can you install the attached 2.92b1 APK and let me know if it disables the flash? 
216	dswit...@gmail.com	1250810416000	Thanks guys, I appreciate your help. Version 2.92 is now on the Market. 
221	sro...@gmail.com	1249322002000	Thanks, just committed this. 
221	suraj.su...@gmail.com	1252940391000	Hi  I have ported full Java Latest ZXING on .Net C# (belive me i spend only 25 mins for  this porting). 1D are working fine.  The issue for DATAMATIX i faced is   public DetectorResult detect() throws ReaderException where it thows indexoutofbound exception.  /* Figure out which point is their intersection by tallying up the number of times  we see the endpoints in the four endpoints. One will show up twice.*/  Hashtable pointCount = new Hashtable();  increment(pointCount, lSideOne.getFrom());  increment throws this exception. I am looking into this. Will update soon if i am  able to port few things for Datamatrix.   
224	sro...@gmail.com	1250014553000	Seems reasonable to delete these if it prevents the project from being built in a sort  of development-only mode. I assume that, of course, to really publish the app you need  to fill in your own credentials.  The iPhone build is not supported anymore, so it is what it is. Sounds like it went  pretty smoothly other than this? don't imagine it's terribly hard, but, I have no  experience with this code. 
227	sro...@gmail.com	1250639353000	Exactly it is a problem while moving hosting providers. Of course, the new provider stops working when  I switch. Working with them to figure out what broke. Sorry this is provided as is and I would not rely on  it.  
227	sro...@gmail.com	1250642438000	I modified the site to require only JSP 1.2 / Servlet 2.3, which will work on old Tomcat 4. So that at least reduces  the requirements from JSPX / JSP 2.1. You just need to run tomcat and place the resulting w.war file in  webapps/. That's about it, though you might wish to further configure and harden the Tomcat server from there. 
227	sro...@gmail.com	1250653849000	It's back up now, problem resolved. 
228	sro...@gmail.com	1250666796000	That doesn't quite sound like the same thing as 219, where the strange issue was always immediately opening  some URL. Sounds interesting, I'll leave it open for comment, but I can't reproduce on a Hero or G1 here. 
228	sro...@gmail.com	1250981394000	I think none of us have a Hero to test with. Any chance you can use 'adb logcat' to capture logs from the device  at the time it is failing scanning? Maybe that points to a cause. If you're really up for it and have the dev tools,  you could even try determining where the ReaderException is thrown with a debugger. 
228	sro...@gmail.com	1251169706000	Weird. I have a G1 and don't see this. I don't see it on a friend's Magic either. There's some issue here but  unclear what is causing it. Not sure what we can do until we can reproduce, but will not close since there seems  to be something up here. If anyone can snatch a log, or provide any clues from a debug session, it would be  greatly appreciated. 
228	sro...@gmail.com	1251230755000	I am now also able to reproduce this occasionally. I also don't see the pattern. I'll dig in with the debugger and  more logs now that I can see it is possible to reproduce. 
228	sro...@gmail.com	1251256069000	After digging in I understand where the issue is -- something to do with the preview  frame callback never returning at a certain point. The way this is handled was changed  not too long ago and while the current approach ought to work, this is addressable by  reversing the small change. Consulting with Daniel about how best to proceed, maybe the  platform guys want to look at this. 
228	dswit...@gmail.com	1251332805000	I've filed a bug with the Android team. In the mean time reverting to the old method is the right thing to do. 
228	sro...@gmail.com	1251332963000	Cool, then it's fixed in SVN. 
230	sro...@gmail.com	1251042661000	Nice one, fixed 
234	dswit...@gmail.com	1251677871000	Thanks. We're changing hosts and this may be down for a week or two. We'll close out the bug when it's running  again. 
234	sro...@gmail.com	1251918951000	I moved us to Amazon EC2 temporarily while we figure out a long-term hosting provider. It's working now. 
240	sro...@gmail.com	1253664425000	Are you saying the QR Code itself can't be decoded? and are you using this project to encode, decode, or  both?  If you mean it decodes, but the text is not what is expected - QR codes do not quite support encodings other  than ISO-8859-1 (and Kanji, via Kanji mode). In theory you can inject an ECI segment that specifies encoding,  but this is virtually undocumented and not well supported. Your best bet is to use UTF-8. You can use 'hints'  to specify this to our encoder, which will inject an ECI segment for UTF-8. Whether it works or not depends on  the decoder. Our decoder should also be reasonably good at auto-detecting UTF-8 as well, with or without  ECI.  But of course all this doesn't make a difference if your target platform doesn't have glyphs (a font) for Greek  characters.  Assign back with information. 
240	sro...@gmail.com	1253665968000	Got it, let me look into it. Failing to decode at all is probably not to do with the Greek text, but let me look. 
240	sro...@gmail.com	1253667438000	So far I think the problem is with the encoder -- it looks like it's not properly indicating that the data is 8  bytes long -- says it's 4. I imagine there is some goof in counting characters versus bytes. The UTF-8  encoding of these chars is of course 8 bytes, not 4.  In the meantime, you can try specifying encoding &quot;ISO8859_7&quot;. That may work since it will select the ISO  encoding for Greek, which is a single-byte encoding. But I will look at the underlying problem.  The only issue with using UTF-8, which I am already seeing while debugging, is that there isn't an ECI value  for it so it can't be specified. Decoders must guess, and I think these bytes will also decode as Shift_JIS, and  our decoder (and others likely) will prefer to guess Shift_JIS. So it may be the ISO8859_7, if it works, is the  better choice.  But, some decoders might barf on an ECI segment, even though it's part of the spec.  It is unfortunately problematic to encode non-Latin characters in a QR code (except for Kanji which has its  own mode). 
240	sro...@gmail.com	1253670515000	Hmm, are you using the latest code? When I generate a QR code for this I get a different code, that does appear  to work. I wonder if there was some issue fixed in recent history that explains the difference. 
240	sro...@gmail.com	1253675199000	Have you got the latest code from subversion, rather than the 1.3 release? While I don't specifically recall a fix  here, it has been a while since 1.3 was released, so perhaps there was a fix since then that I have that you don't  in that release.  That change indicates it's working more -- the ?? is more a function of the browser or device you have not being  able to display the characters? which decoder are you using and how are you decoding? 
240	sro...@gmail.com	1253675863000	OK good, try the latest code.  Also try sending the result to our online decoder -- http://zxing.org/w/decode.jspx  I think i-nigma is decoding it fine, just that your handset maybe can't display the Greek characters? this  browser-based decoder ought to not have that issue. 
240	sro...@gmail.com	1253690824000	(Tentatively closing but open again if there is still an issue) 
240	sro...@gmail.com	1254098800000	Yes, I picked UTF-8 encoding and it produced a different, correct encoding. It is the same code you use -- you  have it right. Just, perhaps that I am using the latest code in Subversion. Have you tried your code with the latest  in Subversion? 
249	sro...@gmail.com	1255400130000	Good catch, looks like some recent changes ended up using methods not found in MIDP 2. I fixed these. 
249	sro...@gmail.com	1260216217000	Good one, I fixed this too. I guess Hashtable.clone() doesn't exist in J2ME. 
249	sro...@gmail.com	1277133343000	Got those too, thanks 
254	dswit...@gmail.com	1255922066000	(No comment was entered for this change.) 
254	dswit...@gmail.com	1255922342000	This may only be happening when upgrading from a 3.0 alpha build. Sean, did the database schema change?  Can you patch the code to upgrade from the older format? 
254	sro...@gmail.com	1255924617000	What if you uninstall? that column should be there.  
254	dswit...@gmail.com	1255928209000	I've heard that uninstalling, then reinstalling beta 1 directly works. Lots of users had one of the alphas though. Is  there an easy workaround? 
254	sro...@gmail.com	1255931058000	Here's what happened -- basically I changed the database format from one version to the next, and didn't  update the DB number. Oops. I guess I didn't really understand that lots of people had started using the initial  version, so, kept counting the new version as &quot;1&quot;.  One fix is to up the number, of course, and put out a new build. The update should happen automatically,  since the process is just to delete the DB and start again. This doesn't fix it for people with the current build - - that needs an uninstall. But I'll make the change so that people upgrading from beta 1 to beta 3 (or final  version) don't see a problem.  This doesn't ultimately affect end users who never saw the intermediate version anyhow. 
254	dswit...@gmail.com	1256001766000	I'm getting reports of crashing running beta2. It looks like an upgrade problem only but I'm not sure which  path. Is there anything we can do about this?  E/AndroidRuntime( 3631): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.zxing.client.android/com.google.zxing.client.android.CaptureActivity}: android.database.sqlite.SQLiteException: table history already exists: CREATE TABLE history (id INTEGER PRIMARY KEY, text TEXT, format TEXT, display TEXT, timestamp INTEGER); E/AndroidRuntime( 3631):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2454) E/AndroidRuntime( 3631):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2470) E/AndroidRuntime( 3631):        at android.app.ActivityThread.access$2200(ActivityThread.java:119) E/AndroidRuntime( 3631):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1821) E/AndroidRuntime( 3631):        at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 3631):        at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 3631):        at android.app.ActivityThread.main(ActivityThread.java:4310) E/AndroidRuntime( 3631):        at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime( 3631):        at java.lang.reflect.Method.invoke(Method.java:521) E/AndroidRuntime( 3631):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) E/AndroidRuntime( 3631):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) E/AndroidRuntime( 3631):        at dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime( 3631): Caused by: android.database.sqlite.SQLiteException: table history already exists: CREATE TABLE history (id INTEGER PRIMARY KEY, text TEXT, format TEXT, display TEXT, timestamp INTEGER); E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method) E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1609) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.history.DBHelper.onUpgrade(DBHelper.java:56) E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:108) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.history.HistoryManager.trimHistory(HistoryManager.java:130) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:148) E/AndroidRuntime( 3631):        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) E/AndroidRuntime( 3631):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417) 
254	sro...@gmail.com	1256001941000	Hm, onUpgrade() does this:    @Override   public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {     sqLiteDatabase.delete(TABLE_NAME, null, null);     onCreate(sqLiteDatabase);   }  (onCreate() then makes the table anew) I guess the delete doesn't work, but don't see why. Otherwise I can't figure out why the table would exist.  I'll look at it but by far the easiest workaround for folks is to go into app management and delete the app  data. (Or reinstall.) 
254	sro...@gmail.com	1256002056000	Oh wait, I get it now after rereading the API. This just deletes rows from the table. I will find the right way to  drop a table and commit ASAP. 
254	sro...@gmail.com	1256003845000	Think I got it now 
263	dswit...@gmail.com	1257067026000	If you can reproduce the crash, then run 'adb logcat' and capture the output it would very helpful. 
263	sro...@gmail.com	1257090979000	The issue is the preview format is not supported: &quot;yuv422i&quot;  At the least I can commit a change that would make this situation clearer.  Daniel you think it's safe to guess this is in fact an interleaved YUV format? that's sort of what the code looks for  now, &quot;yuv422i-yuyv&quot;. I'm guessing it's reasonable given the name. 
263	dswit...@gmail.com	1257125224000	Yeah, the patch looks OK. Just please add a comment including the current string I'm using, and that we  specifically changed this for compatibility with this device. 
263	dswit...@gmail.com	1257125356000	Hang on, that's not it:  preview-format=yuv420p  Look at this:  E/AndroidRuntime( 3275): java.lang.IllegalArgumentException: Source must be non-null. E/AndroidRuntime( 3275):  at com.google.zxing.Binarizer.&lt;init&gt;(Unknown Source) E/AndroidRuntime( 3275):  at com.google.zxing.common.GlobalHistogramBinarizer.&lt;init&gt;(Unknown  Source) E/AndroidRuntime( 3275):  at  com.google.zxing.client.android.DecodeThread.access$000(DecodeThread.java:43) E/AndroidRuntime( 3275):  at  com.google.zxing.client.android.DecodeThread$1.handleMessage(DecodeThread.java:92) E/AndroidRuntime( 3275):  at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 3275):  at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 3275):  at com.google.zxing.client.android.DecodeThread.run(DecodeThread.java:100) 
263	dswit...@gmail.com	1257125642000	It should be yuv420sp (notice the 's'). I have no idea what yuv420p is. 
263	sro...@gmail.com	1257126659000	Oops you're ahead of me already. See my reply on the groups thread.  Why don't we guess this is the same thing and see how it works? 
263	dswit...@gmail.com	1257137861000	I'll work on a fix. In the future, let's get folks to run &quot;ZXing Test&quot; from the Android Market and email us the  output of the &quot;Get camera parameters&quot; button. 
263	sro...@gmail.com	1257141614000	OK yeah but what about this patch as at least a first step? at least it gets more information, and may well work. It  will stop this cause of the force close too. 
263	dswit...@gmail.com	1257144249000	Sure, go for it. 
263	sro...@gmail.com	1257145463000	Done. If any Moment owners care to check out and build, would be cool. May well just work. 
263	sro...@gmail.com	1257175215000	Good, maybe we can get out a point release for this. Not sure but it kind of looks like this is a bug in the  Moment, maybe we can report it. 
263	sro...@gmail.com	1257175290000	(No comment was entered for this change.) 
263	sro...@gmail.com	1257206646000	You would need to build the latest source code from source and install on your device. Roughly, that's:  1) Build core from core/ with &quot;ant clean build-no-debug&quot; 2) Build android from android/ with &quot;ant&quot; 3) Delete the existing copy of the app from your device 4) &quot;adb reinstall&quot; 
263	sro...@gmail.com	1257461672000	 Issue 271  has been merged into this issue. 
263	dswit...@gmail.com	1257469945000	Barcode Scanner 3.01 is now live on Market with a fix for the Samsung Moment. 
265	sro...@gmail.com	1257201738000	I committed a change for the immediate issue. I still feel like the encode API should return BitMatrix, not  ByteMatrix, right? Don't see the point in the latter. 
265	sro...@gmail.com	1257327824000	PS here is my BitMatrix change. What do folks think, worth it? 
265	dswit...@gmail.com	1257550024000	One potential reason for returning bytes is so that an encoder can render antialiased text under the barcode. 
265	sro...@gmail.com	1257550488000	True I guess. I'll punt on this. 
272	sro...@gmail.com	1258046256000	Yup good one, I committed the change. I'll take a look at your file too. 
272	sro...@gmail.com	1258051590000	Yeah there was another little problem that was making it look at he wrong part of the image in one part of the  recursion. Try it now, it gets all 5 
276	sro...@gmail.com	1258418781000	Oh OK, that was quick. I see you have to then have the SDK download platform support. Will see how it goes  after that finishes. 
276	sro...@gmail.com	1258432533000	With that, and one change to default.properties, works now. I think that change may make it not build with the  1.6 SDK now though, so update everyone. 
276	dswit...@google.com	1261464183000	Sounds like you need to install that component using sdk/tools/android. 
276	sro...@gmail.com	1263937268000	No, see Daniel's previous comment. You need to run 'android' to install the components  of the 2.0 SDK that you need. If in doubt just install everything. 
276	sro...@gmail.com	1263942920000	... and have you installed Proguard? 
294	sro...@gmail.com	1260319841000	It is MECARD as well, and as far as I know, the generator is correct. Provide an example  of what you are trying to encode that isn't working for you, otherwise not much we can  do. 
294	sro...@gmail.com	1260346515000	http://202.214.192.60/english/service/imode/make/content/barcode/function/applica tion/addressbook/  Yeah ORG is non-standard. For reasons I forget the decoder supports it, probably  because we saw it in use somewhere. The encoder shouldn't put that in though, in my  opinion. I can change that.  Yes I can also have it read multiple address lines, that's a good idea. 
294	sro...@gmail.com	1260347685000	(No comment was entered for this change.) 
294	sro...@gmail.com	1260413320000	Try again now, Yohann just pushed a change that should address both these things, if I  am right. 
295	sro...@gmail.com	1260402674000	Sorry, what encoder are you using? zxing.appspot.com? locally built?  In any event pretty sure I understand the issues, and they are fixed in Subversion, but  will need to get pushed out.  Yohann, any chance you have a moment to update the generator? I believe I've now  fixed two small items. 
295	lep...@gmail.com	1260412582000	Done ! New version is serving now. Thanks. 
295	sro...@gmail.com	1260413291000	Wow, so it is. Thanks! super fast.  There were really two potential 'issues' here, one in encoding and one in decoding, and  fixing either one resolves 294 and 295. I fixed both, so pushing one should take care of  things. The next client release will just be that more robust then. 
295	sro...@gmail.com	1285171666000	(No comment was entered for this change.) 
298	sro...@gmail.com	1260842952000	Good point. In the format, a comma separates the first and last name in a &quot;last,first&quot;  form. That's why it's being read this way.   http://www.nttdocomo.co.jp/english/service/imode/make/content/barcode/function/a pplication/addressbook/index.html  I don't see here a way to escape the comma, so my proposed fix is to strip the comma  from the input here.  
298	sro...@gmail.com	1260846075000	Fixed, will have to push a new version of the generator to make it live though. For now  just omit the comma. 
300	sro...@gmail.com	1261064810000	My guess is that the ':' is causing the crude heuristics to think it's trying to be  a URL. So it gets normalized by lowercasing.  While this is an artifical situation, can be patched up I'm sure. 
300	sro...@gmail.com	1261428348000	Hm, I am not able to reproduce this. I encoded your string as text with the project  generator (attached). I decode it online and got the exact string back. Are you using  text mode? 
300	sro...@gmail.com	1261449016000	I get it now, it's actually more of a display issue in the client. It is being though of as a  URI. think I can fix it now. 
303	sro...@gmail.com	1261544965000	Yes, tons of people are writing in about this. It is, as far as we can tell / are concerned,  a device bug.  There is no real way to turn off the flash in Android 1.x. However devices exposes raw  camera parameters we can manipulate. Samsung exposes 'flash-value'. However the  value that turns off the flash for the Galaxy ('2') doesn't work on the Behold 2. That's  about the end of the story. Contact Samsung. 
303	sro...@gmail.com	1272136850000	Yep, then that breaks the Samsung Galaxy. In principle I don't want to work around Samsung's issue; they should,  and have not bothered at all it seems.  In practice I suppose one can query the MODEL string and alternate behavior accordingly. Maybe one line of code  isn't so bad. 
303	sro...@gmail.com	1272137017000	OK done 
309	sro...@gmail.com	1262546444000	Yeah this was fixed some while ago, and should be live in the latest app on the market.  Are you up to date? 
309	sro...@gmail.com	1262557124000	I'll have to look more into why it doesn't like this as a vCard.  It would ignore unrecognized parts of the vCard; that's not the issue.  I do see you're using things like 'BDAY;value=date:' instead of 'BDAY' -- is that  standard? that would explain why it's ignored; it's not the dashes (that was fixed;  that was a crash).  You're also adding things I think you might want to omit, like VERSION, and encoding  both FN and N. For limited-size QR codes I might optimize for length.  But I still don't see why it's not recognized as a vCard; I'll have to look more  later. 
309	sro...@gmail.com	1262568617000	Actually it doesn't give up if it can't parse a birthday -- note that  'isLikeVcardBirthday' accepts null.  Yeah actually I looked again and the code is all fine in this regard, it handles all of  this syntax. I think you were just hitting a bug fixed a while ago. When I run this  locally it all parses fine.  I'll see about updating the online decoder since I think it doesn't quite have the latest  stuff.  If you're writing a plugin that does intend to put all this in a QR Code, I'd suggest  trying to trim it down if you can for easier scanning. I'd also note that &quot;MECARD&quot;  format is probably more widely supported as a format for contact info. 
309	sro...@gmail.com	1262574396000	Yes, but that's not a valid birthday, so it's not technically valid vCard info. You're not  seeing this output are you? that would be an AddressBook problem.  I understand the argument that, well, yeah it's not valid but it looks like it's trying to be  vCard, so silently ignore it. I could say that's a slippery slope -- how much invalidness  do you work around? Working around this doesn't seem like much of a sin, even if I  strongly prefer to hold the line against accepting bad input. But does this even come up  in practice? 
309	sro...@gmail.com	1262577734000	I understand now, actually the bad birthday does cause it to be rejected as a vCard. It  wasn't the dashes issues. OK, I can make that one-line change.  You're right it is not at all a complete vCard parser. I'd like to accept a subset of valid  input, and no invalid input, in principle, but OK I can see simply ignoring bad parts of  input in cases like this. 
309	sro...@gmail.com	1262578601000	No real ETA... wouldn't expect it inside of a month. I suppose we don't like to release too  too often to avoid annoying people. 
309	sro...@gmail.com	1262790531000	Looks good to me but what's the deal with catching Exception -- what are you  expecting might be thrown there? 
310	sro...@gmail.com	1262547990000	Yeah that's out of date, I updated it. Look at CommandLineRunner for a complete  example. 
311	sro...@gmail.com	1262626860000	Nice one, fixed. 
312	ralf.kis...@gmail.com	1262642815000	The new hybrid binarizer is optimized for small images from a the camera's viewfinder,  large images like these won't work well. 
312	sro...@gmail.com	1262646838000	Daniel what are your thoughts on this. I did just put up a new copy of what's in trunk. I  can try the global binarizer, which is as I understand the 'old' approach, and I could see  why that might work better on the sorts of images people upload on the web. 
312	sro...@gmail.com	1262647339000	Try it now. I changed to the global binarizer. 
312	dswit...@gmail.com	1262647943000	Sounds like a reasonable change. Marking fixed. 
312	sro...@gmail.com	1275677090000	there is no bug, you are not understanding the QR code specification. The maximum size depends on the encoding mode used. If you only use alpahnumeric  characters, yes it's like 4K charaters. As soon as you use certain other symbols, it  switches to byte mode, which has a lower limit.  The generator and decoder are working correctly in this regard AFAICT. 
316	sro...@gmail.com	1263058082000	I'll have to look at this. The result points are flipped in doDecode(), so I would think this  works, but will try it out. 
316	sro...@gmail.com	1263059976000	Oh I see the issue now. Yes good fix. I'll commit. 
316	dswit...@google.com	1263078287000	I'd like to understand the behavior here more clearly:  If I feed in a landscape image, and a barcode is found by rotating and decoding in portrait, are the coordinates  produced by this change in landscape? I think that would be the right behavior, since the user didn't rotate the  image themselves. 
316	sro...@gmail.com	1263078498000	I don't think that will matter -- well up the chain from where the issue occurs. Whether  it's in landscape or portrait, it will feed the image in the library in some orientation, and  get coordinates relative to that orientation, and draw accordingly. I think that's fine.  The issue was when detecting at 90 or 270 degrees (from internally-rotated images in  core/), the coordinates weren't translated. 
316	dswit...@google.com	1263078897000	I was just giving an example. Let me try to be clearer:  I feed in a 640x480 image. The barcode exists in the top-left corner as seen in landscape mode. Internally the  image is rotated and a barcode is found in the 480x640 image in the bottom-left corner. Does this change  cause the library user to see the coordinates as reported in the top-left of the 640x480? If so we're all set. 
316	sro...@gmail.com	1263080345000	Yes, that's exactly the fix. 
322	sro...@gmail.com	1263510578000	Weird, the instance seems to have restarted and a default HTTP server went up. I fixed  it. 
329	sro...@gmail.com	1264469429000	We don't support this code, but happy to try to patch it. Where does this go?  I think someone was going to re-port all the csharp/ code FWIW. 
329	sro...@gmail.com	1265320167000	Oh you said where it was there. Done. 
336	sro...@gmail.com	1264995273000	For whatever reason I don't observe this behavior on my Hero (HTC-flavored Android  1.5). Sure why not just set that flag? 
336	sro...@gmail.com	1267399184000	I submitted this change and am testing it now... while I wasn't able to reproduce this  myself, the change doesn't seem to have any negative effect. 
340	dswit...@google.com	1265408503000	Thanks for the report. It's already been fixed and a new version should be on Market in a few weeks. 
344	sro...@gmail.com	1265647386000	I can apply a patch like this, but it will just cause more confusing errors later if the  preview format is not in fact the default -- which is actually exactly your situation in   issue 343 . 
344	sro...@gmail.com	1265649579000	Hmm, Daniel I see you intentionally had it crash on an unsupported format. I tend to  agree with that in principle  Do you think that there's an argument to default to YUV420SP? it happens to work if  the format is any kind of planar YUV.  However it doesn't address this particular situation, which only highlights the  downside to this change.  At the least, we need to avoid an NPE here by replacing a null previewFormatString  with, say, &quot;unknown&quot;. I'm going to make that change and consider the rest of this a  duplicate of 343. 
344	dswit...@google.com	1265679556000	Phones are required to support yuv420sp AND use it as the default if we don't set something else. 
344	sro...@gmail.com	1265679765000	Ah OK, that seems to seal it. The rest is a problem with the Sciphone / Geeksphone  then. The data is plainly not YUV420SP.   Good thing I didn't start writing that support... 
344	sro...@gmail.com	1265737633000	Ah I missed the resolution being different. Yes, that's likely the reason. The image is  being doubled up and corrupted somehow 
344	sro...@gmail.com	1265745417000	I'm thinking of a patch like this to actually parse the preview-size-values param and/or  use the camera's default preview size in preference to screen resolution. Daniel,  thoughts? 
344	sro...@gmail.com	1265786269000	That's good news. Daniel I wonder if this is related to the issue we discussed offline on  that Japanese device. I'll wait for a nod from you as you understand more about the  implications of this change. 
344	sro...@gmail.com	1267082537000	I committed my change so we can begin evaluating it (works for me and works for this  issue). 
357	sro...@gmail.com	1268156878000	There are two issues.  In both, there are 2 barcodes in the image, which doesn't quite work, since it will  detect the top of one and bottom of the other as the boundaries. You can use the  detectors in com.google.zxing.multi to handle multiple barcodes in one image.  If you split up the barcodes, the ones in image 2 decode fine.   However that is not the issue for image 1. They're not decoding even after separating  them. It's finding the boundaries of the barcode correctly, but when sampling the  bits, it comes out wrong. Looking closely at the image, I think it may be due to a  slight warping of the barcode? It appears like it's on a curved page. It also looks like  it is stretched out horizontally, which I'm not sure is allowed. Can you get a more  straightforward scan of the barcode, like in image 2?   Since I think this explains the output, I'm marking as 'not a bug' but we can continue  discussion in any event. 
357	sro...@gmail.com	1268161963000	After reading the code (didn't write it originally) I see it makes the assumption that  the barcode is in the center of the image, which stops it from being recognized. I  relaxed this assumption and committed a change to Subversion.  it's still not decoding, but now it is due to not liking the contents of the code. I think  it is still missing some of the modules and the error correction is failing.  This ought to help, but not address this 100%. Unfortunately I don't think I personally  have time to investigate further on these but you're welcome to dig in to the code and  try to determine what the issue is. 
357	sro...@gmail.com	1268165709000	Also, if you are able to use QR codes instead, that would be much easier to decode.  You can also use this library first, and in the cases it doesn't decode, use the other one. 
357	sro...@gmail.com	1268195858000	I don't see any obvious issues with how it samples. I'll leave it sitting around for a while. 
357	sro...@gmail.com	1270198367000	 Issue 368  has been merged into this issue. 
357	sro...@gmail.com	1270231352000	 Issue 366  has been merged into this issue. 
357	sro...@gmail.com	1270430546000	I doubt it will decode images like the one you posted, but it will decode things like the images linked earlier in  this thread. I think you'll need to work on improving the detector if you really want it to work on images like that. 
357	sro...@gmail.com	1270491238000	 Issue 375  has been merged into this issue. 
357	sro...@gmail.com	1271030148000	Thanks, I can commit this fix. Which is a test image that works only after this change, so I can add a unit test? 
357	sro...@gmail.com	1271036294000	One bit I don't understand is: codeIndex &lt; codeWords[0] instead of codeIndex &lt; codeWords.length  -- index is  an offset into the array right? 
357	sro...@gmail.com	1271054664000	You know this code better than I do at this point -- may not be able to construct a test case on my own but am  willing to take your word for it. if you're an active user and this is improving the result, good. Also I wonder if  byteCompaction has the same sort of issue? I wonder because I see it has that same curious large empty if  statement, which I suspect is intended to include the two lines that follow as its body (as your change does). I'm  inclined to fix that, not even knowing more about this 
357	sro...@gmail.com	1271640309000	Here's my latest patch (now can attach since our quota has been increased) -- is this roughly what you have in  mind? It passes whatever tests we have and I'd be willing to commit if one more glance doesn't reveal an obvious  issue. 
357	sro...@gmail.com	1271656249000	OK committed the fix, thank you, and credit you in AUTHORS. This may be as close to a fix as this issue will see  so resolving it. 
363	dswit...@google.com	1269559497000	Good bug, thanks! 
363	sro...@gmail.com	1269572488000	Most of what you describe is by design, though we could change it. In general the  app always returns you to the scanning screen when it comes back, from sleep or  another app or anything. This avoids some confusing situations where, for example,  the user left while picking a contact to share. Coming to BS and seeing contacts is  odd.  I think we could remove this behavior in this one case though, for the case of the  Intent that shows scan results. Daniel thoughts?  I wasn't able to reproduce the rest of this though, I was able to scan and rescan the  same code after waking, without trouble. I'm on a Hero. 
363	dswit...@google.com	1269578742000	I did repro this on Nexus. What happens is you go back to the scanning screen but autofocus isn't running and  image processing does not appear to be running. This is a genuine bug. 
363	sro...@gmail.com	1277021295000	The core issue here is part 5 from the OP. Daniel do you think your last change for Acer fixed this one? 
363	dswit...@google.com	1277074751000	Yup this is exactly the case I fixed. 
364	sro...@gmail.com	1269900962000	This looks like a device bug as it is not correctly advertising its preview format. Can you run the app &quot;ZXing  Test&quot; from the market? it will send us more information on the device.  Unless we know the device is properly using YUV420 preview format, we can't just assume it's this format. It  would cause other problems. So we might have to blacklist the device and ask you to contact the manufacturer  about a fix.  Marking not-a-bug until we know otherwise since the output here shows the device is not implementing the  platform correctly. 
364	dswit...@google.com	1269905308000	Even if the device returns the wrong (or no) values we shouldn't crash. We should put up a dialog explaining that  this device is not compatible with the Android camera spec. 
364	sro...@gmail.com	1269912435000	Yep you're right Daniel -- just got the camera parameters report and it's another geeksphone. I'm going to  'blacklist' it like we do the Pulse.  ... we could then actually proceed with pretending the device is using YUV 420? it may not work, but at least we  warned the user it might not work.  Yes, we got the message fine. The other functions invoke BS, and yes the device isn't behaving as expected so the  app stops. 
364	sro...@gmail.com	1269919543000	Yes I think the device actually uses YUV420, which is the required default, so just skipping this check happens to  work on this device. It's not clear that works on other devices. So yes I understand the hack that works here, and  you're welcome to use that build or make the hack locally and build for yourself  But really the manufacturer needs to fix this, so I'd contact them as well and ask what's up. 
364	sro...@gmail.com	1269934359000	Continuous auto-focus is normal, but not scanning is not normal. If you have a clear, steady, well lit QR code and  it's not scanning then something else is surely wrong. Maybe the data format is not YUV420 then? not sure. 
364	sro...@gmail.com	1269962681000	That's good to know, but would it not be simpler to add a preview-size parameter to the list of parameters the  camera returns? (Or are you saying this is not possible at the ROM level?)  You are right that it takes a wild guess at the end if it doesn't know better, and guesses the screen size, and that  is probably wrong in some cases - like this one. 
364	sro...@gmail.com	1269996821000	If preview-size is set, there ought not be no mismatched resolution. It will use this size, and not 'guess' that it's  the same as the screen size. 
364	sro...@gmail.com	1270062219000	Oops yes I meant the preview-size-values parameter. we used to look for preview-size but want to actually  select the size closest to the screen size so changed that. 
376	sro...@gmail.com	1270572097000	Gonna need to know what device you are using, and for you to use the ZXing Test app in the market to send  us a dump of its camera parameters.  This app is written to use Android 1.x, which has no direct APIs for zoom control. Instead it tries to set device  specific camera parameters to set zoom. Right now it sets 2 or 3 such params. I can try to guess and set  another one if your device has yet another way to do this.  When the world is 99% on Android 2.x we can move as well. I'm sure that the real API for this, which i assume  you're using, does in fact work on the device. 
376	sro...@gmail.com	1270573533000	Hmm you could be right. There are new explicit params for focus, effects, flash, white balance in 2.x but I  don't see zoom. I had assumed there was. In any event, yes the &quot;zoom&quot; param is already being set.  I checked in a change to look for and respect 'mot-zoom-values', though I am not sure it's actually anything  to do with it. This param shows up in reports from the Moto Blur.  I went back and combed a device report from the Droid and see 'mot-zoom-step' of 0.5. I'm guessing the  device won't accept zoom values that aren't a multiple of 0.5. Right now the default is 2.7x (which is  conveniently the max zoom on the Hero, my personal device).  I'll make a change in the next 15 minutes or so to respect that value. Once that second change is in maybe  you are in a position to download/build from SVN and try it? 
376	sro...@gmail.com	1270609482000	Nice one. I just committed something like this. Actually I completely overhauled how CameraManager is  organized since it was getting unruly. I'd appreciate people like yourself trying the build, not only to see if this  works but to make sure scanning's OK.  (So I can credit you, can you mail me your name? I'm srowen. Or happy to credit viperwolf) 
376	sro...@gmail.com	1271868067000	I'm reluctant to since it complicates the interface and not all phones have this function. I don't know if it would  solve things. The app is already repeatedly requesting zoom, and that wouldn't be changed by this 
383	sro...@gmail.com	1271289180000	I can give you a build that may address this if you'll get me your email address separately. 
383	sro...@gmail.com	1271361395000	I committed my fix to SVN, a change which also ought resolve an issue on the Moment + Android 2.1 
396	sro...@gmail.com	1272871601000	Interesting, Dave just hours ago mentioned he had a patch to clean up some things like this. Perhaps his change  will encompass some or all of this, then we can try this patch. 
396	sro...@gmail.com	1272907843000	OK, it's not a big patch -- even if it conflicts I'm sure Dave can figure it out. However I'm not able to apply this patch -- it seems to want to move the files around. Could you look at  regenerating it? maybe from the project root or cpp/ root, but really anything that doesn't move the files I can  figure out. 
396	sro...@gmail.com	1272911134000	OK yeah -p5 from the cpp/core/src dir worked. 
407	sro...@gmail.com	1274120309000	This seems specific to new, Sense-based devices -- have heard this in regards the  MyTouch too. For example the N1 is fine, and a Hero with 1.5 is fine. I think we have a workaround so anyone willing to try a new build can contact me off- list. 
407	sro...@gmail.com	1274312562000	 Issue 413  has been merged into this issue. 
407	sro...@gmail.com	1274894934000	It's not actually related. It's a race condition in restarting the scanning activity. Anything which restarts it spins  the roulette wheel again.  Marking fixed since 3.3.1 beta is up and appears to fix this on all affected devices. 
411	sro...@gmail.com	1274231555000	Thanks, I'll look into this more. Should be easy to avoid this.  java.lang.IllegalArgumentException: Both dimensions must be greater than 0  com.google.zxing.common.BitMatrix.&lt;init&gt;(BitMatrix.java:49)  com.google.zxing.common.BitMatrix.&lt;init&gt;(BitMatrix.java:44)  com.google.zxing.qrcode.QRCodeReader.extractPureBits(QRCodeReader.java:150)  com.google.zxing.qrcode.QRCodeReader.decode(QRCodeReader.java:69)  com.google.zxing.MultiFormatReader.decodeInternal(MultiFormatReader.java:156)  com.google.zxing.MultiFormatReader.decode(MultiFormatReader.java:64)  com.google.zxing.web.DecodeServlet.processStream(DecodeServlet.java:316)  com.google.zxing.web.DecodeServlet.doGet(DecodeServlet.java:212)  javax.servlet.http.HttpServlet.service(HttpServlet.java:617)  javax.servlet.http.HttpServlet.service(HttpServlet.java:717)  com.google.zxing.web.DoSFilter.doFilter(DoSFilter.java:72) 
411	sro...@gmail.com	1274240219000	Should be fixed in SVN now 
412	sro...@gmail.com	1274292777000	Also easy to fix.  You're running into corner-cases in the &quot;pure barcode&quot; mode. This maybe not surprising  since these images aren't a pure barcode, let alone contain a barcode!  Why are you using pure barcode mode though? This shouldn't be needed. 
412	sro...@gmail.com	1274298653000	(No comment was entered for this change.) 
412	sro...@gmail.com	1274395184000	If they're scans, even if the pages are really clean scans, you may not want  PURE_BARCODE. It gets thrown off easily if it's not actually a pure, exactly oriented  image. I would just set TRY_HARDER. But hey if you tried it and it worked better, go  ahead. 
432	sro...@gmail.com	1275548391000	Cool, fixed. 
456	sro...@gmail.com	1276880291000	I can get on merging that with the current translation. 
456	sro...@gmail.com	1277020913000	Thanks, I've committed this. 
461	rpech...@gmail.com	1277302062000	Have made a patch to make ScanTest build. It seems that there has been some api broken with matest cpp update. Have added const qualifiers to LuminanceSource.h. If there is a good reason not to have these const qualifier, then this should be reverted and Subclasses of LuminanceSource shoud be updated accordingly 
461	smpar...@smparkes.net	1285194677000	THe original problem is fixed. ScanTest doesn't use GrayBytesMonochromeBitmapSource anymore. If you're seeing this problem, it sounds like you have out of date code. Or perhaps you're trying to build Barcodes, which is currently not working: see  issue 529 . 
465	sro...@gmail.com	1278002069000	As it says does creating libs/ make it build? 
465	sro...@gmail.com	1278101383000	OK I just added an empty libs/ directory to SVN. I bet that will address this. 
465	sro...@gmail.com	1283059735000	Yeah looks like that reference is easy to cut out of a stock Android build script. I'll just do that here and you can try the result. 
469	sro...@gmail.com	1278437646000	Use the TRY_HARDER hint and it decodes fine. You can see this working by uploading to http://zxing.org/w/decode.jspx. It says:  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;xfa:data xmlns:xfa=&quot;http://www.xfa.org/schema/xfa-data/1.0/&quot; &gt;&lt;root &gt;&lt;metadata &gt;&lt;region &gt;1234&lt;/region &gt;&lt;id &gt;4&lt;/id &gt;&lt;email &gt;apanasovich@diasoft.ru&lt;/email &gt;&lt;mail_notice &gt;1&lt;/mail_notice &gt;&lt;telefon /&gt;&lt;sms_notice &gt;0&lt;/sms_notice &gt;&lt;password &gt;0000&lt;/password &gt;&lt;/metadata &gt;&lt;data &gt;&lt;question1 &gt;&lt;/question1 &gt;&lt;question2 &gt; &lt;/question2 &gt;&lt;question3 &gt;  &lt;/question3 &gt;&lt;question4 &gt;&lt;/question4 &gt;&lt;question5 &gt;  &lt;/question5 &gt;&lt;question6 &gt;2010-06-25&lt;/question6 &gt;&lt;question7 &gt;&lt;/question7 &gt;&lt;question8 &gt;&lt;/question8 &gt;&lt;question9 &gt;&lt;/question9 &gt;&lt;question10 &gt;2&lt;/question10 &gt;&lt;question11 &gt;111111111111&lt;/question11 &gt;&lt;question12 &gt;11111111&lt;/question12 &gt;&lt;question13 &gt;1111&lt;/question13 &gt;&lt;question14 &gt;&lt;/question14 &gt;&lt;question15 &gt;&lt;/question15 &gt;&lt;question16 &gt;&lt;/question16 &gt;&lt;question17 &gt;4&lt;/question17 &gt;&lt;question18 &gt; 2010&lt;/question18 &gt;&lt;question19 &gt;&lt;/question19 &gt;&lt;question20 &gt;111111111111.00000000&lt;/question20 &gt;&lt;question21 &gt;44444444.00000000&lt;/question21 &gt;&lt;question22 &gt;444444&lt;/question22 &gt;&lt;question23 &gt;33333333&lt;/question23 &gt;&lt;question24 &gt;333.00000000&lt;/question24 &gt;&lt;question25 &gt;33.00000000&lt;/question25 &gt;&lt;question26 &gt;33.00000000&lt;/question26 &gt;&lt;question27 &gt;333&lt;/question27 &gt;&lt;question28 &gt;?lt;/question28 &gt;&lt;question29 &gt;333.00000000&lt;/question29 &gt;&lt;question30 /&gt;&lt;question31 /&gt;&lt;question32 /&gt;&lt;question33 /&gt;&lt;question34 /&gt;&lt;question35 /&gt;&lt;/data &gt;&lt;/root &gt;&lt;/xfa:data &gt; 
469	sro...@gmail.com	1278448468000	The error looks like something fixed a while ago. I think I just need to update the web site's code.  See DecodeHintType. You want to use something like:  Hashtable hints = new Hashtable(); hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);  and then pass this hints object to the decode method. 
469	sro...@gmail.com	1278458878000	Yes these are going to be hard to read. I don't think its realistic to use QR codes with that much teext. 
469	sro...@gmail.com	1278610453000	I would stick to a couple hundred characters, ideally. I notice that the data inside it is very verbose XML. You probably want to choose a more compact representation. The same data is probably only a couple hundred bytes. You could also compress the data, and modify the encoder to accept a byte array directly. The decoder would likewise need to access the raw byte[] content rather than String. 
469	sro...@gmail.com	1279049312000	Sorry what is your question? 
469	sro...@gmail.com	1279052539000	You need to modify the encoder to accept a byte[] directly, rather than a String. You can find the point where it has already converted the String to byte[], and instead inject a byte[] directly.   The decoder can likewise be modified. 
469	sro...@gmail.com	1279059516000	You need to use PURE_BARCODE hint to reliably decode images like this. The library is expecting something more like a photo. 
469	sro...@gmail.com	1279075794000	Can you post an image that is not decoding? I am surprised if PURE_BARCODE doesn't work. The answer is that a pure image has a lot more regions that look like a finder pattern, so many many more chances for a false positive in that phase. 
469	sro...@gmail.com	1279086705000	The first two are indeed a corner-case problem. I just fixed it. The last one is very strange. It seems like the PNG isn't read correctly, since white pixels appear near the top-left corner where there should be none and it's thrown off. I have no idea what's going on there to be honest. It's not a problem with the decoder per se since you can read any of these off the screen correctly. The latter may be some strange image parsing problem. As it's a real corner case I am not sure I personally would investigate it further. 
469	sro...@gmail.com	1279125038000	Yeah like I said, you're welcome to investigate more, though it almost looked like a problem in the image reader to me. Very strange. I myself  probably won't look into this more. 
469	sro...@gmail.com	1280379115000	I see what you are saying, but isn't this just creating the opposite &quot;bug&quot;? Imagine what happens in an all white region. Either way you have such an issue, and it is an issue. The question is which way is better in practical situations. Try the change, then run the unit tests again to see how many more or fewer images pass. 
469	sro...@gmail.com	1280410080000	(No comment was entered for this change.) 
469	sro...@gmail.com	1280466087000	This change makes loads of other images fail unfortunately. I think it's there for a reason. But if it works for you, you can use that modification locally for your own app of course.  Rotation is not the reason there is an issue here. 
469	smpar...@smparkes.net	1280467091000	Do you mean the &quot;pixel &lt; threshold&quot; vs &quot;pixel &lt;= threshold&quot; change, Sean? I stumbled upon the same idea a while ago when dealing with pure data images (was trying to avoid knowing which I had ahead of time). Without that change, the hybrid binarizer drills white holes in black regions like the alignment patterns.  Guess I need to get the tests running under CI ... 
469	sro...@gmail.com	1280534874000	OK I'll commit this. It doesn't seem to affect unit tests. The logic makes sense; this change is a pretty conservative step. 
470	sro...@gmail.com	1278462068000	Sure, just need a patch. I don't understand the part about the Java code though. 
470	flya...@gmail.com	1278634700000	Fixed in r1472. 
471	sro...@gmail.com	1278462018000	Sounds good, go ahead and commit a patch or attach one. 
471	flya...@gmail.com	1278634737000	Fixed in r1473. 
472	sro...@gmail.com	1278461980000	You can submit a patch if you want but yeah the C++ version is not supported and is just never going to be in sync. 
472	flya...@gmail.com	1278463483000	Working on a patch now. 
472	flya...@gmail.com	1278992689000	Fixed by r1480. 
474	sro...@gmail.com	1279309227000	Yes, I believe this is something we fixed a month or so ago. You can try the SVN version or wait for an update. 
475	sro...@gmail.com	1279309187000	Sure, fixed. 
488	sro...@gmail.com	1280670068000	I'm hestitant to change this since it seems working, and this code is used without STL AFAIK (just as the Java version does not use the standard libraries for compatibility with J2ME). 
488	smpar...@smparkes.net	1280671019000	It's definitely not working. This wasn't found through inspection, it was found via (laboriously) tracking down tests that pass java and fail in C++.  I don't quite follow your &quot;without STL&quot; comment. Sort is coming out of the standard &lt;algorithm&gt;. The spec for sort (http://www.cplusplus.com/reference/algorithm/sort/) says that the comparison function returns a boolean.  Without the fix, the sort basically does nothing. Since both -1 and 1 are true, the sort algorithm is completely whacked (which shows upon on one of the tests where an outlier pattern gets chosen when it shouldn't be). 
488	sro...@gmail.com	1280679612000	How does this compile? I don't know much about the port, but the original source does not use a sorting library. It uses a simple insertion sort. If that's been ported, this works. If there are good answers for that sure I could believe this is needed but is this so? 
488	ralf.kis...@gmail.com	1280685675000	The C++ port does use STL (or uSTL). If the patch fixes broken tests, it should be used. 
488	sro...@gmail.com	1280692644000	OK sounds good, committed 
488	smpar...@smparkes.net	1280700356000	Thanks! 
492	sro...@gmail.com	1280973536000	The rotation is right but the resulting image boundary is wrong, is that the issue? OK will have a look when I'm back. 
492	smpar...@smparkes.net	1280974011000	Yeah, sorry. Poor choice of words. It's just that the new image has to be of a different size and that also means that there has to be translation to move the old center to the new center. The patch will actually handle non-90 degree rotations and produce an image of the necessary size and placement. That generality is currently not used, but the general case is easier to code than the special cases. 
492	sro...@gmail.com	1281759116000	Looks great, will commit. 
507	sro...@gmail.com	1281449763000	There is no vCard support and MECARD does not encode company info. Yeah the field really shouldn't be there. I'll delete it but no real plans to update this. 
507	sro...@gmail.com	1281480295000	It's not valid, no. 
507	rico.vaccaro	1281826556000	I was able to add mecard ORG: support.  The attached files show the changes. Please keep in mind that I made these changes on version zxing 1.4 
507	sro...@gmail.com	1281827480000	Right, it's not that it would be hard to add that. It's that it's not valid. 
508	dswit...@google.com	1281486338000	 Issue 509  has been merged into this issue. 
508	sro...@gmail.com	1281590695000	Sounds good, committed with 511 
510	sro...@gmail.com	1281592511000	(No comment was entered for this change.) 
511	dswit...@gmail.com	1281503699000	(No comment was entered for this change.) 
511	sro...@gmail.com	1281585368000	I can commit this, but it doesn't affect the number of images that pass when I run the tests. #11 does not decode. Any ideas? 
511	smpar...@smparkes.net	1281585713000	To see more successes, you'd need 508. Without 508, it'll never find three finders in 11. 
511	smpar...@smparkes.net	1281586551000	I should put an &quot;I think&quot; around that. I don't know that I tested that exact case, but I am pretty sure ... 
511	sro...@gmail.com	1281590314000	OK yes I see that now. 
512	sro...@gmail.com	1281480173000	(No comment was entered for this change.) 
518	smpar...@smparkes.net	1281875988000	How did you create this? 
518	sro...@gmail.com	1281902213000	It's not true that in general &quot;large QR codes&quot; will not decode. This one may not due to false positives in the finder pattern finding, or it could be invalid. 
518	smpar...@smparkes.net	1281952080000	(No comment was entered for this change.) 
518	sro...@gmail.com	1281953768000	Ha yeah nice one, your last change did make this decode. 
518	smpar...@smparkes.net	1281956687000	Actually, it was 519. 
519	sro...@gmail.com	1281935950000	Good eye. Indeed that is the correct value from Table E.1. I'll commit a fix now. 
524	sro...@gmail.com	1282436336000	Probably so, do you have a patch in mind? 
524	smpar...@smparkes.net	1282696966000	Very simple. I'll apply if there no objections. 
524	smpar...@smparkes.net	1283172467000	(No comment was entered for this change.) 
537	sro...@gmail.com	1283274223000	The barcode itself is actually *both* a UPC-A code and EAN-13. EAN-13 is actually a clever superset of UPC-A, designed that way to enable backward compatibility. The scanner simply picks UPC-A here. The only way to differentiate is that there are actually 13 digits printed below. It is EAN-13, so calling it UPC-A is technically off, but I don't think we're going to go to the trouble of disambiguating just for this. 
537	sro...@gmail.com	1283279850000	Ah I think you have a point here. Internally, when scanning for UPC-A and EAN-13, only one decoder (for EAN-13) is deployed since EAN-13 is a superset. If it finds a barcode starting with 0 it construes it as UPC-A. That's a nice trick, but, is not correct when UPC-A is not allowed as a barcode format. In this case it should just return the 13-digit value.  I can fix that I'm pretty sure. It will still come back as UPC-A if scanning for both, but, will come back as EAN-13 if UPC-A is not allowed. 
537	sro...@gmail.com	1283282804000	(No comment was entered for this change.) 
540	smpar...@smparkes.net	1283937579000	Checking. 
540	smpar...@smparkes.net	1283946697000	Yeah, that's what I thought it would be and I found references from other people having the same issue for the same reason.  It looks to me like a bug. If you break the debugger while it's hung, you see that it's hung while trying to stop a preview while you're adding the (only) preview. Sounds like it's confused.  I'll commit the workaround in the morning. 
540	smpar...@smparkes.net	1283991086000	(No comment was entered for this change.) 
548	sro...@gmail.com	1284022286000	Sounds like a problem simply opening the web page: &quot;connection closed&quot;. That's not related to the app. It's not supported anyway. 
548	sro...@gmail.com	1284052791000	Nobody hass worked on the BlackBerry client, and don't think there's a plan to, so I don't know what it's status is regarding newer phones / OS / emulator. 
548	sro...@gmail.com	1284068451000	I see, this works differently than the Java File/FileInputStream, where you'd have to close() the stream then delete() the file. I switched these around and you can try again now. 
570	sro...@gmail.com	1285822449000	Oops, yeah fixed in SVN now. I may be lazy in deploying an update though. 
573	sro...@gmail.com	1285885687000	Ah yeah, that is necessary when the screen and preview size differ. They don't on my device so hadn't seen it. The patch seems to work fine on my phone too as expected. I'll commit it and you and others can verify it works. Thanks. 
579	sro...@gmail.com	1286432278000	This seems like a pretty artificial situation, but valid. This made-up WIFI format is supposed to follow DoCoMo's MECARD format. In that format, ';' must be escaped as &quot;\;&quot;. Same with ':'. There is an unescaped ';' in the password here. What happens if you escape it? 
579	sro...@gmail.com	1287026769000	I'm going to make :, / and \ escaped too. 
587	sro...@gmail.com	1287429487000	You mean r1616? Can you help me by providing the QR code, or a full stack trace?  
587	sro...@gmail.com	1287436875000	Again that r1616 not r616, I'm assuming. I'm not seeing this behavior. QR codes seem to work fine. Yes, please provide a stack trace and/or code. Also are you able to try the latest code from SVN? 
587	sro...@gmail.com	1287438633000	That call does not exist in the latest code. Can you try the latest? I think the answer is therefore that it's already fixed. 
587	sro...@gmail.com	1287523160000	(No comment was entered for this change.) 
587	sro...@gmail.com	1287526234000	Like I mentioned to you in an email, you subscribed to the Google Groups list for this project, which is why you get its messages. You can and typically do manage your own subscription/unsubscription. But, I've unsubscribed you manually. 
597	sro...@gmail.com	1287799568000	Yah I see it just uses the QR code reader's &quot;pure barcode extractor&quot; which doesn't quite work for this image. This whole bit of code needs an overhaul and I can do that. 
597	sro...@gmail.com	1287807266000	OK think I got this one. 
603	sro...@gmail.com	1288854696000	Great, thank you, committed. 
608	sro...@gmail.com	1289422343000	There is some weird bug in the Wildfire and/or Intercept that's causing this, even though nothing changed in this particular piece of code. We'll try to work around it. 
608	sro...@gmail.com	1289458206000	It'd be greatly helpful to get a stack trace from your logs. I don't have a Wildfire for testing, and it doesn't affect any phone I have, so at the moment it's not clear what the problem is if this didn't address it 
608	sro...@gmail.com	1289493836000	The easiest thing for non-developers is to download a program called &quot;aLogcat&quot;. Run it, and switch its log level to 'warning' under its settings. Then go reproduce the problem. Then go back to aLogcat and use it to send the recent log result to me (srowen at gmail).  I'm guessing it's the same issue, and we confirmed it's a weird problem in the device. One of the UI elements is unavailable. I can work around that, but it means you won't get one small new feature until it works (a preview of 'more info' on the barcode). 
608	sro...@gmail.com	1289518917000	Oops, Lachezar has put his finger on what I am almost certain is the actual problem, and it is my fault. There is a separate layout for LDPI screens (low DPI) which did not have the same UI elements declared correctly. This is why it only affects a few phones. You can try yet another build here: http://code.google.com/p/zxing/downloads/detail?name=BarcodeScanner-Wildfire.apk  This should both work and also let you see the &quot;extra info&quot; field below the barcode content. You'll see what I mean when scanning a barcode. Anyone who can confirm it is OK? 
608	sro...@gmail.com	1289518944000	 Issue 609  has been merged into this issue. 
608	sro...@gmail.com	1289518978000	 Issue 611  has been merged into this issue. 
608	sro...@gmail.com	1289519004000	 Issue 612  has been merged into this issue. 
608	sro...@gmail.com	1289519058000	 Issue 614  has been merged into this issue. 
608	sro...@gmail.com	1289527105000	 Issue 615  has been merged into this issue. 
608	sro...@gmail.com	1289527134000	 Issue 616  has been merged into this issue. 
608	sro...@gmail.com	1289588763000	 Issue 617  has been merged into this issue. 
608	sro...@gmail.com	1289635768000	 Issue 619  has been merged into this issue. 
608	sro...@gmail.com	1289667146000	 Issue 620  has been merged into this issue. 
608	sro...@gmail.com	1289750777000	 Issue 625  has been merged into this issue. 
608	sro...@gmail.com	1289754083000	Daniel should put up the new build today or so, sit tight. 
628	sro...@gmail.com	1289920584000	Yes, looks like an easy problem to fix. I just committed it to SVN. 
631	sro...@gmail.com	1290649198000	i was going to say I don't know this code well enough to fix it but I got lucky and spotted the problem pretty fast. It's a one line change and is committed. It will go out with the next release. 
631	sro...@gmail.com	1290649217000	 Issue 635  has been merged into this issue. 
658	sro...@gmail.com	1292135537000	Great, I don't know Aztec myself but sounds like you do. I committed this with the test image. 
663	sro...@gmail.com	1292699141000	No problem that is an easy change to make. 
