4	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1195459654000	1195527108000	1195527108000	Problems when QR Code has no alignment pattern	 I'll note that I think there is some bug in here that crops up when a QR Code does not have an alignment pattern (true of the simplest ones) -- I am looking into it.     Fixed in Subversion                 Status: Fixed              		sro...@gmail.com
5	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1195479340000	1195525659000	1195525659000	Top-leve build file and build.properties not included	 Oops, found the first dumb mistake in this first release: the top level build.xml and build.properties files were not included.     These are fixed in Subversion now.                 Status: Fixed              		sro...@gmail.com
11	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1196034190000	1196037796000	1196037796000	Build problem on Windows	 There remains a build problem on Windows -- build script relies on Unix-like "wc" command to compute the size of a file. Need to find an alternative for Windows. Cygwin doesn't count.     Should be fixed now -- Ant provides a cross-platform <length> task which does the trick.                 Status: Fixed              		sro...@gmail.com
14	Defect	Fixed	sro...@gmail.com	yvan.norsa	1196176596000	1196212335000	1196212335000	ZIP release doesn't unpack in a directory	   1. Download ZXing-0.1.1.zip 2. Unpack it 3. Observe how it fills up your current directory     It should unpack in a directory, probably named ZXing-0.1.1     Good idea. I have submitted a fix for this in Subversion.                 Status: Fixed              		sro...@gmail.com	yvan.no...@gmail.com
18	Defect	Fixed	sro...@gmail.com	herf...@yahoo.com	1199992358000	1200986588000	1200986588000	does not work on nokia 5300	 What version of the product are you using? On what operating system?  zxing 0.2        Which version, regular or basic? Regular won't work since the device does not support JSR-234. What happens, does the application run and not decode, or is there a problem running it?        I tested both of them (regular and basic) but in both case it just make an exception:  Class Not Found  java/lang/ClassNotFoundException com/google/zxing/client/j2me/ZXingMidlet  the firmware of nokia 5300 is v 5.50. thanx          I think it is important to understand here how the MIDLET has been deployed. I used  to get the ClassNotFound Exception as stated above but ever since I moved to  installing the application via the Nokia PC Suite - this error has gone away. I  believe OTA would work too.  So I suggest that you install it OTA and see if the error goes. Alternately even try  the PC Application Suite.  Definitely use the Basic version - for 0.2.1 - you could take the  com.google.zxing.client.j2me.AdvancedMultimediaManager from the basic version and  overwrite the one in the main version with this one. Rebuild the j2me client and you  should be all set.        Ahhh... I may have just stumbled upon the problem, thanks for calling my attention back to this a second  time.  The class is called "ZXingMIDlet" but the exception mentions "ZXingMidlet" (note different capitalization). It  looks like the manifest file I wrote gets this wrong. I suppose that the devices I happened to test on worked  around this or were treating this as case-insensitive.  I'll correct this first thing tomorrow and put up a new version, to see if that solves this issue.  By the way, the difference between "basic" and "main" is exactly that one class, AdvancedMultimediaManager.  If you "ant build-basic" in the "javame" directory, you should get exactly what you describe here actually.           I think I have fixed this particular problem by correcting the MANIFEST.MF file in the .jar. Can you try the most recent version from zxing.org/w/ZXingReaderBasic.jad (version 0.2.2)?                 Status: Fixed              		herf...@yahoo.com	romin.k....@gmail.com	sro...@gmail.com
20	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1200986951000	1202097220000	1202097220000	"Open xxx" dialog has only "Cancel" option	 Looks like the way the app works now, the "OK" button in dialogs like "Open URL?" does not show up on some phones. That is bad.     Hi!  I have Nokia N61i and I am in the same situation! Only "Cancel" option comes up, no any other one! :-(        This is fixed in subversion.  On other phones there is always a default OK button, but not all it seems.        Unfortunately it doesn't seem to work :-(. I downloaded version 0.2.2, but the same "OK"-missing incident.   Other: is roadmap available? :-)        Yes it is in subversion but not released yet. If you build from the source code now it should work as intended. It'll come out soon in 0.2.3.  Roadmap -- there's not a very firm roadmap, but I can tell you that the next major improvement will be to 1D barcode support. I am rewriting it now to support more formats and refactor the code.  Also I suppose we will want to turn out the Android client source soon.  Later -- Data Matrix support.  In between, bug fixing and improvements as needed.        SVN works perfectly for me in this regard. There is another bug but this particular one is gone.        Should be OK in 0.3                 Status: Fixed              		horvath....@gmail.com	sop...@gmail.com	sro...@gmail.com
23	Defect	Fixed	sro...@gmail.com	sop...@gmail.com	1201975383000	1202096994000	1202096994000	Nokia E51 produces no "OK" button to browse to a URL	   1. Compile 0.2.2 2. Install on Nokia E51, unsigned via Nokia PC Suite 3. Start the J2me app 4. Go to darlamack.blogs.com, point the camera at the barcode found a page or so down (Lacking autofocus this requires being some distance away from a regular monitor for it to detect it correctly)    Way to browse to the URL. Instead I see only a "Cancel" button. "Ok" button or similar seems to be missing.  What version of the product are you using? On what operating system?  Zxing 0.2.2 on Nokia E51.            Sorry, this is a dupe.        I think this should be fixed. In 0.3 I introduced a change that should ensure there is always an OK/Yes button.                 Status: Fixed              		sop...@gmail.com	sro...@gmail.com
24	Defect	Fixed	sro...@gmail.com	sop...@gmail.com	1201976686000	1202188518000	1202188518000	Path with spaces breaks build	   1. Download SVN into a folder with a space in it 2. type "ant" in the top folder     A successful build, instead there is an error message.  What version of the product are you using? On what operating system? Windows XP SP2           Is the error message like this?  Expecting class path separator ';' before 'and' in argument number X  This is an error from ProGuard and is kind of a bug in ProGuard, I think. I will look into a workaround. The build.xml file is correctly producing a platform-independent path to feed to ProGuard in this argument but it does result in this error.  Workarounds for now:  1. Checkout to a directory without spaces 2. Comment out the proguard step in build.xml 3. Hand-craft the librarypaths argument to ProGuard in the build.xml file        Yes, that is the exact message I get. I simply removed the space in the path.        OK this wasn't so hard to work around. I just had to copy and pass the list of library jars to ProGuard differently. It's in Subversion now; you can snag this copy:  http://code.google.com/p/zxing/source/browse/trunk/javame/build.xml                 Status: Fixed              		sop...@gmail.com	sro...@gmail.com
29	Defect	Fixed	sro...@gmail.com	garykbli	1202312646000	1202966264000	1223837234000	Focus setting is not supported	   1. Install the applet 2. Run the applet 3. Try to take picture    The camera will focus, but as soon as I try to take a picture an error will pop up. This is what it says: "javax.microedition.media.MediaException: the given focus setting is not supported"  What version of the product are you using? On what operating system? Software: ZxingReader 0.3 (not basic) OS: Sony Ericsson K850i R1DA038           I just made a change in Subversion that should address this. It will just ignore the fact that the K850 does not support FocusControl.AUTO_LOCK. You can build from SVN to try it or wait for the next release.                 Status: Started               I put in a fix for this particular issue in 0.4; no guarantee that there are not other issues.                 Status: Fixed               FYI: Also the C702 doesn't support FocusControl.AUTO_LOCK       		garyk...@gmail.com	sro...@gmail.com	vestera...@gmail.com
38	Defect	Fixed	sro...@gmail.com	b.avsar	1203323950000	1203652434000	1203652434000	code 128 support	   1. I used generated code128 type barcodes like the attached one to test code128 support 2. 3.     I got "no barcode detected" message  What version of the product are you using? On what operating system?  Code128 test was done with both 0.3 and 0.4 release                                       33.gif    2.1 KB      &nbsp; View    &nbsp; Download                                         Thanks for the good test case. I will debug and see what is going on tomorrow.                 Status: AcceptedOwner: srowen               I've made improvements to Code 128 decoding that make it capable of recognizing this image. The fix is in Subversion now and will roll out with the next release. I went ahead and pushed these fixes to the decoder at zxing.org. You can try decoding this at zxing.org/w/decode.jspx and see that it works.                 Status: Started               ()                 Status: Fixed              		b.av...@gmail.com	sro...@gmail.com
39	Defect	Fixed	sro...@gmail.com	b.avsar	1203324364000	1208907916000	1208907916000	Basic reader  no such method 'a' error (com.google.zxing.a.a ) a com.google.zxing.c	   1. Basic reader on k750i 2. 3.      What version of the product are you using? On what operating system?  Basic reader binary release at the release date of 0.4           Hmm, sounds like a problem with the optimizer. If you have the time and ability to do so, you could help debug by building this locally without ProGuard optimization and see if the problem persists. I'll do my best to investigate.                 Status: AcceptedOwner: srowen               I wonder if this is the same issue that came up on some Nokia JVMs, a mysterious NoSuchMethodError, which should be fixed in the next release (and is fixed in Subversion) by a slight change to the class declarations?        Marking this as (possibly) fixed                 Status: Fixed              		b.av...@gmail.com	sro...@gmail.com
41	Defect	Fixed	sro...@gmail.com	i...@oobik.com	1204043794000	1204068108000	1204068108000	 com.google.zxing.Result should contain type of barcode scanned.	 What version of the product are you using? On what operating system? 0.4.5     com.google.zxing.Result only has 2 methods - it would be nice to store more information in that class.. Specifically, getBarcodeFormatType() should return whether a QR or UPC barcode was scanned. This is handy when a developer throws an image at MultiFormatReader and would like to know what was processed.  I can submit a patch if this is desired functionality.     I actually just committed this a few days ago. It's in Subversion.                 Status: Fixed              		i...@oobik.com	sro...@gmail.com
50	Defect	Fixed	sro...@gmail.com	hisano	1206878432000	1208252103000	1208252103000	Building Android project problems	 When building a BarcodeReader.apk on Windows, I got the below error message:  BUILD FAILED C:\eclipse3.3.1\workspace\zxing\android\build.xml:185: Execute failed: java.io.IOException: Cannot run program "c:\android\tools\dx": CreateProcess error=2, ...  My versions are:  zxing trunk  Android m5-rc15  Windows XP SP2  jdk1.6.0_05  I attached a diff to fix the problem for android/build.xml. Please, check and merge it if you think it is useful.                                  build.xml.patch    962 bytes      &nbsp; View    &nbsp; Download                     A-ha, on Windows, this command is "dx.bat". Yes, looks like we need some logic to account for this on Windows. I'll digest your patch and commit it or something similar.        Interesting, this patch doesn't seem to address the issue that I'm seeing here, which is the same as yours. I played around with vmlauncher and location vs. value in the <property> task, but I think all that doesn't quite matter. I think we have to conditionally set the property to "dx" vs. "dx.bat" based on the OS. Ant makes this relatively painless so I can fix that. Actually I think I should suggest this as an enhancement to the Android tools, since right now it generates a slightly different build file for Windows, which doesn't seem optimal.                 Status: AcceptedOwner: srowen               OK I see the need for some of these changes. I added them plus a change to select dx.bat versus dx on Windows. This appears to be the only .bat file needed by the build file. It appears to work, is checked into SVN, and will go out with the next release.                 Status: Fixed              		his...@gmail.com	sro...@gmail.com
56	Defect	Fixed	sro...@gmail.com	p...@foreach.be	1210195785000	1210205810000	1210205810000	Broken QR Pattern Detection causes ReaderException	 Create a QRCode image encoding the string "12328" (just the number, not  the quotes) with EC Level L and data mask 011.  When trying to decode this image, a  ReaderException: versionNumber must be between 1 and 40  will be thrown, because the topleft pattern will be misplaced, causing the  dimension to be estimated at 17, smaller than the minimum 21.  Using ZXing 0.7 on XP                                   enc17724.png    235 bytes      &nbsp; View    &nbsp; Download                                         Sounds like a good bug report, I'll take a look at why it is misidentified today.                 Status: AcceptedOwner: srowen               Interesting, good bug. It was picking up (43,58) as a finder pattern. If you look at the pixels above/below and left/right of it, indeed they match the finder pattern profile. Since this is the third finder pattern found, and it can be confirmed with a second check on the next row, the detector stops and does not find the third one.  Here, we know the third "finder pattern" is bogus since it is bigger than the others by a noticeable margin. I basically added a heuristic to check this, and if the confirmed finder patterns are too different in size, it keeps looking.  Then it finds the real third finder pattern. Later when it has to pick which 3 of 4 are the real ones, it does get it right.  The fix makes this image work. Of course, if we misidentified a finder pattern that matched real ones in size, we would still have a decode problem. This is a weakness in the current FinderPatternFinder -- it's trying to be fast but will miss tricky corner cases like this.  At least, it is less easily fooled now. This image now decodes.  The fix is checked into Subversion. The change is just to FinderPatternFinder, so you could just pick up that change, recompile.                 Status: Fixed              		p...@foreach.be	sro...@gmail.com
69	Defect	Fixed	sro...@gmail.com	dominik.wild	1217278699000	1217404966000	1217404966000	Deleted ECI test case	 In rev536 the ECI test case was delete, but I wouldn't consider it as obsolete.  Because it does test the special decoding of ECI values in qrcodes it should also stay in it's current package and not be moved according to the changes in rev 535.     Hah OK you caught me. I had made the method private after moving it into the QR Code package and didn't want to make it more public just for testing, and thought this was probably not going to change or break. Not really the best argument. I will re-add it and expose the ECI decoding again at least to the package.                 Status: AcceptedOwner: srowen               Okay I see, it's private now. Instead of re-adding it, test cases for the decode() method could also do the job. Is the DecodedBitstreamParser actually test covered besides the black box tests?        OK I readded this test in a different form, by adding the start of proper tests for DecodedBitStreamParser.                 Status: Fixed              		dominik....@gmail.com	sro...@gmail.com
70	Defect	Fixed	sro...@gmail.com	dominik.wild	1217443569000	1217460256000	1219014476000	AdvancedMultimediaManager is not working	 If a api is not supported exceptions are thrown at runtime in the setFocus(), setZoom() or setExposure() methods when getting the corresponding control and not during instantiation as intended.     To be more precise, with the current code you'd still have to provide two versions, one with and one without AdvancedMultimediaManager.        And to be even more precise... a NoClassDefFoundError is thrown in setFocus(), setZoom() or setExposure(). At least on a Nokia E65.        Good one. We need to catch for NoClassDefFoundError too to make this Default/AdvancedMultimediaManager  trick work out on all platforms. I committed this to SVN.                 Status: FixedOwner: srowen               Well, that unfortunately won't do the trick because the Error is not thrown during instantiation. e.g. the following line causes the Error (FocusControl is not defined without MMAPI): FocusControl focusControl = (FocusControl)         player.getControl("javax.microedition.amms.control.camera.FocusControl");        Hmm, sounds like a platform bug then? I wonder what class is not found? It shouldn't be FocusControl because by the time instantiation is done, it has loaded AdvancedMultimediaManager, which has a compile-time dependency on FocusControl. I can't see how FocusControl would cause the NCDFE. If it is something else, it's a platform bug.        Hmm, maybe it is behaving differently than I expect (not sure if it is *supposed* to load all imported classes at class load time or not, but I thought it was supposed to). Regardless, I could put get the FocusControl, etc. in the constructor so at least those errors would get thrown and caught at instantiation. Let me do that -- look in SVN shortly.        It has a compile-time dependancy but that's not a problem because AMMS (JSR-234 not MMAPI as mentioned before, sorry) is available during compilation. But in this case the library is not available on the device. So it's a library which is missing in classpath. Indeed it's really the mentioned line which causes the NCDFE and that's not a platform bug, JavaSE is behaving the same.        Yes I understand the issue, that some phones do not have JSR-234 classes at all. We're trying some clever tricks to avoid writing two versions of the code, as we did before, one which has references to JSR-234 and one which doesn't.  Check out the trick that DefaultMultimediaManager tries to pull. It basically loads a class that has the JSR-234 references, and sees if it fails, and if it does, just falls back on its own self to implement setFocus() et al. as no-ops.  The weird thing is, if FocusControl et al. don't exist, you should see a NoClassDefFoundError when AdvancedMultimediaManager is instantiated. that was how JVMs have to work, I thought, but could be wrong. But it's happening later when setFocus() is called and you try to get a FocusControl object -- you shouldn't even have been able to load this class if FocusControl isn't available, I'm saying.  So you get a NoClassDefFoundError there. (I'm assuming it's not some other class internally that's not found, which would mean the E65 just has a platform bug.) I committed another attempt at a workaround which places references to these classes in the constructor, in an attempt to induce the failure there.        NCDFEs are thrown when trying to instantiate a class which cannot be found but not until coming across that line with the corresponding new statement. So in our specific case the error is not and should not be thrown when AdvancedMultimediaManager is instantiated but when trying to instantiate e.g. FocusControl. This is just as the JVM is supposed to behave. Imported classes are not loaded during instantiation.  But yes, your latest changes should fix it.        I'm pretty sure this is not correct. In Java SE, this would definitely fail at class load time, not later when the missing class is instantiated. So if you're right, all of Java SE is doing it wrong. I wrote a quick test class to make sure I'm not nuts here.  I can only imagine that there is actually no guarantee about this either way (or else the Nokia JVM is doing it wrong but let's not assume that). Yikes, strikes me as an interesting source of subtle bugs between Java SE and platforms that behave differently. But shame on us if we depend on class load order I guess.  I hope the latest change does it. My only worry is that ProGuard will optimize this away.        For the interested, the answer is there is no guarantee! http://java.sun.com/docs/books/jls/second_edition/html/execution.doc.html section 12.1.2:  The resolution step is optional at the time of initial linkage. An implementation may resolve symbolic references from a class or interface that is being linked very early, even to the point of resolving all symbolic references from the classes and interfaces that are further referenced, recursively. (This resolution may result in errors from these further loading and linking steps.) This implementation choice represents one extreme and is similar to the kind of "static" linkage that has been done for many years in simple implementations of the C language. (In these implementations, a compiled program is typically represented as an "a.out" file that contains a fully-linked version of the program, including completely resolved links to library routines used by the program. Copies of these library routines are included in the "a.out" file.)  An implementation may instead choose to resolve a symbolic reference only when it is actively used; consistent use of this strategy for all symbolic references would represent the "laziest" form of resolution.   I know some phone JVMs choose to emulate Java SE's all-upfront resolution approach.        Ha, it's optional... totally forgot that. I'm using Sun's HotSpot JVM which does nothing upfront. Not a coincidence that my short test -- which should prove that I'm not nuts... ;-) -- has shown a different result than yours. So, obviously SE != SE and ME != ME.        Finally I got that Nokia back to test the behaviour. As you worried, those dummy variables were optimized away. I tried to find another way around this issue and ended up loading the Controls through Class.forName(). Probably this could also solve  issue 74 .                                   AdvancedMultimediaManager.java.diff    1.6 KB      &nbsp; View    &nbsp; Download                        		dominik....@gmail.com	sro...@gmail.com
71	Defect	Fixed	christia...@gmail.com	bobertmurphy	1217576146000	1217612272000	1217612272000	CountedTest.cpp does not compile	   1. Create an XCode 3.1 project which includes the C++ sources from the iPhone project, and  includes the C++ unit tests in such a way that they will actually compile. (The iPhone project, as  checked in for version 0.9, includes these files in such a way that they don't compile. Such a  project could be made by modifying the iPhone project, but I did this by creating a separate  project which generates Mac OS X binaries.) 2. Attempt a build, and resolve all other build errors - they can all be fixed by setting correct  header paths, installing cppunit, etc.    Expected: The "CountedTest.cpp" file compiles without errors or warnings Actual: The "CountedTest.cpp" file fails to compile as follows: 1. Lines with "foo.count_" cause errors due to improper use of a private member variable. 2. When these are replaced with "foo.count()", errors are emitted because there is no version of CPPUNIT_ASSERT_EQUAL() which allows comparison of signed and unsigned ints.   What version of the product are you using? On what operating system? Version 0.9 on Mac OS 10.5.3 running on an Intel Mac     I have attached a version of "CountedTest.cpp" that fixes these problems.                                    CountedTest.cpp    1.3 KB      &nbsp; View    &nbsp; Download                     ()                 Owner: christian.brunschen               The change had been made locally, but I had forgotten to submit it into Subversion.                   Status: Fixed              		bobertmu...@gmail.com	christia...@gmail.com	sro...@gmail.com
73	Defect	Fixed	sro...@gmail.com	koosva	1218552221000	1218584082000	1218584082000	Build problems when following instructions on zxingorg setup	 I followed the notes in the DeveloperNotes wiki on how to setup zxingorg, but when I tried to build it, I ran into some errors. I attached the output file. I guess I'm still missing some libraries? I have the following installed: jdk1.6.0_07 (and JAVA_HOME is set to C:\Program Files\Java\jdk1.6.0_07) Apache Tomcat 6.0.18 (tomcat-home=C:\Program Files\Apache Software Foundation\Tomcat 6.0)  core built without errors javase built without errors                                     zxingorg_build_err.txt    16.1 KB      &nbsp; View    &nbsp; Download                     Ah, did you do this part?  In the build.properties file at the top level of zxing, set tomcat-home to the location where Tomcat was installed.                   Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Yes, as mentioned above, I set the tomcat-home=C:\Program Files\Apache Software Foundation\Tomcat 6.0 in the build.properties file. Isn't it maybe that I need the JDK Enterprise Edition in order to build the servlet?        Sorry now I see what you mean. Tomcat has the J2EE classes. I think the issue is that backslashes are actually special characters here -- replace \ with \\ and I bet it will work. See the commented-out examples in the file.        Thank You, that was the problem all along. Maybe just note it together with the rest of the instructions.        Done, I improved the documentation.                 Status: Fixed              		koo...@gmail.com	sro...@gmail.com
76	Defect	Fixed	sro...@gmail.com	juhana.siren	1219609017000	1220897986000	1220897986000	No Class Def Found Error on Nokia 6233	 On starting BarcodeReader version 0.9 on Nokia 6233, the phone returns an Application Error: No  Class Def Found Error with the following text:  java/lang/NoClassDefFoundError javax/microedition/amms/control/camera/ZoomControl        I think we fixed this recently -- it's in SVN and will be in version 1.0. NoClassDefFoundERror was not caught correctly in some cases. If recent versions don't work reopen this.                 Status: FixedOwner: srowen              		juhana.s...@gmail.com	sro...@gmail.com
77	Defect	Fixed	sro...@gmail.com	allanhansen	1220828468000	1231790832000	1231790832000	JME client can't decode qrcodes (version 0.9 and 1.0)	   1. compile the source 2. install 3. scan qrcode    should decode the qr-code, but It only produces a white screen. After a while it returns to the video view-finder, but the code is not detected.  What version of the product are you using? On what operating system? Tested with version 0.9 and 1.0 from subversion. Used Sonyericsson K850 and w910 phones.     Earlier versions (0.5 and 0.6 I think) would very quickly decode the barcodes on those two phone models (Sonyericsson K850 and w910).       That is odd. So it runs successfully, but the screen whites out, it freezes, then simply does nothing? It works well on similar SE devices and you say it worked in the past. I am not sure... it sounds like a platform problem and we aren't really putting any effort into workarounds for J2ME phones.  I'll leave it open for a while in case you find more info or others can provide any insight.                 Status: AcceptedOwner: srowen               No it does not work on other devices that I have tested...   Version 0.5 and 0.6 worked fine and fast, but version 0.9 and 1.0 do not. So I don't think there is a need for device specific workarounds, rather there seems to have been introduced some kind of bug   Allan        I think the more likely conclusion is that a recent change causes the application to trip a bug in some phone's J2ME implementations. I say that since it sounds like problems a number of devices are having with references to JSR-234 classes. The app is written correctly from this perspective, and works on many phones.  Or, it could be a different issue. If you can provide more information maybe that would help determine whether it's the same or not. Is there an error, a message saying "No barcode found", or nothing? This may be hard to debug since we don't have a SE K850 around.  In general we are here to write a correct J2ME application, and I think we did that. If a phone doesn't run it, it is likely because the phone is buggy. If there's an easy workaround, OK we might stick that in, but won't actively try to find workarounds ourselves. J2ME implementations are just too varied and buggy to make this worthwhile, especially considering J2ME is on its way out as a primary mobile development platform. We are focused more on the iPhone, Android, maybe BlackBerry (which is J2ME, yes).  There are other good readers out there that either avoid or workaround issues it seems. See the InterestingLinks wiki for a ton of good readers that might work on the K850.        Hi srowen  OK, I tried building my own application using the QRCodeReader and the DatamatrixReader. Here is my findings: The QRCodeReader still works very fast and is pretty accurate in scanning the tags. The DataMatrixReader can't find the barcode in the image and is rather slow.  The current code uses the MultiformatReader (which at the moment only calls the QRCodeReader), but there seems to be a problem here...  Anyway, I really like the software and I don't think JME are going away anytime soon, so I don't hope you'll drop support for this platform :)  Best regards, Allan        The DataMatrixReader is terrible -- er, "alpha" quality. I can say that because I wrote it. I would not consider it usable yet. It is just my first attempt at getting something to work. That's why it is not called from MultiFormatReader.  Nah we won't drop support and will try to figure out workarounds, just saying we probably won't be able to buy phones and spend weeks understanding what's wrong with certain phones and how to fix it.        So basically this distills down to two items: Data Matrix doesn't decode well, which  is quite true at this point, and several phones don't like the new build with any  reference to JSR-234 classes. The first is, yeah, kinda a known issue. The second, I  am not sure what to do with, since it seems like a platform problem. Maybe we should  put up an alternate build again with the JSR-234 classes commented out. I wanted to  get away from that, and the main build *should* work even on non-JSR-234 phones, but,  seems better to have a solution rather than stick to some principle.        Would it be an option to add a tag in the source code indicating where to comment out JSR-234 code? I am having problems with Nokia 6300 (No Class Def Found javax/micoedition/amms/control/camera/ZoomControl), which I am presuming is JSR-234 related.         Done        I am bringing this issue back to its original point, since it really does seem to concern some change since 0.8 that has caused trouble on Sony Ericssons. It doesn't seem to be JSR-234-related. I am not so sure what change could have caused this but a few people have reported it so I think it's legit.  I am taking the liberty of reassigning since I don't have any SE to test on but I know Daniel and crew have access to a K800i. Daniel you can pass on to the other devs as you see fit to investigate. I'd provide pointers about what might be wrong... but really nothing functional changed so I am at a loss too. No doubt it is some other implementation quirk -- a small change has triggered an obscure problem.                 Owner: dswitkin               I just downloaded the reader from zxing.org/w for my SE K800i. For one thing, it claims to be version 0.9; for  another, it doesn't seem to work.   Specifically, the behaviour I'm getting is:  1) Start the app 2) Open the camera cover 3) Visible live image on screen; point at barcode, press a key (though the camera shutter key doesn't work for  this, strangely enough) 4) get the 'Allow application to take pictures with the camera?' screen 5) Press 'YES'  6) 'Allow application to take pictures with the camera?' screen remains 7) press 'YES' again 8) 'Allow Allow application to take pictures with the camera?' screen goes away, is replaced by an error  message saying "Error, Failed to take Snapshot" 9) after a brief pause, screen shows feed from camera again  Best wishes,  // Christian Brunschen          Yeah it seems whatever recent changes happened since 0.8 made many phones unhappy (though I totally claim the app is written correctly and the phones are at fault!). I think what I am going to do is a) update the published version to 1.1 and b) re-publish a version without any reference to JSR-234 again. That could begin to resolve the issues.        Thanks Sean.                 Owner: srowen               Try http://zxing.org/w/BarcodeReader.jad (proper version 1.1), and http://zxing.org/w/basic/BarcodeReader.jad (the "basic" version) ?  I do not know that it will resolve this, but is worth a try.        On SE K800i: the new 'proper' version 1.1 does not work; same symptoms as before: have to confirm twice  (rather than once) that the app is allowed to take pictures, and then get an error 'snapshot failed'. However, the 'basic' version does work: as expected, it only asks once for permission, then focuses, takes a  snapshot, and parses the result, presenting it (and allowing URLs to be opened, etc).        Correction: the Basic version, on a K800i, does work, but I don't think it focuses before taking the picture, as I  erroneously said above.           I have posted yet another version, and another user says this problem does not occur on his K800i (has a  different issue). I am tentatively marking as fixed, therefore, especially considering if it's not I have no idea what  to do.                 Status: Fixed              		allanhan...@gmail.com	christia...@gmail.com	dswit...@gmail.com	kevin...@googlemail.com	sro...@gmail.com
79	Defect	Fixed	sro...@gmail.com	rob...@mailueberfall.de	1221759466000	1221941855000	1221941855000	RIM part does not create ALX file	 When building zxing-1.0 for BlackBerry platform (rim subdir) the build  process creates the COD file but not a corresponding ALX file. The ALX  file is necessary for normal users to install the application onto the  Blackberry using BlackBerry Application Manager.     AFAIK this is only generated by the Blackberry IDE? we are kinda a Mac-only group so  can't use their IDE.  Right now I'm focused on getting an OTA download working. Any chance a kind soul like  yourself can post an .alx file for the current build? we can include it.        Alx files don't have to be generated, they can be written by hand easily: They are  similar to a .jad file - it is an xml file describing an application an linking to  it's COD file(s):  <loader version="1.0">    <application id="HelloWord">    <name>HelloWord</name>    <version>0.0.1</version>    <vendor>SkipperJoe, Inc.</vendor>    <vendor>Skipper Joe</vendor>    <fileset Java="1.18">        <files>  HelloWord.cod </files>    </fileset>    </application> </loader>        So does something like this work for you?   <loader version="1.0">   <application id="BarcodeReader">    <name>BarcodeReader</name>    <version>1.0</version>    <vendor>ZXing project</vendor>    <fileset Java="1.2">     <files>BarcodeReader.cod</files>    </fileset>   </application>  </loader>   I am obtaining signing keys and a Windows machine so we can finally  deal with BB apps properly. But if the above happens to work, sure I  can post it and include it right away.         The posted ALX file works here with the Blackberry Desktop Manager        I made some changes to generate a simple .alx file with the build.                 Status: FixedOwner: srowen              		rob...@mailueberfall.de	sro...@gmail.com
80	Defect	Fixed	sro...@gmail.com	tomas.krivanek	1221848355000	1221941728000	1222204613000	Code128: eats last character for code with bigger checksum	    1. Read Code128-A or Code128-B with checksum in range from 97 to 102 or Code 128-C with checksum in range from 100 to 102     Last character (A,B) or last two characters (B) are missing.  What version of the product are you using? On what operating system?  ZXing 1.0 on linux. core + javase.     For example, if checksum of Code128 happens to be in range 96 - 102 (or 100-102 for C),  the value of checksum is not appended to the result StringBuffer:          case CODE_CODE_C:           if (code < 100) {             if (code < 10) {               result.append('0');             }             result.append(code);  However, later the last two chars are removed anyway:        if (codeSet == CODE_CODE_C) {         result.delete(resultLength - 2, resultLength);       } else {  which in this case removes regular part of the code.  I am using this quick&amp;dirty fix for now:  --- Code128Reader.java.orig	2008-09-18 18:55:10.000000000 +0200 +++ Code128Reader.java	2008-09-19 01:38:16.000000000 +0200 @@ -254,6 +254,8 @@        boolean done = false;      boolean isNextShifted = false; +    boolean bigChecksumCandidate = false; +    boolean bigChecksum = false;        StringBuffer result = new StringBuffer();      int lastStart = startPatternInfo[0]; @@ -272,9 +274,14 @@          lastCode = code;        code = decodeCode(row, counters, nextStart); + +      if(code == CODE_STOP &amp;&amp; bigChecksumCandidate) { +        bigChecksum = true; +      }        if (code != CODE_STOP) {          multiplier++;          checksumTotal += multiplier * code; +	bigChecksumCandidate = false;        }          lastStart = nextStart; @@ -298,6 +305,7 @@            } else if (code < 96) {              result.append((char) (code - 64));            } else { +	    bigChecksumCandidate = true;              switch (code) {                case CODE_FNC_1:                case CODE_FNC_2: @@ -325,6 +333,7 @@            if (code < 96) {              result.append((char) (' ' + code));            } else { +	    bigChecksumCandidate = true;              switch (code) {                case CODE_FNC_1:                case CODE_FNC_2: @@ -355,6 +364,7 @@              }              result.append(code);            } else { +	    bigChecksumCandidate = true;              switch (code) {                case CODE_FNC_1:                  // do nothing? @@ -397,7 +407,7 @@        // Need to pull out the check digits from string      int resultLength = result.length(); -    if (resultLength > 0) { +    if (resultLength > 0 &amp;&amp; !bigChecksum) {        if (codeSet == CODE_CODE_C) {          result.delete(resultLength - 2, resultLength);        } else {       Interesting, I'll re-read the spec and look into this.                 Status: AcceptedOwner: srowen               Yep, clear bug. The fix is as you say to simply not remove the check digit if there  was no check digit appended to begin with, because it was a code that does not result  in a printable character. I was thinking, simply look at whether the last code was >=  96 for A/B or 100 for C, and if so, don't pull the check digit. Same thing, just  without a flag. Will fix shortly.        That was quick! Thank you.  I was scared by fact, that checksum actually can be "charset" switching code, too. I am not sure what will happen in case of checksum 99 (code for switching to charset C) for A or B code. Character will not be appended to result, charset will be switched to C, so later, the last two characters will be removed (lastCode<100 &amp;&amp; codeSet==CODE_CODE_C)?        Yes, you're right, so I ended up committing a change more like you suggested. See if  the latest code works for you.                 Status: Fixed               I am sorry to say that current svn version does not work for me. I think the problem is in the last iteration of while(!done) loop, which should always be for non printable "CODE_STOP". So, the lastCharacterWasPrintable will always be set to false at the end.         Ah right, good point. I tried again. If I still got it wrong could you post your example code so I can make a proper test case?        Sorry, i did not attach them to my PR. Here they go. I think you just forget to not set lastCharacterWasPrintable to true for CODE_STOP (according to your comment). If there will be condition to not set it for CODE_STOP, it should be OK.                                    csum100.png    4.8 KB      &nbsp; View    &nbsp; Download                                                                csum102.png    6.0 KB      &nbsp; View    &nbsp; Download                                             OK think I finally fixed it -- I added these as tests as I should have done to start and verified it works now.       		sro...@gmail.com	tomas.kr...@gmail.com
82	Defect	Fixed	sro...@gmail.com	vesterager	1222309912000	1285171193000	1285171193000	Improving on the image-analysis algorithm	 During the Android Developer Contest, I tested several barcode scanning  components, and the one I found to be the best was Aspose's component. But back in the real world with Java ME and limited CPU &amp; memory  resources, it was way too CPU-intensive. Besides that it was much slower than ZXing, it also wasn't as good at  finding 1D-barcodes (UPC-A, UPC-E, EAN-13, &amp; EAN-8).  What I'm trying to say is - good job on ZXing :)  But ... my greatest wish would be that ZXing could recognize these 1D- barcodes from images taken with non-AMMS phones. It works every time with  a 480x640 pixel snapshot taken with my K800i, but snapshots in the same  resolution from Nokia 3110 Classic, Nokia 5200 &amp; Nokia 6500 Classic simply  won't work. And believe me I've tried and tried many times - optimizing lighting,  making sure everything is fixed so there's no blurryness in the photo.  I realize there's always a tradeoff - now ZXing is superfast recognizing  1D-barcodes, and I wouldn't want it to take 10 seconds to do a thorough  analysis of an image. Then it's faster for the user to input the 6-13  digits themselves.  Where do you stand on this?     Could you attach the images?  Blur is, yeah, a big problem. When the image blurs to the point that lines merge  into one another, it seems that the only solution is significantly more  sophisticated algorithms. See the discussion here about Delicious Monster.  One take on this that this is a problem that is much better and more reliably fixed  by better optics (see the video on the Google Groups list where Daniel shows off how  fast/reliable it is with the G1 optics). And, also, other people have made some nice  readers that can better handle blur. So one kind of lazy take on this is, it's a  problem that's sort of been fixed for everyone by others, and that should go away,  and is hard to tackle, so... punt.  But, I have a feeling that now that other dust has settled, this will in fact be a  next area to tackle. Clearly, the 1D barcode scanner stuff was a big ol' hit on  Android, judging by the winners of the dev challenge. Seems like this may call on  this project -- or maybe those lovely app teams that just got some seed money? :) --  to step up and improve 1D scanning technology here too.        Here's a set of screenshots from back when I did the image-analysis serverside using  the Aspose Barcode component, which can scan in all directions.                                                                                                                                                                                         Here are a couple of pretty clear images that I just took - they are not recognized with the javase version of zxing.  ..darcy                                          Thanks for posting these, we'll add them to the unit tests. My guess is that the start marker (the two thin lines  on the left) are too indistinct and so we give up without trying to read the rest.  Daniel        As an ADC loser, nothing gives me greater pleasure than announcing that my program  now runs on standard mobile phones.  The program should work on - dare I say all? ??java enabled mobile phones. It works  fine on among others the old Motorola RAZR V3i and Nokia 5200.  In order for the program to be able to scan barcodes, the camera has to be of high  quality (e.g. SonyEricsson¡¯s Cybershot product line). It works on the K800i ??the  (almost) oldest Cybershot model.  You can see if your mobile camera is of high quality by the presence of the 'Focus  >' option on the camera-scanning-screen. (the program detects which hardware is  supported by the phone's JVM).  It¡¯s funny that some people are stating there¡¯ll be a lot of possibilities on next- generation smartphones. Barcode scanning works perfectly on the Sony Ericsson K800i,  which was released in July 2006 (not on it¡¯s predecessor, the K750i from 2005, since  it doesn¡¯t have access to focus control from the Java VM, but that could be solved  with a firmware upgrade if Sony Ericsson weren¡¯t too busy making new phones): The  hardware platform has been around for 2 years ??what¡¯s missing is ¡®only??the smart  software :)  Some technical specs: CLDC: 1.1 MIDP: 2.0  GUI optimized for:     + 128x160 (Nokia 3110 Classic, Nokia 5200)     + 176x220 (SonyEricsson K600i, SonyEricsson W810i, Motorola RAZR V3i)     + 240x256 (SonyEricsson P990i w. flip closed)     + 240x320 (Nokia 6300, Nokia 6500 Classic, SonyEricsson K800i, SonyEricsson  K850i, SonyEricsson P990i)  I hope you¡¯ll try it and give me a little feedback :)  http://konzoomer.com/konzoomer.jad http://konzoomer.com/konzoomer.jar  Torben (Steel/Brainstorm)        These images are now in the unit tests, and we'll work on improving recognition for them for future releases.                 Status: Done               A little demonstration video on youtube: http://www.youtube.com/watch?v=c96OUNo3VFo         Btw. I never understood why you split the midlet into a basic (MMAPI only) and an  advanced (AMMS) version. You just detect before loading AMMS-classes:     public static boolean isAMMSAvailable() {         try {             // This test is not good enough on Nokia 6500             Class.forName("javax.microedition.amms.control.camera.CameraControl");             Class.forName("javax.microedition.amms.control.camera.FlashControl");             Class.forName("javax.microedition.amms.control.camera.FocusControl");              return ("" + System.getProperty("supports.mediacapabilities")).indexOf ("camera") != -1;    // This IS         } catch (ClassNotFoundException e) {             return false;         }     }         Oh, what a sensible approach! yeah someone suggested this a while ago and I changed the code to work like this. It looks like several Nokia phones at least reject the application now since it has references to JSR-234 classes that they don't have (not in this snippet of code, but then in the rest of the code that gets called as a result of this detection). I still hesitate to step backwards here but unfortunately it doesn't work on some phones.        It's just for when/if you try that de-blurring technique to get ZXing working on non- AMMS cameras.  I use this detection code in my program, and as a result it runs on all my test  phones: Sony Ericsson C702, K800i, K850i, P990i, W810i Nokia 3110 Classic, 5200, 6500 Classic Motorola RAZR V3i  Of course the P990i &amp; RAZR V3i doesn't have access to their camera from Java, so  only manual barcode entering is possible here.  The Nokia handsets and the W810i only have non-AMMS camera access, so recognition  never succeeds (again this is detectable and my program goes to manual input of  barcode(s) by default.)  /Torben        ()                 Status: Fixed              		ds.b...@gmail.com	dswit...@gmail.com	sro...@gmail.com	vestera...@gmail.com
83	Defect	Fixed	sro...@gmail.com	matth.maq	1222723544000	1222806940000	1222806940000	problems reading code128 barcodes 	 Hi,  I am testing the core zxing to decode code128 bar codes. If it gives good performances, it could be integrated in a bigger application.  The barcodes tested are extracted from an jpeg black&amp;white scanned image (not taken with a phone camera).    The problem is that on my series of tests, some barcodes are not read or some information is missing. I attached 3 files: -the first one is perfectly read  -the last character is missing on the second one -the third one is not recognized at all. As you can see, they are really close so I can't understand why one is read and the another isn't. I am currently using zxing0.7. I tried with zxing1.0 and nothing changed.  Do you know what's wrong with my bar codes?  Thanks.                                  code128_recognized.jpeg    9.1 KB      &nbsp; View    &nbsp; Download                                                              code128_missingInfo.jpeg    8.9 KB      &nbsp; View    &nbsp; Download                                                              code128_unread.jpeg    11.1 KB      &nbsp; View    &nbsp; Download                                         This could be the same bug with Code 128 that I juuuust fixed a few days ago. The  fix would be in SVN but not in the most recent distribution. If you can build from  source maybe you can get the fix that way.  I will in any event debug later and see if it is the same problem, or something else.                 Status: AcceptedOwner: srowen               The one that is missing characters has been fixed in SVN.  The unrecognized one is interesting. It fails the checksum. The final '1' is read as a '.'. That is, the code starting at x=474 in the image should be 17, which is bars in these proportions:        {1, 2, 3, 2, 2, 1}  but is being read as 14:        {1, 2, 2, 2, 3, 1}  The black/white pattern read is {2, 3, 4, 3, 4, 1}. This matches both equally well -- inspect it for a minute. The algorithm just picks 14 and that ends up being wrong, so the code fails the checksum.  So it's not quite a bug... the image is too low resolution and as read, that sequence of pixels could equally well be two different characters. Try a slightly higher resolution capture?                 Status: Fixed              		matth....@gmail.com	sro...@gmail.com
84	Defect	Fixed	dswit...@gmail.com	sro...@gmail.com	1222724993000	1223860228000	1223860228000	Incompatible with 1.0 SDK?	 Just saw this posted on the wiki:  Does not work with the last android sdk android-sdk-windows-1.0_r1 since  packages are different from android-sdk-windows-0.9_beta  Haven't had a chance to check myself, just recording it for investigation.     I got this problem too, trying to compile from the svn checkout. With sdk 0.9 it worked (after I removed all references to WTK in build.xml files). But this time I get:     [javac] /home/aj/zxing/android/src/com/android/barcodes/QRCodeEncoder.java:23:  cannot find symbol     [javac] symbol  : class AndroidHttpClient     [javac] location: package android.net.http     [javac] import android.net.http.AndroidHttpClient;  android.jar is in the right place and referenced by -bootclasspath so it should  work. any idea how to fix this?  Thanks, Andreas          Crap, they must have removed AndroidHttpClient from 1.0 for some reason. I'll look into it.                 Status: Accepted               Is there an update to this status, I too am getting the same error with the latest version.          I don't have anything new to report. Ideally AndroidHttpClient would be put back in the SDK. If you need to build  today, you can change it locally to DefaultHttpClient, although the behavior will be somewhat different in terms  of timeouts, cookies, etc.        I got permission to copy AndroidHttpClient into our package, so with that change the Android client builds again  using the 1.0 SDK.                 Status: Fixed              		a...@dungeon.inka.de	dswit...@gmail.com	sro...@gmail.com	yhare...@gmail.com
86	Defect	Fixed	sro...@gmail.com	whoister...@hotmail.com	1223049034000	1223077819000	1223261281000	NoSuchMethodError:  No such method getHeight.()I.	   1. turned off proguard obfuscate option 2. trace with Nokia S40 SDK (same error on a Nokia 6300) 3. capture image     Expect decoded output, but see Error: NoSuchMethodError:  No such method getHeight.()I.  What version of the product are you using? On what operating system? zXing1.0, on Nokia 6300 S40 platform (MIDP2.0 capatible)     Got the following trace:  com/google/zxing/client/j2me/SnapshotThread.run com/google/zxing/MultiFormatReader.decode com/google/zxing/MultiFormatReader.decodeInternal com/google/zxing/oned/AbstractOneDReader.decode com/google/zxing/oned/AbstractOneDReader.doDecode com/google/zxing/common/BaseMonochromeBitmapSource.estimateBlackPoint ALERT: java/lang/NoSuchMethodError: No such method getWidth.()I  Might be related to  Issue 39 : Can you tell me what you fixed in the class declaration?     Exactly, sounds like the same thing. BaseMonochromeBitmapSource is an abstract class which implements an interface defining methods like getHeight() and getWidth(). The abstract class doesn't have to define an implementation for all the interface methods, and it doesn't define these. This is fine, Java says it can still reference the methods since it implements the interface that defines them (well, subclasses will be forced to define them). But the Nokia JVMs don't seem to accept that, which I believe is best viewed as a bug. The workaround is so easy that sure, we can just add...  public abstract int getHeight(); public abstract int getWidth();  I think I fixed it in SVN?                 Status: FixedOwner: srowen               This goes for below also, which I added to BaseMonochromeBitmapSource.java :    public abstract void cacheRowForLuminance(int y);   public abstract int getLuminance(int x, int y);  Now i get a No barcode found error?        Turns out the image is too blurry, I tried it with javase, and it couldn't read it either.  The Nokia 6300 is 2Mega Pixel.  I tried with another 4Mega Pixel digital camera, still couldn't read it.  Image from scanner works, checking to see what threshold resolution is needed.                                                         I will add those other two methods.  The issue is almost certainly not resolution, but focus. A clear 640x480 image should  decode fine. Blur is a problem.        You're right.  Focus is the problem, since mobile phone cameras have fixed focal length, this means there is an optimal distance for taking the barcode and correct me if I am wrong, but this means there is a limit on how small the barcodes can be.    I think in my case, the barcode is too small for my mobile camera.       		sro...@gmail.com	whoister...@hotmail.com
93	Defect	Fixed	christia...@gmail.com	devileper	1224767255000	1224788203000	1224788203000	valarry referenced before initialization	 When porting the code to windows smart devices I found numerous cases where a valarray is referenced before initialization.  This oversight results in constant decode failure.  As the initial implementation was done in Java this wouldn't be an issue but on the windows devices the arrays are rarely auto-initialized to zero.  Improperly initialized valarrays: BitArray::_bits BitMatrix::_bits GF256::exp_ GF256::log_  FinderPatternFinder::crossCheckVertical:stateCount FinderPatternFinder::crossCheckHorizontal:stateCount      Looking into this. Good catch, thanks!                 Status: AcceptedOwner: christian.brunschen               A minor point: the GF256 class's exp_ and log_ valarrays were explicitly initialized one entry at a time in the  GF256 constructor. Either way, I've added arguments to the valarray constructor calls to specify the contents of the valarrays  explicitly. Could you verify whether this fixes the problem? Best wishes, // Christian Brunschen                   Status: Fixed              		christia...@gmail.com	devile...@gmail.com
97	Defect	Fixed	sro...@gmail.com	lisurc	1225325997000	1225425025000	1225425025000	BitSource.readBits IndexOutOfRange exception	 Hello,  I noticed that scanning some QRCodes trigger an IndexOutOfRange exception in the com.google.zxing.common.BitSource.readBits method. From step-debugging it, it seems to occur at the following line (near the end of the method):  result = (result << numBits) | ((bytes[byteOffset] &amp; mask) >> bitsToNotRead);  This does not occur on all QRCodes but I found at least one which is never working (but can be read by other software readers). I attached a picture of it to this ticket. With this file, the exception is thrown when byteOffset reaches 13 while bytes.length == 13 too.  Note: I'm using the latest 1.1 Java code.                                 indexoutofrange_qr.png    286 bytes      &nbsp; View    &nbsp; Download                                         Sounds like a good bug report, I'll get on it.                 Status: AcceptedOwner: srowen               Yeah, I think a pretty clear bug. We need to allow for up to 3 additional, superfluous bits at the end of the stream. It's addressed now in SVN.                 Status: Fixed              		lis...@gmail.com	sro...@gmail.com
98	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1225422293000	1225564336000	1225564336000	Shift-JIS QR Code not read correctly	 Have a look at the attached image. It does not render Kanji correctly on Android. My suspicion is  that the Shift-JIS decoding/detection is not working properly.                                   KanjiQR.PNG    10.0 KB      &nbsp; View    &nbsp; Download                                         Looks like we have to be more lenient in detecting Shift_JIS. The source I based the original code on suggested that only certain bytes can follow certain other first bytes in a double-byte sequence, but it doesn't seem correct after more investigation, since this message here and others correctly decode as Shift_JIS in Java at least. I just adjusted the rule accordingly.                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
102	Defect	Fixed	sro...@gmail.com	sanfords...@gmail.com	1225878991000	1226436745000	1226440081000	Bug in Reed Solomon error correction logic	    This JUnit test fails:     /**      * Check Reed Solomon error correction for DM      * <p>      * We show that code words with ECC are fine.  Since there are 3 ECC  bytes,      * a single error should always be correctable.  We introduce a simple      * error into the second byte of the array... currently causes an out  of      * bounds index exception in the Reed Solomon error correction  routines.      * the 'errorLocations[]' has two values {120,68}... which does not  make sense.      */     @Test     public void testCase1() throws ReedSolomonException {         byte[] codewordsWith3ECCbytes = {-26, 45, -117, -117, 122, 24,  108, -104, -72, 29, -24, 3};          int[] codewords = new int[codewordsWith3ECCbytes.length];         for(int i=0; i<codewordsWith3ECCbytes.length; i++) {             codewords[i] = codewordsWith3ECCbytes[i] &amp; 255;         }         int[] copyOfCodewords = Arrays.copyOf(codewords, codewords.length);           ReedSolomonDecoder instance = new ReedSolomonDecoder (GF256.DATA_MATRIX_FIELD);          // no errors, so this should work fine... proves that the ECC  bytes are correct for Data Matrix.         instance.decode(codewords, 3);         assertTrue(Arrays.equals(copyOfCodewords, codewords));          // add a single error in second byte 45 -> 88         codewords[1] = 88;         instance.decode(codewords, 3);  // this throws an out of bounds  exception (errorLocations== {120,68} ???)         assertTrue(Arrays.equals(copyOfCodewords, codewords));     }     Test should pass.  What version of the product are you using? On what operating system? Using JUnit test support under NetBeans.          ()                 Status: AcceptedOwner: srowen               It turns out the bug is due to the syndrome calculation.  For Data Matrix codes, the  check character generation polynomial starts with the Galois Field generator (=2),  not the identity (=1).  See Annexe L section L.1 of the Data Matrix standard.   A slightly better test (uses a code from Annexe R in the Data Matrix Standard that  has the ecc bytes explicitly given.):       /**      * Check Reed Solomon error correction for DM - this code is given      * in the DM standard in Annexe R.      */     @Test     public void testCase2() throws ReedSolomonException {         int[] codeword = {142,164,186,114,25,5,88,102};          int[] copyOfCodeword = Arrays.copyOf(codeword, codeword.length);          ReedSolomonDecoder instance = new ReedSolomonDecoder (GF256.DATA_MATRIX_FIELD);          instance.decode(codeword, 5);         assertTrue(Arrays.equals(copyOfCodeword, codeword));          // add a single error in second byte 164 -> 88         codeword[1] = 88;         instance.decode(codeword, 5);         assertTrue(Arrays.equals(copyOfCodeword, codeword));     }          Sounds like a great catch. Sounds like QR Code is different from Datamatrix in how Reed-Solomon proceeds.  I see the difference you note in the specifications. I adjusted the syndrome calculation to work differently for QR Code and Datamatrix.  I re-read the specs and it looked on the surface like the error locator poly is different, but, in practice I don't think there is a difference in how QR Code vs. Datamatrix works because the errors are located correctly.  Something more is different about error magnitude as a result. I tried your change but it didn't seem to work in cases of more than one error.  The difference must not be large because the QR Code computation actually worked -- nearly, actually the syndrome was off but in a way that only slightly reduced the error correction power of the computation, but that still worked otherwise. So I am now looking for how the magnitude poly computation has to change as a result too.   (Do we have the same spec? I have ISO 16022:2006. I see what you refer to in Annex O for instance).        In addition to the error in calculation of the syndrome (due to wrong generator  polynomial) noted above, there appears to be an error in the findErrorMagnitude()  logic.  I think lines 171-172 in findErrorMagnitude() of ReedSolomonDecoder.java  should include an additional step multiplying by xiInverse :   result[i] = field.multiply(    field.multiply(errorEvaluator.evaluateAt(xiInverse),field.inverse(denominator))              ,xiInverse);          We probably have a different version of the spec.  I got mine back around 1999 as  part of a project.  Don't know where he got it from... but it's dated May 8 1997  (ANSI/AIM bc11-1997)        OK I have the 2006 version I guess. Does yours even cover ECC200? no matter, I think they are the same as far as we are concerned here.  Well, I put in a change to correctly compute the syndrome, and then a counter-balancing change to the syndrome later that makes it still work as it used to -- that is, mostly works, but can't correct all the errors that it should.  I am still kind of stumped. The version of RS I implemented is from two papers I found plus C++ code I cribbed/ported from Google (with permission :) ). This version matches QR Code entirely. I am only able to understand part of how Datamatrix's variation works; there is plainly still some issue.        Can you create a Junit test that fails for "...but can't correct all the errors that  it should.", and check it in?           It looks like you're referring to the existing JUnit tests (testMaxErrors()) for the  RS decoder.  I've got the fix (and some fixes for the tests, too).  How do I get  authorization to check this stuff back in with SVN?        If I write the right test, it fails. Which is sort of a good thing, on the other hand it means the entire build fails. I was thinking of this as a known issue at the moment.  I copied the current RS test case into a new one for Datamatrix, yes. The test has to be a bit different.  You can post a patch here. If you think you might want to continue working on this regularly we can make you a project member / committer and then you have SVN submit access.        Here are corrected ReedSolomonDecoder and JUnit tests.  Note that the tests were not  ensuring that all corrupted bytes were different from the original.  We should develop more extensive tests, that don't rely on testing just one known  codeword.                                   ReedSolomonDecoder.java    7.4 KB      &nbsp; View    &nbsp; Download                                            ReedSolomonDecoderDataMatrixTestCase.java    3.5 KB      &nbsp; View    &nbsp; Download                                            ReedSolomonDecoderQRCodeTestCase.java    3.8 KB      &nbsp; View    &nbsp; Download                         Suggestion on "...the entire build fails..." problem...  In prior work, we've used  JUnit 4 which allows '@Ignore' tags on tests, or simply commented out the failing  assertions with '//FIXME:' or 'TODO:' tags as reminders that these are open problems  that need to be solved.  But having the tests available to project contributors  would help accelerate a resolution to problems, and avoid the tendency to slip- stream in fixes without corresponding tests to prevent relapse.        Thanks, I am digesting this now. I don't know what the tweak in Forney's formula does, but if it makes it work for Datamatrix that is great! That change alone makes the unit tests as they are fail though... I am still looking at how your tests differ to see what's up.  I take your point about ensuring the byte is actually different though it wouldn't explain the failure. Good point on the test, I have left at least a TODO in the code.        The fix to the Forney formula is justified by re-deriving it, given the generator  polynomial (starting with a factor of (x-alpha), rather than (x-1)).  The starting  term to the location exponent always factors out within the Omega polynomial as a  multiplicative coefficient of the product we calculate the Forney calculation loop  in the code.  For QR, the factor is 1, but the adjustment is required for DM.  For  the most general case of Reed Solomon encoding/decoding, you can use any series of  consecutive exponent factors of the primitive generator for the multiplicative  group, so, in theory, we could generalize this decoder to allow any starting  exponent of alpha, but I don't know of any barcode that requires it.          The unit tests do pass actually, just mis-applied the patch. This is great. I don't think I would have been able to figure this out myself. I have added you as an author on this part of the code since that is a significant contribution. I adapted the changes you sent in. The bit about ensuring the new byte is different is nice. I also like comparing against the field value rather than a new boolean param. I will submit the net change shortly.                 Status: Fixed               I noticed that in applying the patches for the JUnit tests (both DM &amp; QR), you did  not apply the change of the second parameter in calls to decode.  I think the value  for the calls should be 'DM_CODE_NUMBER_OF_ECC_BYTES', not '2*DM_CODE_CORRECTABLE'.   The decoder should be given the full number of error correction bytes, even if that  number is odd.  The tests will still pass.        Done, I see your point there now.       		sanfords...@gmail.com	sro...@gmail.com
108	Defect	Fixed	sro...@gmail.com	sanfords...@gmail.com	1226535590000	1226699500000	1226886465000	core decoder for Data Matrix should return byte[], not Unicode string.	   1. Look at DecodeBitStreamParser.java source code - Line 76, et. seq. 2. 3.    Data Matrix standard defines DM code as a simple binary/ASCII byte  carrier, not a Unicode content carrier.  The current zxing Java source  code however, accumulates the decoded stream of bytes into a Unicode  StringBuffer, possibly introducing unwarranted character translations  depending on JVM internals, thus potentially corrupting binary byte  content.   The data type would be better kept as a simple byte[], rather  than a StringBuffer.    Interpretation of a binary byte[] as a Java Unicode string can be done at  a later point by the application's processing, rather than here in the  core decoder processing.  The conversion is simply a call like 'new String (byteArray)', with several optional additional parameters allow  application conrol of how the translation is done.  Note that allowing the  application to do the translation allows easy extraction of specific  subsets of bytes for translation to Unicode, while keeping other bytes as  binary entities or other translation (e.g. - as Integer, Short, or Hex  format)  What version of the product are you using? On what operating system? Current source code.    Change requires very little effort in zxing, and will save effort and  possible insidious bugs for calling applications.      The payload of QR Codes and Datamatrix codes are bytes, yes. The interpretation of these bytes is almost always as text. The QR Code spec implies that even in 'byte' mode, the content should be interpreted as an ISO88591 string. This is of course by far the primary use case, to encode strings. So, I would have to strongly disagree that it is not intended to carry text (not necessarily UCS-2 Unicode, no, but a string, yes), since that is in fact precisely what they were designed for.  But more importantly it is not really possible to defer the interpretation of the bytes either. They have no meaning per se; interpretation depends on the format that was used. For instance a QR Code that only has a byte payload still contains a short "byte mode" header. It does not seem reasonable to couple other parts of the client downstream to knowledge about how to interpret this byte stream.  But all that said I 100% agree, no reason not to give access to the raw bytes. The Result object already does this, see the 'raw bytes' property. Already done!                 Status: WontFixOwner: srowen               The 'raw bytes' returned by DecoderResult.getRawBytes() are bytes prior to applying  decompression. Decompression is done by DecodeBitStreamParser.decode().  So that  isn't it ... but adding a simple new public method 'getBytes()' would suffice for  now.  All the new method needs to do is  'return text.getBytes()'  ... and you may want to fix the bug on line 426 of DecodeBitStreamParser.java that  currently produces incorrect decodes for all binary compression occurrences.  The  line should pass the loop index 'i' instead of the byte count in the call to  unrandomize255State().          Clarification: the new method 'getBytes()' would be in DecoderResult.        Yes you are right, but that is the only meaningful 'raw bytes' available from the barcode.  I do think there is a good point in here... say you really want to encode binary data in a QR Code. You would use one segment, in byte mode, which is a bit of a hack despite its name since it is really "text encoded as ISO88591, sort of" mode. Not all bytes are even legal in this mode. So from that perspective the spec doesn't have any real support for binary data.  But, assume the encoder/decoder overlook that last technicality. Seems like it would be nice to be able to get, directly, the actual bytes used in byte segments only. I agree.  I need to go back and read the Datamatrix spec to review how Datamatrix behaves in this regard. I can see a potential argument for a variation on what you are proposing.  If the QR Code really was just one byte segment, then calling getBytes("ISO88591") on the resulting String should give you those bytes back ("should" because this technically shouldn't work out, but probably does in practice). But otherwise, the result of getBytes() isn't meaningful -- was not necessarily anything to do with the bytes in the QR Code. Hence I don't think the result of getBytes() should be exposed in the Result object.  I'll also take a look at the bug you mention, I am guessing you are right though I have never looked at this part of the algorithm. Thanks for that.        I fixed the bug, good catch.  I also added a new ResultMetadataType called BYTE_SEGMENTS. You can look for this in the Result metadata --  if there were byte-mode segments in a QR Code or Datamatrix code, it will contain their raw bytes. This is a  step better than looking at the raw bytes, which are already available, since these are just the bytes from the byte  segments.                 Status: Fixed               Huh!?  It seems like you expect that the method used to compress a message to be put  into a QR or DM code carries semantic significance when the barcode is decoded...  I've not seen that before... and I'm curious if that's something that Zxing has  decided to implement or if I've missed something recent in barcode standards, or ...?  Simple hypothetical example of the issue:  Suppose my application wants to simply embed a common 32-bit binary integer into a  barcode, and my application decides that it will pass for bytes (say, little-endian)  to an encoder to create the DataMatrix code (or QR).  If my application encodes the integer 0x0001, it's likely the encoder will simply  use text encoding rather than binary encoding, (since 0x00 and 0x01 are valid as  normal ASCII characters in Data Matrix), since text encoding gives a shorter binary  message length than encoding the bytes in Data Matrix's binary format.  In other words, the encoder is under no obligation to maintain any semantics of what  my application meant by the four byte message.  The encoder doesn't know whether my  application thinks of those four byts as a binary integer in little-endian, an ASCII  message, or even, say two 16-bit integers in big endian format.  The semantics of  the message are known only to the application, and are not carried in the barcode.   The method used by the barcode encoder to compress the message is not normally  something that should be visible outside the decoder, (except possibly to testing  software).  Or am I missing something here?         Here's an example that may illustrate my thinking. Let's say you want to encode UTF-8 text in a QR Code. I've  seen people do it, and it's not clearly within or outside the spec. You encode the text as bytes in UTF-8, then  put them into a 'byte mode' segment for the QR Code. The resulting stream of bytes is  [byte mode header] [      UTF-8-encoded text ...   ] [terminator header]  Right now, the Result from decoding would return from getText() the String representing the text that was  encoded. It would return from getRawBytes() the entire byte stream above.  I had interpreted your suggestion to mean, please return the result of getText().getBytes(encoding) in the API  -- to retrieve the original bytes in the byte segment above. This begins to uncover all kinds of problems.  Which encoding? If the intent is to support applications that actually just stuck in binary data, then we'd have  to assume they used ISO88591 (or another character set with a 1-1 mapping between characters and bytes  for values 0-255... so this is even ambiguous, and not even 100% true for ISO88591). If I decode the text as  ISO88591, I do not get the original bytes. It doesn't necessarily work at all since the String is Unicode. The list  of problems goes on from there.  The raw bytes above do contain the bytes of the byte segment that you are interested in. So that's why I said  "it already exists". But then you would have to re-parse the stream above to pick out the byte segments. That  seems less than ideal  The same thing generally goes for Datamatrix though there the Base-256 encodation seems legitimately  appropriate for binary data, though it does still suggest this is to be interpreted as text encoded as ISO88591.  I am not suggesting the entire byte stream above has any sensible interpretation other than data encoded  according to the QR Code or Datamatrix spec, no.  I am acknowledging the use case you describe, where you might want to get the raw bytes from just the byte  segment above -- that is, without the headers. That is what I have implemented.   In your example, to be semantically correct, you need to use byte mode in QR Code or Base-256 in  Datamatrix. You / the encoder need to encode what you mean. If you do not intend this to be interpreted as  text, and the encoder interprets it as text, and encodes as ASCII, it is no surprise that you get the wrong thing  out: the decoder (correctly) interprets the encoded data as text.  If you have an encoder that is forcing you to treat all input as text, then I suppose this illustrates my over- arching point, that both these formats "really" operate on text, period. They have ambiguous, half-baked  provision for carrying true binary data. Even using byte mode / Base-256, the specs imply that the decoder  should impute an interpretation as text. But hopefully you are in a position to use the encoder to encode  exactly what you intend.  (What the text, or bytes, mean is indeed up to the application. But the question of text vs. bytes is relevant to  encoding/decoding.)        The Zxing application wants text input and ouput for QR and DM codes, because the  structure of messages and their interpretations that are supported in the  application are all based on text format.  This is fine, and the design will clearly  fulfill the primary mission of ZXing to support e-commerce and Web access using this  text based strategy.  It seems plausible that Zxing goals also include:  1.  Zxing application support for use in all countries with any language.  2.  Provide decoder support for any application, not just the Zxing application -  that is, the decoder should support decoding of any valid QR or DM code, not just  codes that carry payload that the Zxing application will recognize.  By providing a simple means to recover the bytes that were put into the code, the  decoder now supports #2, and folks like courrier services that want to put mixed  binary and text information into codes or folks that want encrypted code content are  satisfied and will hop on the Zxing bandwagon (at least the decoder part, and help  in the push towards the goal of e-commerce and internet access from cell phones).  For #1, however, there's still a thorny problem (as we all recognize, but from  different viewpoints.)  The key is that #1 is only about the Zxing application and  its ability to enable e-commerce and Web access globally.  Strawman solution of #1 - for discussion:  Suppose the Zxing application were to take the stance "Zxing always interprets the  bytes of DM, QR, and other codes as UTF-8 text."  That would seem to solve #1 entirely, with no impact whatsoever on any other  applications.  That would seem to not require any major changes to existing Zxing application  code.  (? is that right?)  That could be implemented with a trivial change to the Zxing decoder that translates  the StringBuffer containing bytes from the code into a Unicode string (by specifying  UTF-8 as the byte interpretation.)         I am quite confused, since I think you are still operating under mistaken impressions of how Datamatrix and  QR Code work, which I tried to clarify above, and yet, I have also implemented exactly the functionality you  want, so I am not sure what the remaining issue is? Maybe the issue is that you're using a different copy of  the Datamatrix spec from 1997? we are using ISO 16004:2006, and using the ECC200 format (which is  Datamatrix as we know it today), not ECC100 or ECC140.  First, and most importantly, no, it is entirely incorrect to say it is this library choice to treat the input and  output of QR Code and Datamatrix as strings rather than bytes. Both formats explicitly operate on character  data. This has absolutely nothing to do with project goals; it has everything to do with the specifications.  QR Code includes four modes: numeric, alphanumeric, kanji and "byte" mode. The latter, however, is  supposed to be interpreted as the encoding of a string in ISO88591. Or according to the encoding in force  from an earlier ECI segment. Datamatrix has a quite similar story - section 4.1.e says it quite clearly. Even its  "byte mode", Base-256 encodation, is supposed to be interpreted as ISO88591.  If we disagree here, I can go over the specs with you in more detail, but I think you'll see what I mean by  reading them. Stop here unless you agree with the above.   Let me repeat: these symbologies *do not technically support binary data*. There is no way to signal to a  reader that part of the payload is just uninterpreted bytes. If you disagree, please show me in either of the  specs.  Therefore: a strictly correct API would not include any notion of "just the raw data bytes" since there is no  such notion in the specifications. The API *already* let you get at the raw QR Code or Datamatrix encoding,  which includes its internal headers and signal bits and so on, which is not the same thing.  Again let me repeat: all of this means that no, it would be incorrect to implement what you are saying,  technically, according the specifications.   All that said -- it is not such a gross hack to consider sticking binary data in a "byte mode" segment of a QR  Code. In general this will be meaningless to readers, since they are supposed to read it as text.  But presumably you are thinking of a specific application using custom readers -- these codes would never  be consumes by standard reader software. OK.  Strawman: no, this is completely wrong. The raw bytes of the code include short headers (4-bit segment  identifiers) which have no relationship to UTF-8 text. No QR Code is encoded this way. This would cause the  reader to fail 100% of the time!  Do you mean, assume that the bytes in the "byte mode" segments are UTF-8? OK, but, they aren't! Read the  spec. They are ISO88591. If you did this, you would misread some text. (Note that the decoder does try to  intelligently guess when someone has, in fact, used Shift_JIS or UTF-8 encoding in a byte mode segment. It's  wrong, but people do it, so we try to accommodate. But  you certainly can't assume UTF-8.)   But the thing that really bewilders me is, you already have access to the raw bytes at two levels -- what are  you asking for then? You can get the complete raw QR Code or Datamatrix encoding bytes from the existing  getRawBytes() method. You can get the raw bytes from byte mode segments from the new mechanism I  added.  Please review my changes and the discussion above, and the specs, and then let's talk more if you have questions.        Perhaps we could get on the same wavelength faster with a simple phone conversation.  I do understand both QR and DM at a technical level.  I've implemented several QR  and DM decoders targetted for cell phone usage in generic and proprietary  applications.  I've also implemented encoders for both.  So your technical  descriptions are fully understood, and seem perfectly correct...  One big difference in thinking is your belief that the method by which the contents  of a code is compressed (e.g base-256 encodation, vs. ASCII/ISO88591 etc.) I think  this is a 'red herring' issue, and may not be important to resolve for now... but to  outline the difference, if I understand you correctly, you believe that the means  used to compress portions of the message in a QR or DM code:     1. has significance (semantic value) to the application calling a decoder, and    2. has semantics that are preserved by most encoders.  My view is that the method by which the contents of a code is compressed is like a  private method or field in Java ... an internal detail that should NOT be visible  outside the encoder or decoder... and I have not seen existing commercial encoders  and decoders that will guarantee support for #2... (but maybe they do exist, and are  becoming much more common than I'm aware of...)  Unless there's more evidence to discuss on this topic, I don't think this particular  difference in viewpoints needs to be resolved immediately.  Thinking about the issue, though, leads to the bigger question of how Zxing will  cope with (support) various countries and languages (Greek, Russian, Chinese, etc.)  that are problematic with ASCII/ISO8859-1.  I'm sorry if I introduced more  misunderstanding by shifting the discussion to this bigger picture topic...  It probably would be constructive for someone to outline how Zxing will (or won't?) support the worldwide problem of character sets.  If there is already a strategy for  this, then discussion of the UTF-8 idea is not needed.  The UTF-8 idea depends on accepting a philosophy:     1. The decoder needs to support decoding of codes non-Zxing (i.e. - that are not  UTF-8).  By supporting byte[], you guarantee this, so no problem.     2. It is perfectly fine for Zxing (as an individual application) to always  interpret code content as UTF-8.  This is saying, if you have a communications  channel (e.g. - a QR or DM code) that ensures transmission of any byte pattern, it's  ok to use that channel to communicate whatever byte pattern you want, and place  whatever interpretation semantics you want on that byte pattern.  Just because the standard talks about ASCII and ISO8895-1, doesn't require any  particular application to use that interpretation... it just requires a decoder to  respect and support that interpretation (if the decoder is going to support the  standard, and not be totally proprietary.)  ... But, the important disucssion is how Zxing will support worldwide character  sets, not whether a UTF-8 messaging idea is the right solution...  I am not asking for a change here.  I'm seeking understanding of Zxings goals,  viewpoints, and any constraints those imply. Perhaps I'm jumping the gun throwing  out an idea to solve a problem that may already have been thought about and  resolved, and I just haven't happened to run across that discussion anywhere on the  Zxing site.  If so, my appologies!            Oh - I see from  issue 103  that you have thought about this issue and feel it should  be addressed by the three byte prefix to indicate UTF-8, or possibly by ECI...  So, no need for further discussion.  That's the answer I was seeking, and I should  have read 103, rather than just looked at the title and jumped to conclusions with  the 'Won't fix' label...  :-)        I think we're getting to the real central question, which is character encoding issues.  About internal representation -- indeed, I generally agree, which is why the API didn't even expose the raw  bytes until a few versions ago, and why I initially didn't want to add more access to the internal encoding.  Do the bytes have semantic value that readers understand? the raw bytes do, yes. The 4-bit mode header in  QR Code that says "following this is kanji-encoded stuff" -- yes, that has meaning to the reader. Does the  Kanji itself have meaning to the reader? no. (Interpreting the contents as a URL, for example, is something a  reader might do but is outside the scope of QR Code per se.) Do the bytes in a byte mode have any meaning  to the reader? *yes*, insofar as the reader is supposed to construe them as characters according to some  encoding.  And here we come to the real problem: what encoding? It is supposed to be ISO-8859-1. What are we going  to do about other character sets? we're not making up standards, so the real question is what does QR Code /  Datamatrix provide, and the answers aren't so great.  Yes, the answer they both provide is "use ECI indicators". The bad news is that I cannot find a single reference  on which ECI values map to which encodings. Even the for-pay specification for ECI *does not specify this!*  We reverse engineered and guessed a few values. We do support ECI, but nobody really uses it.  What's worse, the specs seem to leave some wiggle room about whether you really have to use ISO-8859-1 in  byte mode. In practice I can tell you that Japan puts Shift-JIS-encoded text in byte mode segments in QR  Codes all the time. I see UTF-8 too. So in practice we try to guess the encoding -- using clues like, yes, a  byte-order marker header for UTF-8. But this is less than ideal.  I suppose the right answer is use ISO-8859-1 if you can, and if you absolutely can't, at least include an ECI  segment.   Always assuming UTF-8 doesn't work because... - Well, it's supposed to be ISO-8859-1, and reading as UTF-8 is only partly compatible with that. Shift_JIS is  definitely not going to be read the same as UTF-8 - Not all sequences of bytes are valid encodings of a string in UTF-8. So this outright fails in some cases. - It is possible for two byte sequences to encode the same character string in UTF-8. So reversing the  encoding might not give you the original.  ISO-8859-1, the proper default, has only the first problem, but, if it's binary data you're encoding, the  resulting interpretation as text is garbage anyhow. Readers are going to read it as garbage. But, presumably  you are thinking of specialized readers which understand the interpretation you wish them to apply somehow.  I guess to repeat a point -- yes, readers *do* need to interpret the contents as text, according to the spec. I  don't think this affects your reasoning, or means that readers can't provide additional info, of course.  So this is why I give you the raw contents of the byte mode segments themselves. I think this plus giving you  access to the raw bytes of the whole QR Code payload, should enable you to create any specialized reader  application you want from this library.                 Labels: I              		sanfords...@gmail.com	sro...@gmail.com
117	Defect	Fixed	sro...@gmail.com	magnus.reftel	1228847474000	1228861391000	1228874444000	Ant rule "javadoc" fails to produce any documentation	    1. Extract ZXing-1.1.zip 2. Run ant javadoc     The expected output would be the Javadoc status messages and some htmlfiles under docs/javadoc . The actual output from Javadoc is as below, and no html files are generated.  C:\temp\zxing>..\apache-ant-1.7.1\bin\ant javadoc Buildfile: build.xml  javadoc:     [mkdir] Created dir: C:\temp\zxing\docs\javadoc   [javadoc] Generating Javadoc   [javadoc] Javadoc execution   [javadoc] javadoc: error - Illegal package name: "src=' + gaJsHost + google-an alytics.com/ga.js'"   [javadoc] javadoc: error - Illegal package name: "type='text/javascript'%3E%3C /script%3E)); </script> <script type=text/javascript> var pageTracker = _gat._ge tTracker(UA-788492-5); pageTracker._initData(); pageTracker._trackPageview(); </ script>"   [javadoc] Loading source files for package com.google.zxing.client.android...   [javadoc] Loading source files for package com.google.zxing.client.android.res ult...   [javadoc] Loading source files for package com.google.zxing.client.bug...   [javadoc] Loading source files for package com.google.zxing.client.bug.app...   [javadoc] Loading source files for package com.google.zxing.client.bug.service tracker...   [javadoc] Loading source files for package com.google.zxing...   [javadoc] Loading source files for package com.google.zxing.client.result...   [javadoc] Loading source files for package com.google.zxing.client.result.opti onal...   [javadoc] Loading source files for package com.google.zxing.common...   [javadoc] Loading source files for package com.google.zxing.common.reedsolomon ...   [javadoc] Loading source files for package com.google.zxing.datamatrix...   [javadoc] Loading source files for package com.google.zxing.datamatrix.decoder ...   [javadoc] Loading source files for package com.google.zxing.datamatrix.detecto r...   [javadoc] Loading source files for package com.google.zxing.oned...   [javadoc] Loading source files for package com.google.zxing.qrcode...   [javadoc] Loading source files for package com.google.zxing.qrcode.decoder...   [javadoc] Loading source files for package com.google.zxing.qrcode.detector...    [javadoc] Loading source files for package com.google.zxing.client.j2me...   [javadoc] Loading source files for package com.google.zxing.client.j2se...   [javadoc] Loading source files for package com.google.zxing.client.rim...   [javadoc] Loading source files for package com.google.zxing.client.rim.persist ence...   [javadoc] Loading source files for package com.google.zxing.client.rim.persist ence.history...   [javadoc] Loading source files for package com.google.zxing.client.rim.util...    [javadoc] Loading source files for package com.google.zxing.web...   [javadoc] 2 errors  BUILD SUCCESSFUL Total time: 1 second C:\temp\zxing> BUILD SUCCESSFUL Total time: 13 seconds    What version of the product are you using? On what operating system?  ZXing-1.1, from the Downloads here. Ant is version 1.7.1, JDK is 1.6.0_11 and the OS is Windows Visa.     setting the footer attribute of the javadoc element in build.xml to "" and removing all the contents of the classpath element makes the javadoc generation work (although with 122 warnings)     Also reproducible in revision 781        Hmm, I cannot reproduce this myself on Linux or a Mac with similar Ant/Java versions. Not sure, looks like the  target is correct and there's no stray double-quote lying around. I don't suppose there is any chance the file  got corrupted or subtly changed over there? probably not since it happened on two copies.  I will see if I can find a Windows machine to try it on but not sure if we can do much about it if it's a problem,  since the build looks correct.  (The warnings are "class not found" warnings? set the location of various libraries in build.properties to  address that)        Re-ran ant with -v -d and with log to file, attaching the output when run on the shipped build.xml in 1.1 and one with footer set to "" and both filesets removed. Yes, you are correct, the warnings are all about classes it does not find. Oh, and the problems are the same when running Ant under Cygwin.                                   bug117.txt    11.7 KB      &nbsp; View    &nbsp; Download                                            bug117-reduced.txt    64.3 KB      &nbsp; View    &nbsp; Download                         Suspecting it was Ant bug 43342, I re-ran with ant from svn (rev 725059), but got similar results. Log attached.                                   bug117-antsvn.txt    12.0 KB      &nbsp; View    &nbsp; Download                         Yes I can reproduce this on a Windows machine now. Interesting.  I think the bug you cite is relevant, having something to do with newlines and escaping in this attribute. That  suggests a reason that it would work on one platform but not another.  I will look at workarounds like using the <footer> element.                 Status: AcceptedOwner: srowen               It is some glitch in how this HTML text is passed to javadoc as a command-line argument, that only comes up  on Windows. Fortunately I located a workaroudn: useexternalfile="true". This causes args to be passed via a  temp file, and that apparently avoids whatever this is. I am committing the change now.                 Status: Fixed               Retested on revision 782. This error no longer appears. However, javadoc generation still reports errors. These are:    [javadoc] Generating C:\temp\zxing\zxing-read-only\docs\javadoc\com/google/zxing/client/android/\CaptureActivityHandler.html...   [javadoc] C:\temp\zxing\zxing-read-only\android\src\com\google\zxing\client\android\Contents.java:97: package Contacts.Intents does not exist   [javadoc]       Contacts.Intents.Insert.PHONE, SECONDARY_PHONE, TERTIARY_PHONE   [javadoc]                       ^   [javadoc] C:\temp\zxing\zxing-read-only\android\src\com\google\zxing\client\android\Contents.java:101: package Contacts.Intents does not exist   [javadoc]       Contacts.Intents.Insert.EMAIL, SECONDARY_EMAIL, TERTIARY_EMAIL   [javadoc]                       ^   [javadoc] Generating C:\temp\zxing\zxing-read-only\docs\javadoc\com/google/zxing/client/android/\Contents.html...  Commenting out lines 97 and 101 of android/src/com/google/zxing/client/android/Contents.java makes the errors go away. The problem is only minor, however, since the documentation (including the class documentation for this class) gets produced anyway.        Do you have the latest Android SDK? If this didn't exist the code wouldn't compile. It seems OK for me on the  latest 1.0 SDK.        No, I don't have any Android SDK, since I'm only interested in the j2me and j2se parts.       		magnus.reftel	sro...@gmail.com
120	Defect	Fixed	dswit...@gmail.com	dswit...@gmail.com	1229635229000	1230001454000	1230001454000	QR Code from user crashes	 Pavel Antokolsky aka Zigmar reports that scanning the bottom row of the attached image crashes  Barcode Scanner 2.4 on Android, which I can confirm:  E/AndroidRuntime(  450): Uncaught handler: thread Thread-7 exiting due to uncaught exception E/AndroidRuntime(  450): java.lang.IllegalArgumentException E/AndroidRuntime(  450):        at com.google.zxing.qrcode.decoder.Mode.forBits(Unknown  Source) E/AndroidRuntime(  450):        at  com.google.zxing.qrcode.decoder.DecodedBitStreamParser.decode(Unknown Source) E/AndroidRuntime(  450):        at com.google.zxing.qrcode.decoder.Decoder.decode(Unknown  Source) E/AndroidRuntime(  450):        at  com.google.zxing.qrcode.QRCodeReader.decode$46e51e50(Unknown Source) E/AndroidRuntime(  450):        at  com.google.zxing.MultiFormatReader.decodeInternal$14be4073(Unknown Source) E/AndroidRuntime(  450):        at  com.google.zxing.MultiFormatReader.decodeWithState$14be4073(Unknown Source) E/AndroidRuntime(  450):        at  com.google.zxing.client.android.DecodeThread.access$000(Unknown Source) E/AndroidRuntime(  450):        at  com.google.zxing.client.android.DecodeThread$1.handleMessage(Unknown Source) E/AndroidRuntime(  450):        at android.os.Handler.dispatchMessage(Handler.java:88) E/AndroidRuntime(  450):        at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime(  450):        at com.google.zxing.client.android.DecodeThread.run(Unknown  Source)                                 qrdiv.gif    3.4 KB      &nbsp; View    &nbsp; Download                                         Hmm, the android client should not let a RuntimeException kill the client -- I think  that's the best way to address this sort of thing.  Daniel I'm away from internet and any tools for almost a week, can I punt back to  you?                 Owner: dswitkin               Yeah, I don't mind looking at it. My instinct would be for the QR Code to catch this exception in core, then throw  ReaderException instead, since that's what the interface promises. That would solve the problem across all  clients too. Seem reasonable?        Agree on that, I think the exception is not the right one to come out of the top level of the client anyway.        I committed changes to turn this situation into a ReaderException at the top level of core, which is the more  correct thing to happen.  I think the exception handling makes sense now, having reviewed it again, though one could be forgiven for  looking at it and not immediately seeing its grand genius.        ()                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
121	Defect	Fixed	dswit...@gmail.com	dswit...@gmail.com	1229636923000	1229641306000	1229641306000	Crash in SMS parsing code	 Scan attached image with Barcode Scanner 2.4.  E/AndroidRuntime(  482): java.lang.NullPointerException E/AndroidRuntime(  482):        at java.util.Hashtable.put(Hashtable.java:720) E/AndroidRuntime(  482):        at  com.google.zxing.client.result.ResultParser.appendKeyValue(Unknown Source) E/AndroidRuntime(  482):        at  com.google.zxing.client.result.ResultParser.parseNameValuePairs(Unknown Source) E/AndroidRuntime(  482):        at  com.google.zxing.client.result.ResultParser.parseResult(Unknown Source) E/AndroidRuntime(  482):        at  com.google.zxing.client.android.result.ResultHandlerFactory.makeResultHandler(Unknown  Source) E/AndroidRuntime(  482):        at  com.google.zxing.client.android.CaptureActivity.handleDecode(Unknown Source) E/AndroidRuntime(  482):        at  com.google.zxing.client.android.CaptureActivityHandler.handleMessage(Unknown Source) E/AndroidRuntime(  482):        at android.os.Handler.dispatchMessage(Handler.java:88) E/AndroidRuntime(  482):        at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime(  482):        at android.app.ActivityThread.main(ActivityThread.java:3739) E/AndroidRuntime(  482):        at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(  482):        at java.lang.reflect.Method.invoke(Method.java:515) E/AndroidRuntime(  482):        at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:739) E/AndroidRuntime(  482):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:497) E/AndroidRuntime(  482):        at dalvik.system.NativeStart.main(Native Method)                                   SMSCrasher.png    1.5 KB      &nbsp; View    &nbsp; Download                                         Original URL:  http://chart.apis.google.com/chart?cht=qr&amp;chs=350x350&amp;chl=smsto:15039988415:Whaddup%20dawg?         Fixed in r794. We were not handling question marks in the subject or body correctly, believing them to always  be URL query syntax.                 Status: Fixed              		dswit...@gmail.com
124	Defect	Fixed	sro...@gmail.com	kjetil.ribe	1231356954000	1231724695000	1231724695000	 SE K800i auto-focus not working	   1. When taking a picture of the barcode the auto-focus is not working,  causing blurred pictures unable to be decoded.  Is this an issue only on this phone? Are there any settings on the phone causing this error? Is this a Java ME problem which has not been implementet by Sony Ericsson?       I haven't tested recently since I don't have access to a K800i anymore, but it was working with auto-focus for me  on this device. You are using the 'regular' version and not the 'basic' one right?  Also you are sure it is not auto-focusing? it doesn't focus for long, about 3/4 of a second. It is possible that  even after that it fails to decode the image; a failure alone doesn't indicate the auto-focus doesn't work.          I have tried both versions, with the same results. When I start the camera application, and push the camera button half down, the  camera is auto-focusing ok, and the pictures are of very good quality.  But with Zxing the camera is not auto-focusing at all.        Just to rule out really dumb mistakes like me building the 'basic' version when I meant to build the 'regular'  version, I rebuilt everything and uploaded new binaries to http://zxing.org/w/BarcodeReader.jad -- try this  again?                 Status: AcceptedOwner: srowen               Change       multimediaManager = new DefaultMultimediaManager(); to     multimediaManager = new AdvancedMultimediaManager();  in SnapshotThread.java, recompile, and upload to your phone. Should be working :)  There are two files that need to be changed for the app to be regular or basic. Not only ZxingMIDlet.java        Thanks, I fixed up this code to make it a bit easier to switch back and forth.        Marking 'fixed' since I kind of think there was a goof here, that I just fixed. Please reopen if not working. I  unfortunately do not have a way to test on a J2ME phone anymore.                 Status: Fixed              		kjetil.r...@gmail.com	michal.demin	sro...@gmail.com
125	Defect	Fixed	sro...@gmail.com	ken.shirriff	1231466047000	1231471950000	1293209521000	QR-of-death kills the Barcode Scanner: IllegalArgumentException	   1. Scan the attached QR.     Expected: scans (or not).  Observed: Barcode Scanner crashes after a couple seconds.  This happens  100% of the time.  Dialog says "The application Barcode Scanner (process  com.google.zxing.client.android) has stopped unexpectedly.  Please try  again.   What version of the product are you using? On what operating system? Barcode Scanner on Android cupcake 124944.     Stack trace: E/AndroidRuntime( 3727): Uncaught handler: thread Thread-15 exiting due to  uncaught exception E/AndroidRuntime( 3727): java.lang.IllegalArgumentException E/AndroidRuntime( 3727): 	at  com.google.zxing.qrcode.decoder.Mode.forBits(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.qrcode.decoder.DecodedBitStreamParser.decode(Unknown  Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.qrcode.decoder.Decoder.decode(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.qrcode.QRCodeReader.decode$46e51e50(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.MultiFormatReader.decodeInternal$14be4073(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.MultiFormatReader.decodeWithState$14be4073(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.client.android.DecodeThread.access$000(Unknown Source) E/AndroidRuntime( 3727): 	at  com.google.zxing.client.android.DecodeThread$1.handleMessage(Unknown  Source) E/AndroidRuntime( 3727): 	at  android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 3727): 	at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 3727): 	at  com.google.zxing.client.android.DecodeThread.run(Unknown Source)   The barcode is from http://www.itsc.org.sg/pdf/synthesis08/Three_QR_Code.pdf                                     qr-of-death.gif    4.3 KB      &nbsp; View    &nbsp; Download                                         Here's a cleaner version of the image.                                   qr-of-death.gif    2.9 KB      &nbsp; View    &nbsp; Download                                             Yep that was fixed a little while ago. I thought it went out in the very latest app build a few weeks ago? could be wrong, but, double-check that you have the latest build. In any event, it's fixed in SVN. Thanks for the report.                 Status: FixedOwner: srowen               I uninstalled and reinstalled the Android Barcode Scanner from the Market.  It still  crashes, so apparently the fix hasn't been pushed out.        I also think that this issue hasn't been fixed yet. Since a certain amount of QR code scanning will also suffer from crash.  I am using eclipse to build the whole project.        Hmm, works for me. I just tried it with the latest release and it and decode as 'etdeffgf'.         I am decoding using the version 1.3, sometimes it broke down at IllegalArgumentException.  While, if I try it out using the zxing - Revision 967, which I have just downloaded, it turned out to be fine.  The sample image is like the attachment.                                   DSC00001.JPG    226 KB      &nbsp; View    &nbsp; Download                                             HI  i am new to android user. i am having the same problem from last few days..  but when i installed QR droid private and then Barcode scanner (downloaded both the application from android market)... and used the barcoding "from camera" option in QR droid private ...  it uses Barcode scanner automatically... and it worked great .. in almost cases...          		Lewis.Ch...@gmail.com	cses...@gmail.com	ken.shir...@gmail.com	sro...@gmail.com
126	Defect	Fixed	sro...@gmail.com	nathan75n	1232072719000	1232095500000	1232095500000	RIM Client: Captured images are never deleted from the file system	   1. Capture QR Code image 2. Exit application 3. Observe undeleted image file    in void  com.google.zxing.client.rim.ZXingLMMainScreen.FileConnectionThread.run()  replace ======================== FileConnection file = null;       InputStream is = null;       Image capturedImage = null;       try {         file = (FileConnection) Connector.open("file://" + imagePath,  Connector.READ_WRITE);         is = file.openInputStream();         capturedImage = Image.createImage(is);       } catch (IOException e) {         Log.error("Problem creating image: " + e);         removeProgressBar();         invalidate();         showMessage("An error occured processing the image.");         return;       } finally {         if (is != null) {           try {             is.close();           } catch (IOException ioe) {           }         }         if (file != null &amp;&amp; file.exists()) {           if (file.isOpen()) {             //file.close();           }           //file.delete();           Log.info("Deleted image file.");         }       } ============================== with ============================== FileConnection fileConn = null; InputStream is = null; Image capturedImage = null;  try {    fileConn = (FileConnection) Connector.open("file://"+ imagePath,  Connector.READ_WRITE);    is = fileConn.openInputStream();    capturedImage = Image.createImage(is);  } catch (IOException e) {    Log.error("Problem creating image: " + e);    return;  } finally {    if (is != null) {      try {           if (fileConn != null &amp;&amp; fileConn.exists()) {           fileConn.delete(); // Delete the file. All open input and output  streams are automatically flushed and closed.           fileConn.close(); // Close file connection 	  Log.info("Deleted image file.");           }         } catch (IOException ioe) {            Log.error("IOE while trying to close/delete image "+ imagePath);         } catch (ConnectionClosedException cce) {           Log.error("CCE while trying to close/delete image "+ imagePath);         }     } // of if  } // of finally ==============================  What version of the product are you using? On what operating system? RIM Client v1.2        Actually you only need to change the finally() block - disregard the rest        Good call. I committed a substantially similar change.                 Status: FixedOwner: srowen              		nathan...@gmail.com	sro...@gmail.com
127	Defect	Fixed	sro...@gmail.com	windenntw	1232153811000	1232435717000	1232514586000	Android client crashes when reading a PNG enconded in a QR	   1. Open zxing android client 2. Open http://nfg.2y.net/games/jphonegames/v601shqrcode.shtm on computer 3. Scan QRs at the bottom of the page     App crashes, I expected it to ask for an intent to open the image.  What version of the product are you using? On what operating system?  Standard Android client on HTC Dream.          So, the crash part was fixed a while ago but a new version has not yet been released with the fix.  In the current code this still fails to decode -- the QR Code sequence here is using Structured Append which we  don't support. It's an optional part of the spec, and rarely used, and would be a bit tricky to support, and we  haven't seen a real-world use for it.  But I can change the code to reflect this situation better -- done.                 Status: FixedOwner: srowen               Actually on second thought, I changed the code to just basically ignore structured append messages. When  scanning it you'll see whatever portion of the overall message the symbol encodes. Structured append still  isn't really supported but at least you can read codes that use it, partly.  In this particular case it was used to encode actual binary data, which isn't quite kosher. It is using byte mode,  for which the default interpretation is text. It comes out gibberish of course since it was meant to be  interpreted as a PNG but there's no way to signal this. A reader would have to know ahead of time to expect  the data in this format and interpret accordingly. We do return to the caller the raw bytes, but the library,  naturally, cannot attempt to construe byte-mode data as an image every time.  This is entirely separate from the question of using structured append -- would happen without structured  append too.       		sro...@gmail.com	windenntw
135	Defect	Fixed	sro...@gmail.com	stevenmartin2000	1232717439000	1232735654000	1232735654000	CaptureActivity throws NullPointerException when debugging in Eclipse	   1. Execute CaptureActivity in debug mode in eclipse 2. 3.    Should run the scanner rountine, instead throws null pointer  What version of the product are you using? On what operating system?     Line 135 in CaptureActivity gets a non-null Intent object, but the Action is null.  So intent.getAction().equals() causes the error.  I fixed it by changing the line to this: if (intent != null &amp;&amp; intent.getAction() != null &amp;&amp; (intent.getAction().equals(........  That lets you run the CaptureActivity directly in debug mode.        Good one, yes. We fixed this a short time ago but it's not released yet. You can grab the latest code from SVN  and compile if it's more urgent.                 Status: FixedOwner: srowen              		sro...@gmail.com	stevenma...@gmail.com
136	Defect	Fixed	sro...@gmail.com	rodney.beede	1232956711000	1232960205000	1232960205000	Building core requires WTK	   1. Download build 1.2 2. Try to build core following the instructions at http://code.google.com/p/zxing/wiki/GettingStarted 3. You get an error because ${WTK-home}\lib not found.   Installing WTK seems to fix the issue.  Perhaps the Wiki page should just  be updated.     I just cut the dependency recently, actually -- it helped ensure core compiles in J2ME but there was really little  risk of that breaking and we'd catch it anyway. The code in SVN no longer has core needing WTK.                 Status: FixedOwner: srowen              		rodney.b...@gmail.com	sro...@gmail.com
143	Defect	Fixed	sro...@gmail.com	j...@thejof.com	1233850765000	1233869432000	1233986935000	"Mangled" geo: tags crash Android reader	   1. Generate a QR code with a non-coordinate-like geo: tag that contains some letters and a comma. 1a. For example: 'geo:123 Main Street, Anytown CA 12345' 2. Scan code 3. Application crashes with error: "The application Barcode Scanner (process com.google.zxing.client.android) has stopped unexpectedly. Please try again."     - I was hoping that I could have a "geo:" link that could lookup an address on a map, rather than coordinates alone. This way, the destination becomes easier to identify by sight in person.  What version of the product are you using? On what operating system? reader: v2.4  phone: Android (kernel 2.6.25-01843-afea26b0 android-build@apa27 #6 / build dream_devphone-userdebug 1.0 UNLOCKED 116222 test-keys)         Yeah, unfortunately that is not part of the syntax for geo: URIs. Even if we supported it, other readers wouldn't, so it would not be useful to encode this.  But it sure should not crash anything. I imagine I know the problem and can fix it easily.                 Status: AcceptedOwner: srowen               Here's an example QR that crashes my copy.                                   geo.png    391 bytes      &nbsp; View    &nbsp; Download                                             Fixed in SVN -- will no longer crash. This is not a valid geo: URI though, so will just be treated as text.                 Status: Fixed               For the sake of completeness, here's the exception that is raised:  E/AndroidRuntime(  342): java.lang.NumberFormatException: 123 Main Street E/AndroidRuntime(  342):        at org.apache.harmony.luni.util.FloatingPointParser.initialParse(FloatingPointParser.java:132) E/AndroidRuntime(  342):        at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:310) E/AndroidRuntime(  342):        at java.lang.Float.parseFloat(Float.java:340) E/AndroidRuntime(  342):        at com.google.zxing.client.result.ResultParser.parseResult(Unknown Source) E/AndroidRuntime(  342):        at com.google.zxing.client.android.result.ResultHandlerFactory.makeResultHandler(Unknown Source) E/AndroidRuntime(  342):        at com.google.zxing.client.android.CaptureActivity.handleDecode(Unknown Source) E/AndroidRuntime(  342):        at com.google.zxing.client.android.CaptureActivityHandler.handleMessage(Unknown Source) E/AndroidRuntime(  342):        at android.os.Handler.dispatchMessage(Handler.java:88) E/AndroidRuntime(  342):        at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime(  342):        at android.app.ActivityThread.main(ActivityThread.java:3742) E/AndroidRuntime(  342):        at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(  342):        at java.lang.reflect.Method.invoke(Method.java:515) E/AndroidRuntime(  342):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:739) E/AndroidRuntime(  342):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:497) E/AndroidRuntime(  342):        at dalvik.system.NativeStart.main(Native Method)        Yup that's the one. Fixed in SVN.       		j...@thejof.com	sro...@gmail.com
145	Defect	Fixed	dswit...@gmail.com	stad...@android.com	1234236116000	1234238910000	1234238910000	Share via email is using incorrect intent format	 The barcode scanner app is sending incorrect intent formats when the user selects share-by-email.  Gmail happens to parse this and work, but other clients will not parse it correctly and the feature will appear to be broken.  You send:  Intent {  action=android.intent.action.SENDTO  data=mailto:  extras {      body=http://en.wikipedia.org/wiki/Main_Page      subject=Here's the contents of a barcode I scanned   } }  Problems.  1.  SENDTO and mailto: are only meant for use when you are sending "to" a specific recipient.  You should be using SEND here, and no data= should be required.  2.  "body" and "subject" are obsolete key values that Gmail just happens to be parsing, but are not supported by all Email clients..  You should be using Intent.EXTRA_SUBJECT and Intent.EXTRA_TEXT, and this intent should also have a "text/plain" mime type.  All of this is doc'd in Intent.java       ()                 Status: StartedOwner: dswitkin               ()                 Status: Fixed              		dswit...@gmail.com	stad...@android.com
146	Defect	Fixed	dswit...@gmail.com	pixelfli...@google.com	1234608924000	1234833066000	1234833066000	"share" barcode truncated	 launch barcodes, press menu/share, pick a contact that has a lot of data (see screenshot).  Notice that the barcode is truncated.                                 truncated.png    17.1 KB      &nbsp; View    &nbsp; Download                                         Interesting, yeah I suppose it's a matter of letting the text scroll off or truncate rather than the image. Is this what "gravity" controls?                 Owner: dswitkin               I just need to wrap the whole thing in a ScrollView, it's an easy fix.                 Status: Accepted               OK, I added a ScrollView, it seems to work fine. I also added support for multiple email addresses and phone  numbers, which would have made this bug more visible.                 Status: Fixed              		dswit...@gmail.com	pixelfli...@google.com	sro...@gmail.com
148	Defect	Fixed	sro...@gmail.com	netsharc	1235813258000	1235853858000	1235853858000	Generator generates iCal items with LF, RFC2445 say it should be CRLF	 The generator at http://zxing.appspot.com/generator/ generates quasi-iCal  calendar items with LF as line endings, but RFC2445 say the lines should  be terminated with CRLF.     Good one, should be fixed in SVN now.                 Status: FixedOwner: srowen              		netsh...@gmail.com	sro...@gmail.com
149	Defect	Fixed	sro...@gmail.com	netsharc	1235813665000	1235853900000	1235853900000	Generator generates calendar event with hour "24"	   1. Open http://zxing.appspot.com/generator/ , create a new calendar event 2. Set time: e.g. 2009-03-01 02:08 AM , timezone: GMT + 02:00, click  Generate     - The expected output is a calendar event with DTSTART:20090301T000800Z  - The generated output (seen in the embed URL) is instead  DTSTART:20090301T240800Z , i.e. 24:08 o'clock.  It happens to different timezones too, when (hour - gmt-offset) should be  0.     I also committed a fix for this but am consulting with Yohann (author) to see if it's valid.                 Status: FixedOwner: srowen              		netsh...@gmail.com	sro...@gmail.com
150	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1235956104000	1236162352000	1236295680000	Uris should be forced to lowercase, and launching an intent should catch ActivityNotFoundException	 On Petit Four, the intents seem to have changed, such that the current intent used for opening  the dialer now fails:  E/AndroidRuntime( 2761): android.content.ActivityNotFoundException: No Activity found to  handle Intent { action=android.intent.action.DIAL data=TEL:9172975673 } E/AndroidRuntime( 2761): 	at  android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1471) E/AndroidRuntime( 2761): 	at  android.app.Instrumentation.execStartActivity(Instrumentation.java:1441) E/AndroidRuntime( 2761): 	at android.app.Activity.startActivityForResult(Activity.java:2528) E/AndroidRuntime( 2761): 	at android.app.Activity.startActivity(Activity.java:2572) E/AndroidRuntime( 2761): 	at  com.google.zxing.client.android.result.ResultHandler.dialPhoneFromUri(Unknown Source) E/AndroidRuntime( 2761): 	at  com.google.zxing.client.android.result.TelResultHandler.handleButtonPress(Unknown Source) E/AndroidRuntime( 2761): 	at  com.google.zxing.client.android.result.ResultButtonListener.onClick(Unknown Source) E/AndroidRuntime( 2761): 	at android.view.View.performClick(View.java:2110) E/AndroidRuntime( 2761): 	at android.view.View.onTouchEvent(View.java:3524) E/AndroidRuntime( 2761): 	at android.widget.TextView.onTouchEvent(TextView.java:4659) E/AndroidRuntime( 2761): 	at android.view.View.dispatchTouchEvent(View.java:3179) E/AndroidRuntime( 2761): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:857) E/AndroidRuntime( 2761): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:857) E/AndroidRuntime( 2761): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:857) E/AndroidRuntime( 2761): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:857) E/AndroidRuntime( 2761): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:857) E/AndroidRuntime( 2761): 	at  com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWind ow.java:1593) E/AndroidRuntime( 2761): 	at  com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:108 9) E/AndroidRuntime( 2761): 	at android.app.Activity.dispatchTouchEvent(Activity.java:1873) E/AndroidRuntime( 2761): 	at  com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.jav a:1577) E/AndroidRuntime( 2761): 	at android.view.ViewRoot.handleMessage(ViewRoot.java:1140) E/AndroidRuntime( 2761): 	at android.os.Handler.dispatchMessage(Handler.java:88) E/AndroidRuntime( 2761): 	at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 2761): 	at android.app.ActivityThread.main(ActivityThread.java:3739) E/AndroidRuntime( 2761): 	at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime( 2761): 	at java.lang.reflect.Method.invoke(Method.java:515) E/AndroidRuntime( 2761): 	at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:739) E/AndroidRuntime( 2761): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:497) E/AndroidRuntime( 2761): 	at dalvik.system.NativeStart.main(Native Method)  A new intent is needed. Currently investigating what I should be sending.     Apparently the problem is that Dialer doesn't support TEL: only tel: Uris. So this is not a regression from Android  1.0, and is not a ZXing bug. However I think we can force lowercase on some incoming Uris we receive, and catch  the exception throw from the intent to be more compatible and more bulletproof.                 Summary: Uris should be forced to lowercase, and launching an intent should catch ActivityNotFoundExceptionLabels: -Priority-High Priority-Medium               I just changed to normalize this in the code. Perhaps we should treat MAILTO:, URLTO: etc the same?                 Status: FixedOwner: srowen               Yeah, I suppose we should convert all Uri prefixes to lowercase. Are you up for doing that?        Done, the only thing left that didn't normalize was geo:       		dswit...@gmail.com	sro...@gmail.com
152	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1236152605000	1285171666000	1285171666000	Some URLs are being recognized as email addresses	 This URL:  https://www.google.com/calendar/hosted/google.com/embed? mode=AGENDA&amp;force_login=true&amp;src=google.com_726f6f6d5f6265707075@resource.calendar.go ogle.com  parses as an email. Sean, didn't we relax the rules on email parsing recently?     (That URL really should escape '@' since it's unsafe and reserved in the https scheme, but...)  Yeah I think the fastest fix is to consider matching URIs before email addresses.  The email parser is really  permissive, technically too permissive. I was sort of concerned about missing some non-standard email  addresses in Japan.                 Status: Fixed               Thanks, it's working.                 Status: Verified               ()                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
158	Defect	Fixed	sro...@gmail.com	mich...@jixel.com	1237508868000	1248282153000	1248282153000	Reading DataMatrix	 I have the attached image which is a generated (not scanned) 2d Datamatrix barcode, so should be a perfect source for the api.  However, I am getting a ReaderException. Is this meant to be supported at this stage (the docs list datamatrix support). I would like to ensure it works on this raw image before I start looking at getting it to work on photo captured barcodes.  What version of the product are you using? On what operating system?  Currently I am just testing on the standard desktop se version, with the GUIRunner test app.                                   2d.jpg    2.0 KB      &nbsp; View    &nbsp; Download                                         Pretty sure there is a bug here -- already found one off-by-one error that makes a difference in this small  image. Still hunting it down.                 Status: AcceptedOwner: srowen               Still working on this -- question, what is this code supposed to encode? I have gotten past the detector problem  but it fails now because it seems to use "FNC1" which we don't support yet. Is that intended? If you don't know  what that means then the answer is probably 'no' :)        yes, i'm sure the code is correct. It is DataMatrix ECC200. The code is described in details in ISO/CEI 16022. This code is a part of EAN.UCC standard since July 2004.  It scans and decodes on hardware devices for Symbol and Intermec.  It is the barcode used on veterinary medicines across Europe and it is in this area I was wishing to use it.  btw, thanks for you speedy efforts in looking into this, it is very much appreciated!           I have no doubt the code is valid. Its contents are a bit unusual, which makes me wonder what the contents are supposed to be? Do you know? This would help determine whether there is another problem here.        here is an image of the screen on my Symbol PDA when I scan it with that using the default Symbol test application. Hope that helps.                                    scan.jpg    46.3 KB      &nbsp; View    &nbsp; Download                                             btw, the character that shows as a square in the display is actually FNC1 which is  used as a string terminator in this format        Good, it is decoding with FNC1 as first symbol. I suppose there is not much harm in ignoring the symbol  rather than reject the code. Will have to think about that and revisit when I can get back to work on it.         thank you. if you could let me know when you have a version that can be tested against these codes, I would very much appreciate it. If you require any more examples, please let me know.        I am on vacation away from my workstation but should be ready shortly after I get back - about 2 weeks        Ps as a qorkaround you can try decoding a larger version of the image which should dilute the off by one  error enough to work. Then you need to change the code to ignore rather than reject FNC1        I changed the code to ignore DM symbols that are not supported. I also committed the detector fix after getting  it right, plus a few more small improvements. The test image work now.                 Status: Fixed               I've checked out the lastest code and compiled the core &amp; se parts. When I run the GUIrunner in the se part and browse to the barcode attached in the thread above, I still get a com.google.zxing.ReaderException.  Am I missing something here?          The "MultiFormatReader" does not look for DataMatrix by default. You would have to change the runner to use DataMatrixReader, or else pass a hint parameter that indicates you want to look for DataMatrix        Yeah actually the original image does not work again. Will have to see what I broke... it has to do with the part of the code that determines the dimension of symbol.                 Status: Accepted               Is there an update to the software that can read data matrices?  I downloaded the latest release of this software and I am experiencing the same issue described above.  I see the "ReaderException" whenever I try to upload an image with a data matrix in it.  Thank you.        No big updates, some of the small bugs have been fixed, and clean images will decode, but many real images fail. What is posted in the online decoder is just about the latest code.  There are some change to dithering in progress which could help... I figure that will be done in a month or so.        OK.  I'll keep that in mind.  But what exactly do you define as a clean image?        A pure black and white image should decode. A pretty clear photo (not much blur or uneven lighting or rotation) ought to decode. Really what seems to trip it up now is uneven lighting. The corner detector is just too sensitive. I think the dumb-but-fast approach in the code now may not be up to the task, but, Daniel is working on lighting adjustment improvements that might just rescue it.        I was about to leave a comment saying that the purely symmetrical black and white image would not decode but I forgot that I have to go into the code and uncomment the line that adds the data matrix reader.  Pure black and white worked great. :-)  It threw the exception for another image I have that is also symmetrical but has hints of gray in it.  I'll keep an eye out for the changes in the coming months. Thanks for answering my questions.         I think this is as 'fixed' as it's going to be anytime soon.                 Status: Fixed              		marlonlj...@gmail.com	mich...@jixel.com	sro...@gmail.com
161	Defect	Fixed	sro...@gmail.com	paul.holden	1237941358000	1238999907000	1238999907000	GF256 cpp port is incorrect	 It probably produces the correct results, but it's doing unnecessary work.  Here's the java code in 1.3:      for (int i = 0; i < 256; i++) {       expTable[i] = x;       x <<= 1; // x = x * 2; we're assuming the generator alpha is 2       if (x >= 0x100) {         x ^= primitive;       }     }     for (int i = 0; i < 255; i++) {       logTable[expTable[i]] = i;     }  corresponding cpp code:       for (int i = 0; i < 256; i++) {       exp_[i] = x;       x <<= 1;       if (x >= 0x100) {         x ^= primitive;       }              // log(0) == 0, but should never be used       log_[0] = 0;       for (int i = 0; i < 255; i++) {         log_[exp_[i]] = i;       }     }  Note that the scope of the for loop which constructs the log_ table is within the score of the for loop which constructs the exp_ table. I believe the code should be:       for (int i = 0; i < 256; i++) {       exp_[i] = x;       x <<= 1;       if (x >= 0x100) {         x ^= primitive;       }     }     // log(0) == 0, but should never be used     log_[0] = 0;     for (int i = 0; i < 255; i++) {       log_[exp_[i]] = i;     }  Regards, Paul      Looks like a clear boo-boo indeed. I can fix this when I get back to a workstation.                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		paul.hol...@gmail.com	sro...@gmail.com
163	Defect	Fixed	sro...@gmail.com	paul.holden	1238112414000	1239000059000	1239000059000	Uninitialized memory in cpp port	 I'm building the cpp code with MSVC 2005, but I suspect this bug affects other compilers/STL implementations.  I'm seeing uninitialised members in the GF256Poly::coefficients array. It looks like the code is assuming that the following will initialise 'coefficients' with all ints set to 0.    Ref<GF256Poly> GF256::buildMonomial(int degree, int coefficient) {     ...     int nCoefficients = degree + 1;     ArrayRef<int> coefficients(new Array<int>(nCoefficients));     coefficients[0] = coefficient;      Ref<GF256Poly> result(new GF256Poly(*this, coefficients));     return result;   }    For MSVC the underlying valarray::valarray(size_t n) constructor doesn't initialise any elements of the array.  A simple fix is to change the constructor in Array.h from this:      Array(size_t n) : Counted(), values_(n) { }  to this:      Array(size_t n) : Counted(), values_(T(), n) { }  Regards, Paul      I should add that one side effect of this is that this line in GF256::mulitply ends up accessing random memory, as the upper bits of 'a' are not set to zero (I'm seeing 0xcdcdcdXX  in the debugger):      return exp_[(log_[a] + log_[b]) % 255];         Simple enough that I can take on fixing this.                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		paul.hol...@gmail.com	sro...@gmail.com
164	Defect	Fixed	sro...@gmail.com	paul.holden	1238117967000	1239000749000	1239000749000	QRCode BitMatrixParser.readVersion() reads too few bits	 If reading the top-right version info fails, the function tries to read version info from the bottom left corner. The bounds for the for loop are incorrect, and the function only reads a 6x1 pixel region rather than a 6x3 pixel region.  In version 1.3 of the source (BitMatrixParser.java, line 111)        // Hmm, failed. Try bottom left: 6 wide by 3 tall       versionBits = 0;       for (int j = 5; j >= 0; j--) {         int iMin = dimension - 11;         for (int i = dimension - 11; i >= iMin; i--) {           versionBits = copyBit(i, j, versionBits);         }       }  Note that the inner for loop iterator 'i' is initialise to 'dimension - 11', which is the same as the terminating bound 'iMin'. I believe that 'i' should be initialised to 'dimension - 9'.  Regards, Paul      PS This bug also affects the cpp port.        Again looks like a clear and embarrassing bug that has been around for ages. I will confirm and fix in about a week when I am back at a proper workstation.                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		paul.hol...@gmail.com	sro...@gmail.com
165	Defect	Fixed	sro...@gmail.com	paul.holden	1238119106000	1239000966000	1239000966000	Version.decodeVersionInformation doesn't update bestDifference	 Spotted in v1.3 of the source.  'bestDifference' is initialised to 'int max', but it is never updated when a better match is found:        int bitsDifference = FormatInformation.numBitsDiffering(versionBits, targetVersion);       if (bitsDifference < bestDifference) {         bestVersion = i + 7;       }  Should be:        int bitsDifference = FormatInformation.numBitsDiffering(versionBits, targetVersion);       if (bitsDifference < bestDifference) {         bestVersion = i + 7;         bestDifference = bitsDifference;       }  As a result, if an exact match isn't found the code to return the best match is never executed, and null is always returned.      // We can tolerate up to 3 bits of error since no two version info codewords will     // differ in less than 4 bits.     if (bestDifference <= 3) { // XXXX test always fails       return getVersionForNumber(bestVersion);     }     // If we didn't find a close enough match, fail     return null;  This bug also affects the cpp port.     Same story, looks convincing to me. Thanks for the great reports. I will take a deeper look soon and fix as needed.                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		paul.hol...@gmail.com	sro...@gmail.com
166	Defect	Fixed	sro...@gmail.com	paul.holden	1238348379000	1239001119000	1239001119000	Bug in cpp port of Detector.java	 Spotten in v1.3 of the source.  Java source:      if (!BlackPointEstimationMethod.TWO_D_SAMPLING.equals(image.getLastEstimationMethod())) {       image.estimateBlackPoint(BlackPointEstimationMethod.TWO_D_SAMPLING, 0);     }   cpp source:        if (!BlackPointEstimationMethod_2D == image_->getLastEstimationMethod()) {         image_->estimateBlackPoint(BlackPointEstimationMethod_2D, 0);       }   Note the incorrect logical negation (!a == b). This should be (a != b), i.e:        if (BlackPointEstimationMethod_2D != image_->getLastEstimationMethod()) {         image_->estimateBlackPoint(BlackPointEstimationMethod_2D, 0);       }  Cheers, Paul     ()                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		paul.hol...@gmail.com	sro...@gmail.com
168	Defect	Fixed	sro...@gmail.com	npeer2...@gmail.com	1238541632000	1238611910000	1238611910000	Javadoc link on project homepage seems broken	 Javadoc link on Project Home currently points to http://zxing.org/w/docs/javadoc/index.html I get a blank page when I click on it.     yeah that server isn't responding and I am away from a means to fix it for a few days. Coming back soon                 Status: AcceptedOwner: srowen               ()                 Status: Fixed              		npeer2...@gmail.com	sro...@gmail.com
177	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1239949319000	1239949882000	1239949882000	Fancy QR from setjapan.com crashes Android client	 Try the attached image:  E/AndroidRuntime( 5552): Uncaught handler: thread Thread-9 exiting due to uncaught exception E/AndroidRuntime( 5552): java.lang.IllegalArgumentException E/AndroidRuntime( 5552): 	at  com.google.zxing.qrcode.decoder.Version.getProvisionalVersionForDimension(Unknown Source) E/AndroidRuntime( 5552): 	at com.google.zxing.qrcode.detector.Detector.detect(Unknown Source) E/AndroidRuntime( 5552): 	at  com.google.zxing.qrcode.QRCodeReader.decode$46e51e50(Unknown Source) E/AndroidRuntime( 5552): 	at  com.google.zxing.MultiFormatReader.decodeInternal$14be4073(Unknown Source) E/AndroidRuntime( 5552): 	at  com.google.zxing.MultiFormatReader.decodeWithState$14be4073(Unknown Source) E/AndroidRuntime( 5552): 	at com.google.zxing.client.android.DecodeThread.access$000(Unknown  Source) E/AndroidRuntime( 5552): 	at  com.google.zxing.client.android.DecodeThread$1.handleMessage(Unknown Source) E/AndroidRuntime( 5552): 	at android.os.Handler.dispatchMessage(Handler.java:88) E/AndroidRuntime( 5552): 	at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 5552): 	at com.google.zxing.client.android.DecodeThread.run(Unknown Source)                                  SetJapanCokeQRCode.png    178 KB      &nbsp; View    &nbsp; Download                                         Whoa, surely this one can't decode! I can't reproduce in the sense that I don't detect anything in this, but, from the stack trace I see what's going on. I committed a change that should make sure the IAE becomes a ReaderException at least. That is the essence of the issue? Reopen if no.                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
179	Defect	Fixed	sro...@gmail.com	twwinwood	1239953911000	1239986505000	1239986505000	Very small QR codes containing text misidentified as URI	   1. Create two QR codes; one with a very small amount of text (e.g. "Hi.") and one with a bit more text (e.g. "Hi there. What's going on?"). 2. Scan them both with zxing.    I expect both to be identified as text (returning "Hi." and "Hi there. What's going on?"). However, only the latter is correctly identified as text; the former is identified as a URL and returned as "http://Hi.  What version of the product are you using? On what operating system? I tried both the version of Barcode Scanner on my T-Mobile G1, and also the experimental online decoder. The QR codes were produced using the generator provided by zxing.    Curiously, the intermediate stage, containing more text but not enough to add the alignment pattern (e.g. "Hi there.") is identified correctly as containing text.     Ah, the problem is the period. The filter for a URL and raw text is pretty similar since a URL might be as simple as "foo.com". The second is rejected as a URL since it has a space, for sure. The first happens to pass all the checks though. I can strengthen it to reject the first one too.                 Status: FixedOwner: srowen              		sro...@gmail.com	twwinw...@gmail.com
184	Defect	Fixed	dswit...@gmail.com	android.mueller	1240720218000	1243379931000	1243379931000	"open product search" on Google G1 launches wrong URL	   1. scan EAN_8 bar code of a product type bar code 2. click on "open product search" 3.    A search on a product database should be started. Instead of this, the google G1 forwards to the standard m.google.com "google mobile products" page without launching a product search.  What version of the product are you using? On what operating system? Android RC33 on Google G1 with Barcode Scanner zxing V2.6 for Android.    Normal "web search" button works, but doesn't make a lot of sense when searching for e.g. 1234567.     So you are saying you do not see search results, though you do correctly end up at mobile product search.   I am not seeing this in the UK, but iit makes me wonder if it is something to do with the recent changes to  the mobile product search UI. But that should be rolled out here in the UK too. Neveertheless I somehow  suspect the landing URL may have changed.   Forwarding to Daniel who would know more.                  Owner: dswitkin               Mobile product search launched for .com and .co.uk. If you ask for google.fr/m/products, for example, you'll get  sent to the mobile home page instead. I'm not sure what's going on here because I don't know what locale the  bug is happening with. I think the best thing to do is send all non U.S. and U.K. product search queries to the  new U.S. mobile site, since it's so much better than the desktop version.                 Status: Accepted               I believe this is fixed in v2.7, which I just posted to the Market today. Please try again and reopen this bug if the  problem continues.                 Status: Fixed               Same problem occurs here. Netherlands g1 crb17 release dutch version. Google search works correct,  but open product search refers to m.google.com. working on version 2.7 of barcode scanner.        Mike, do you mean that scanning a product sends you to the main m.google.com homepage, and not mobile  Product Search? I changed the code so that unknown domains should go to the U.S. mobile Product Search page.  I wonder if they are redirecting you based on IP.                 Status: Accepted               @dswitkin Once i scan a barcode and press open barcode search i get directed to m.google.com  See above post for versions etc. I am on a t-mobile account.         hi i also get redirected to the german version of m.google.com (which does not seem  to contain product search!?!!!) don't know why this is happening though. i use a swiss mobile operator, but my phone  is english, google search on the phone gives me the englishpages... really strange  this!!! how about letting the user configure additional URLs to call? like: http:// www.codecheck.info (swiss consumer product information page)         Hi folks, can you try again please? There has been a server-side change which should have fixed this issue.  Thanks, Daniel        I have tested it and it works correctly now.  Another problem solved :)  Thanks        jep, now it works, doesn't find most of the (swiss) DVDs and CDs i searched but it found one. thanks! but still it would be cool to configure additional URLs to open.        ()                 Status: Fixed              		android....@googlemail.com	dswit...@gmail.com	mikevdb...@gmail.com	patrick....@gmail.com	sro...@gmail.com
187	Defect	Fixed	sro...@gmail.com	g1adrift	1241533471000	1241539619000	1241539619000	shared contact barcode ends up being detected as text on Android	   1. (on G1) go to Contacts ??[select contact] ??Show barcode 2. (on ADP) launch Barcode Scanner 3. Scan barcode       Expected result is some form of "save contact" button.  Actual result is:  Found plain text  N:Firstname Lastname; TEL:5551231234;;  What version of the product are you using? On what operating system?  * ADP with ADP v1.5 * G1 with ADP v1.5 (JF)  Barcode Scanner installed from Market; Version 2.7     Let's see, it looks like it is missing the "MECARD:" in front. But I'm trying it locally and it is generating barcodes that encode text like so:  MECARD:N:Sean Owen;EMAIL:srowen@google.com;;  These work fine, are recognized as contact info.  I looked into this since I recently changed this very code and wondered if my last change actually went in the build and I broke something. For once, it was the opposite. The previous version had a small bug:          mContents = "MECARD:";         ...         if (name != null &amp;&amp; name.length() > 0) {           mContents = "N:" + name + ';';  (last line needs +=)  Anyway, this is actually already fixed in SVN as a result.                 Status: FixedOwner: srowenCc: dswitkin              		g1adrift	sro...@gmail.com
189	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1241557430000	1241592842000	1241592842000	readCodewords() reads out of bounds in some cases	 (Carried over from  issue #183 )  Stack trace says it all -- see also  Issue 183  for an image that causes it.  java.lang.ArrayIndexOutOfBoundsException: 405 	at com.google.zxing.common.BitMatrix.get(BitMatrix.java:60) 	at com.google.zxing.qrcode.decoder.BitMatrixParser.readCodewords(BitMatrixPars er.java:185) 	at com.google.zxing.qrcode.decoder.Decoder.decode(Decoder.java:76) 	at com.google.zxing.multi.qrcode.QRCodeMultiReader.decodeMultiple(QRCodeMultiR eader.java:53) 	at Test183.main(Test183.java:22)     OK, think I got it. In this scenario, of course, the code finds lots and lots of 'false positive' QR codes, sets of 3 finder patterns which aren't related. Once in a while, however, the code partially succeeds in parsing the garbage as a QR code. In this case it gets far enough to read the version and format info from the 'QR code'. The version is wrong, and soon it results in an error. The fix is just to make sure the version info that is read makes any sense -- the dimension of the QR code matches what it should be given the version that was read.        ()                 Status: Fixed              		sro...@gmail.com
194	Defect	Fixed	sro...@gmail.com	tho.krause	1242769448000	1242862622000	1242862622000	C++ compile error in  common/reedsolomon/ReedSolomonDecoder.cpp: use of private count_ instead of count()	   Compiling own source which used QRCodeReader    Should compile  What version of the product are you using? On what operating system? 1.3 on Ubuntu 9.04      also happens in GF256.cpp:59  obviously this only happens when the "DEBUG" macro is somewhere defined        Is this fix to replace ->count_ with ->count()? Or even just to kill all the DEBUG blocks? happy to do that too.        Yes, replacing ->count_ with ->count() is the fix, since you should be able to compile the debug stuff, too. I did that in my code, but there might be some frustration when downloading the release and it doesn't compile. (using DEBUG in you own code is not that uncommon)        OK, try now? just removed those blocks in SVN.                 Status: FixedOwner: srowen              		sro...@gmail.com	tho.kra...@gmail.com
205	Defect	Fixed	sro...@gmail.com	gahamchao	1246974305000	1267383914000	1267383914000	Can not recognize barcode	 Hi developer team I'm very interested in this project. I've tested with your test data. It's good.  When I print a picture in A4 and use Nokia E63 to capture image, it has never recognized barcode. I tested on some Nokia device, it is the same problem.  I adjust camera parameter: resolution, quality... My phone camera has not macro mode. Please tell me how use this program. Thanks                                  Test1.jpg    240 KB      &nbsp; View    &nbsp; Download                                                              Test2.jpg    251 KB      &nbsp; View    &nbsp; Download                                         i noticed a similar problem with generated QRCode but i am sure its not the cam, as i save the generated code and try to decode it by txing again, and it ends in "no barcode found" i used Mode.BYTE and ErrorCorrectionLevel.M afterwards i tried my own generated QRCode with same content (and settings) and zxing was able to decode it...  i both times encoded 'lumo' [code] code to generate the qrcode from zxing: 		QRCode qrCode = new QRCode(); 		qrCode.setMode(Mode.BYTE); 		qrCode.setECLevel(ErrorCorrectionLevel.M); 		try { 			Encoder.encode(textField.getText(), ErrorCorrectionLevel.M, qrCode); 		} catch (WriterException e) { 			e.printStackTrace(); 		} 		ByteMatrix bm = qrCode.getMatrix(); [/code]  greets                                   generated_zxing.png    19.4 KB      &nbsp; View    &nbsp; Download                                                                generated_LUMO.png    28.1 KB      &nbsp; View    &nbsp; Download                                             The first two Code 39 look pretty good... I think the decoder is getting tripped up by a little bit of grain in the image. I am seeing it think there are lots of small transitions between white and black within the white bars. Daniel's next changes to the image processing might help. Yeah, this should be decodable but isn't going to quite work this second.  The other, looks like a problem with the encoder. The decoder thinks it is using error correction level Q for some reason and so fails. That is a good one.        ()                 Owner: srowen               I have a QRCode image that was generated, scanned, then cropped and attempted to be recognized; perhaps it's the issue with the small transitions. Here's the QRCode:                                   hoo1.png    23.1 KB      &nbsp; View    &nbsp; Download                                             (brian.moran: Don't tack on an unrelated issue to an existing one please. First ask  questions in the discussion group, then file an issue here once you're sure it's an issue.)  This is an invalid QR code; it is a mirror image of a valid code. When flipped it decodes  as 67a9bae29c02cb0327e7bd4dda8a9b323d7565ca         Just looking at this again -- good news is it was fixed. Really, the issue was the  generated QR code was mirrored (!). I believe that was addressed some time ago. So  Brian's comment was, actually, relevant I think. My bad there.  I regenerated the barcode as above and it gives the right result.  I also committed a related change that addresses the issue in finding the right format  info even in problem cases like this.                 Status: Fixed              		brian.mo...@gmail.com	dswit...@gmail.com	gahamc...@gmail.com	lumo2...@gmail.com	sro...@gmail.com
208	Defect	Fixed	sro...@gmail.com	frederic.caplet	1247704600000	1247769056000	1247769056000	Mismatch between Accentuated char and Kanji	   1. Qr Code g¨¦n¨¦rator. 2. Select Text for content. 3. Insert 'fr¨¦d¨¦ric' and Generate it 4. Decode it with android BarCode Scanner 2.9    'fr¨¦d¨¦ric' should be decoded instead of fr¥Æd¥Æ¥¦ric.  What version of the product are you using? On what operating system? QrCode generator from tjis site. Android 1.5. BarCode Scanner 2.9.        Specification said that if the leading byte is in range 0x81 to 0x9F (ok this range is non printable characters in ISO-8859-1) or range of 0xE0 to 0xEB (this is where the problem should lie because this range contain lower case accentuated characters ) ... the encoded character should be encoded by 'Kanji mode compaction scheme'.  Maybe the encoding process test this assertion while the string to convert is still in ISO-8859-1. This test should be done after the string convertion to Shift JIS.  because of course '¨¦' is part of ISO-8859-1 charset. (0xE9)  But this assertion can be all wrong :) (PS: sorry for my bad english)         Yeah this is a good example. It is definitely ISO-8859-1, but also has characteristics  that make it valid Shift_JIS too. I don't have a good solution for this, other than to  further tweak the guessing algorithm a little to get this right.                 Status: FixedOwner: srowen              		frederic...@gmail.com	sro...@gmail.com
215	Defect	Fixed	sro...@gmail.com	serveravanrell	1248111630000	1248115218000	1248115218000	1x1 pixel module QRCode won't decode	   1. Encode two QR Codes, both of them content "test" and the difference between them is their module size. Image1's module size is 1x1 pixel, Image2's module size is 2x2 pixel. 2. Try to decode with ZXing Decoder Online 3. Image1 won't decode, Image2 decodes.    Should decode both.  I've been playing around encoding and decoding QR Codes and I found that your decoder won't decode the smallest QR Code I created. The QR Code is correct, it decodes even if you make it bigger by resizing it with paint.  I think it won't decode because the QR Code module is just too small and it doesn't detect such small modules, I know it's just a rare case I just wanted to let you know, which you probably already do.  Attached 2 files:  Test1.png: Encodes "test", Version 1, 29x29 pixel (21x21 module + 8 quiet zone). Won't decode.  Test2.png: Encodes "test", Version 2, 58x58 pixel [(21x21 module + 8 quiet zone) * 2]. Decodes.                                 Test1.png    223 bytes      &nbsp; View    &nbsp; Download                                                              Test2.png    280 bytes      &nbsp; View    &nbsp; Download                                         Test2.png's version is 1, not 2. Encodes "test", Version 1, 58x58 pixel [(21x21 module + 8 quiet zone) * 2].  By the way, I just realized ZXing Decoder Online shows more info (raw text, raw bytes, etc.) if you decode a barcode from URL and if you decode a barcode from an uploading file just shows the result.        That's a good report. It highlighted a way in which the detector could be simplified,  and reject a few less images that could actually be decoded. I just committed changes  that will cause this to decode, and overall improved accuracy very slightly.                 Status: FixedOwner: srowen              		serverav...@gmail.com	sro...@gmail.com
216	Defect	Fixed	dswit...@gmail.com	fabian.odoni	1248144755000	1250810416000	1260929439000	LED Flash blinks on Samsung Galaxy	   1. Start Barcode Scanner in not perfectly bright environment 2. Rumors about deactivating "Beep" to resolve problem could not be confirmed 3.    Expected: Scan a barcode, adjusting to light settings and autofocus Instead: LED Flash blinks in a round 2 second interval preventing any outufocus or scanning. This can be prevented by pointing the camera towards a bright light source while starting up the program but prevents any brightness adjustments. Meaning: Scanning a barcode on the computerscreen will work if pointed to screen before and while startup. Scanning a product eg in a shop results in blinking LED flash. Holding the camera towards the light stops the blinking but picture is then too dark to scan.  What version of the product are you using? On what operating system? v2.9 on Samsung Galaxy (I7500) running Android 1.5         Hmm, it sounds like the device is automatically using the flash when it thinks lighting is too low. Is that a bad thing -- yes, it is probably going to take extra time. I don't see a way to control this in the Android APIs. Daniel, over to you, but is it something we can even control?                 Owner: dswitkin               I'll ask the team.                 Status: Accepted               OK, I've checked in a camera parameter to disable the flash. The Samsung doesn't appear to honor this flag at  the moment though. I'll continue to follow up on that internally. But I'm going to close out the ZXing side of this  bug.                 Status: Fixed                Issue 218  has been merged into this issue.        Posted the correct (and tested) camera parameter in  issue 218 . Would like to see it soon in a next version on market. Have my own builded scanner on phone and it works.        Interestingly, you suggest enabling the flash (I think) while this issue suggests  disabling it. Daniel reports that it doesn't do anything though? which suggests it is  always using the flash?  So, marcus what does your change do, enable the flash? It sounds like that is always  on anyhow or something?  I am not convinced that we shouldn't just let the hardware do what it thinks best,  just as we let the hardware focus and set brightness, white balance. I don't see that  it's always best to disable, or enable, the flash.  Daniel, others, thoughts?        No I also suggest disabling the flash.  We have to DISABLE the flash. Because if you try to scan a barcode you have to go really near to the surface. And on this short distance the flash is simply too bright! So we can't let the hardware do what it thinks best...  My change DISABLES the flash. The change of Daniel has no effect, because it is the wrong parameter.  My change works (tested it on my phone)! At least for the Samsung Galaxy (I7500). Don't know how the parameter has to look like for future devices.  Use this line: parameters.set("flash-value", 2);        Thanks Marcus. I'm checking with the Android team about this.                 Status: Accepted               When I'm using the scanner it won't stop flashing even if I point it towards light. I  have to restart application and point towards better light for it to work again. Tried it after reboot and also after factory restore but still the same problem.        I get it now. Yes this makes sense to me.         I've just released version 2.91 with a fix for the flash, which has been tested successfully on a Galaxy.                 Status: Fixed               Thank you!        Still having the blinking flash problem with 2.91 (galaxy phone).        Correct, tested again and problem is still there because of the wrong parameter. Why don't you use the  parameter I've written some posts above? That is the correct one, got from built in camera of the galaxy  and tested by me...        Still having the same problem too with 2.91 and a samsung galaxy.        That is the value Daniel ended up using... well, Daniel I notice you put the String "2" in rather than the int  primitive 2. Is there some possible issue there?  But I also know you say you tested this and it works. 2.91 is in the market now so I am assuming all here truly  are updated to 2.91, and that's not the issue.        The current source says:  flash-mode  but it has to be  flash-value  !        I'm not sure what's going on here, but we will get it fixed. I don't personally have a device to test on which is the  biggest problem. Hang in there a little longer.                 Status: Accepted               I've made a new beta using both of these:      parameters.set("flash-value", 2);     parameters.set("flash-mode", "off");  Marcus, can you install the attached 2.92b1 APK and let me know if it disables the flash?                                   BarcodeScanner2.92b1.apk    266 KB      &nbsp; Download                         It works fine now.  The flash is disabled with this version on my Samsung Galaxy.        Yes, works now.        Thanks guys, I appreciate your help. Version 2.92 is now on the Market.                 Status: Fixed               Can you make it a setting if you want the flash on or not in the barcode scanner? Cause  i really want to have the flash on.       		Fredrik....@gmail.com	dswit...@gmail.com	elfro...@gmail.com	fabian.o...@gmail.com	marcus.t...@gmail.com	peterryt...@gmail.com	sro...@gmail.com	stephane...@gmail.com
221	Defect	Fixed	sro...@gmail.com	max.christian	1249318014000	1249322002000	1252940391000	Contribution of fix for C# port	 Lines 430-432 of svn/trunk/csharp/oned/Code128Reader.cs should be changed to read as below.  (The code there at the moment doesn't  work at all.)                result.Remove(resultLength - 2, 2);           } else {               result.Remove(resultLength - 1, 1);      Thanks, just committed this.                 Status: FixedOwner: srowen               hi christian ,  have you developed qrcode reader using c# port??  if used can you please tell me which type of application you made ..   i am trying to buid the QR reader for HTC windows base OS but Stucked with the error "indexoutofbound"..  can you please help me ...  Thanks in advance, shailesh.        Hello Shailesh, I remember hitting the same thing I think, but I switched to Code 128 barcodes instead  so never had to fix it.  The C# port has been machine translated and not really  debugged so you do hit a lot of problems. Max        Hi  I have ported full Java Latest ZXING on .Net C# (belive me i spend only 25 mins for  this porting). 1D are working fine.  The issue for DATAMATIX i faced is   public DetectorResult detect() throws ReaderException where it thows indexoutofbound exception.  /* Figure out which point is their intersection by tallying up the number of times  we see the endpoints in the four endpoints. One will show up twice.*/  Hashtable pointCount = new Hashtable();  increment(pointCount, lSideOne.getFrom());  increment throws this exception. I am looking into this. Will update soon if i am  able to port few things for Datamatrix.         		max.chri...@gmail.com	shailesh...@gmail.com	sro...@gmail.com	suraj.su...@gmail.com
224	Defect	Fixed	sro...@gmail.com	andres.d...@gmail.com	1249982469000	1250014553000	1250829934000	iphone xcode project still has Christian Brunschen's identity	   1. Download clean copy of zxing 2. Open in xcode 3. Set the code signing identity to your own 4. Compile and deploy it on iphone.    It should run without a problem. Instead it gives an error that it cannot find code signing dientity  "Developer: Christian Brunschen". I edited the ZXing.xcodeproject/project.pbxproj and deleted  all lines containing  *PROVISIONING_PROFILE * * is a wildcard here. This allowed me to run Barcodes on the iPhone, but the application did not  remain installed on the phone.  What version of the product are you using? On what operating system? latest zxing available as of this writing, checked out from svn - corresponds to 1.3 tarball, on  Mac OS X 10.6    is there a cleaner way of downloading zxing and building it from source for the iPhone? Instructions would be much welcomed.     Seems reasonable to delete these if it prevents the project from being built in a sort  of development-only mode. I assume that, of course, to really publish the app you need  to fill in your own credentials.  The iPhone build is not supported anymore, so it is what it is. Sounds like it went  pretty smoothly other than this? don't imagine it's terribly hard, but, I have no  experience with this code.                 Status: Fixed               Actually you can just modify the signing identity. Edit the "Barcodes" target info under the Build section. There  your have a Code signing subsection, where you can modify the code signing identity. Be aware that you have to modify it for every configuration.        Thanks Gonzalo! I believe the issue has been fixed. Now when you open it in Xcode,  you can go to Project -> Edit Project Settings under the Build tab, simply search for  "signing" and set both of them to your identity.       		andres.d...@gmail.com	gonzalop...@gmail.com	sro...@gmail.com
227	Defect	Fixed	sro...@gmail.com	bagshawwilliam	1250634499000	1250653849000	1250653849000	Online decode broke. URL not found	   Click on link on main page that says online decoder.    A form should appear. A not found error is shown.  What version of the product are you using? On what operating system? Latest online.    Hi, I saw somewhere you were swapping servers. I can not refind the  message. Sorry if you have left notes about this problem. Please point me  at them. Also this may just be a DNS name propergation thingy. Sorry again  if I am being impatient.     By the way this is NOT a repost of problem 225. This is a different issue.        Exactly it is a problem while moving hosting providers. Of course, the new provider stops working when  I switch. Working with them to figure out what broke. Sorry this is provided as is and I would not rely on  it.                  Status: AcceptedOwner: srowen               Thanks for your efforts on this. I tried to install the pages on my site but I did  not have the jspx support. I have PHP but I think the engine is server side java,  from what I can tell. Anyone have any ideas about getting jspx working on a linux  based VPS server? I assume I can get shell access as root. No idea what to do next.        I modified the site to require only JSP 1.2 / Servlet 2.3, which will work on old Tomcat 4. So that at least reduces  the requirements from JSPX / JSP 2.1. You just need to run tomcat and place the resulting w.war file in  webapps/. That's about it, though you might wish to further configure and harden the Tomcat server from there.        It's back up now, problem resolved.                 Status: Fixed              		bagshaww...@googlemail.com	sro...@gmail.com
228	Defect	Fixed	sro...@gmail.com	timvryenhoef	1250659549000	1251332963000	1251332963000	Not working after 1st scan on HTC Hero	 Hi for around 3 weeks I've been successfully using the zxing scanner on my HTC Hero and it worked very well. However today I have downloaded the upgraded version 2.91 (19 Aug '09) and the scanner will now only scan the 1st barcode and then not recognise any further barcodes, including the 1st one which was successfully recognised a few seconds before. If I Power Off and On the phone the scanner works again for the very 1st scan but no others. I have removed a load of apps in case there was a memory issue but this doesn't seem to make any difference  Can you help as it is now redundant for anything other than the very 1st scan.      By the way having now read thread 219, which doesn't seem to have been resolved I can confirm the same problem occurs if I power on and only use via the Google web browser barcode scan button or only via the zxing icon on my homepage. It was never a problem before I downloaded v2.91 when I could scan multiple barcodes without the issue occurring.  Hope this helps?        That doesn't quite sound like the same thing as 219, where the strange issue was always immediately opening  some URL. Sounds interesting, I'll leave it open for comment, but I can't reproduce on a Hero or G1 here.        Okay, still having major problems with 2.91 onwards on the HTC Hero. After 1 or 2 scans the recognition completely fails even when held at exactly the same position over the same barcode that scanned 1st go. I've now downloaded Compare Everywhere which uses v2.?? of your code and it works 100% of the time everytime of all the barcodes I can find. I'm concluding that the Galaxy fix to change lighting etc has inadvertently affected the smooth running on the HTC Hero. To prove or disprove this theory could you (i) provide a download to the older version without the Galaxy fix so I can install and test and (ii) check what version of zxing code the compare everywhere software is currently running as this is perfect 100% of the time.  Many thanks,  Tim        I've now installed an older version that 2.91 back onto my HTC Hero and it is now back to normal scanning everything 100% of the time so I would suggest the 2.91 release did introduce a problem of some description for the HTC Hero.        I think none of us have a Hero to test with. Any chance you can use 'adb logcat' to capture logs from the device  at the time it is failing scanning? Maybe that points to a cause. If you're really up for it and have the dev tools,  you could even try determining where the ReaderException is thrown with a debugger.        I'm seeing the same thing (first scan ok... then does not work) with version 2.92 on HTC Magic.        Weird. I have a G1 and don't see this. I don't see it on a friend's Magic either. There's some issue here but  unclear what is causing it. Not sure what we can do until we can reproduce, but will not close since there seems  to be something up here. If anyone can snatch a log, or provide any clues from a debug session, it would be  greatly appreciated.        Just tried it again: sometimes I can get quite a few scans (4 +) before it ceases to work. I thought it might have to do with the flip over to the web view for search: but can't find a pattern there either. I'm scanning standard grocery EAN codes.  Phone is HTC Magic Vodafone branded, CRC1 build. Barcode app version 2.92. 1D &amp; QR Codes enabled.         I am now also able to reproduce this occasionally. I also don't see the pattern. I'll dig in with the debugger and  more logs now that I can see it is possible to reproduce.        After digging in I understand where the issue is -- something to do with the preview  frame callback never returning at a certain point. The way this is handled was changed  not too long ago and while the current approach ought to work, this is addressable by  reversing the small change. Consulting with Daniel about how best to proceed, maybe the  platform guys want to look at this.                 Status: AcceptedOwner: srowen               I've filed a bug with the Android team. In the mean time reverting to the old method is the right thing to do.        Cool, then it's fixed in SVN.                 Status: Fixed              		dswit...@gmail.com	jdesbon...@gmail.com	sro...@gmail.com	timvryen...@googlemail.com
230	Defect	Fixed	sro...@gmail.com	goo...@cilnu.com	1251006273000	1251042661000	1251042661000	ArrayIndexOutOfBounds	 When a qrcode has binary data with byte 0xc2 in the last place and exception is thrown: java.lang.ArrayIndexOutOfBoundsException: 10         at com.google.zxing.qrcode.decoder.DecodedBitStreamParser.guessEncoding(DecodedBitStreamParser.java:271)  To fix, line 267:       if (value == 0xC2 || value == 0xC3 &amp;&amp; i < length - 1) { needs parentheses added:       if ((value == 0xC2 || value == 0xC3) &amp;&amp; i < length - 1) { because in Java &amp;&amp; has higher precedence than ||      Nice one, fixed                 Status: FixedOwner: srowen              		goo...@cilnu.com	sro...@gmail.com
234	Defect	Fixed	sro...@gmail.com	QRMeQRCode	1251585997000	1251918951000	1251918951000	Online barcode decoder broken	    1. Goto http://code.google.com/p/zxing/ 2. Click on Links: Online decoder 3.  404 - Page not found error    Expecting to see a page to enter a URL to decode a QR code.  Thanks guys  Ian. QRMe                                 zxing_error.jpg    19.0 KB      &nbsp; View    &nbsp; Download                                         Thanks. We're changing hosts and this may be down for a week or two. We'll close out the bug when it's running  again.                 Summary: Online barcode decoder brokenStatus: AcceptedOwner: srowen               I moved us to Amazon EC2 temporarily while we figure out a long-term hosting provider. It's working now.                 Status: Fixed              		QRMeQRC...@gmail.com	dswit...@gmail.com	sro...@gmail.com
240	Defect	Fixed	sro...@gmail.com	kostisalex	1253664115000	1253690824000	1254115621000	greek encoding	 when i encode a greek word i get a wrong png image that cannot be decoded. I do not have any problems with latins. Which parameter should i change in order to make decodable greek qrcodes? thanks       Are you saying the QR Code itself can't be decoded? and are you using this project to encode, decode, or  both?  If you mean it decodes, but the text is not what is expected - QR codes do not quite support encodings other  than ISO-8859-1 (and Kanji, via Kanji mode). In theory you can inject an ECI segment that specifies encoding,  but this is virtually undocumented and not well supported. Your best bet is to use UTF-8. You can use 'hints'  to specify this to our encoder, which will inject an ECI segment for UTF-8. Whether it works or not depends on  the decoder. Our decoder should also be reasonably good at auto-detecting UTF-8 as well, with or without  ECI.  But of course all this doesn't make a difference if your target platform doesn't have glyphs (a font) for Greek  characters.  Assign back with information.                 Status: Invalid               First of all, thanks for your immediate response. I use the code to encode. But when the String content is a greek word then the resulting image cannot be decoded (error while scanning). i use this code:                          QRCodeWriter qw =new QRCodeWriter(); 	    	 	content= "¦Ã¦Å¦É¦Á"; 	 		Hashtable hints = new Hashtable();		 	 		hints.put(EncodeHintType.CHARACTER_SET, "UTF-8"); 	 		QRCode qrCode = new QRCode(); 	 		//set the correction level 	 	      Encoder.encode(content, ErrorCorrectionLevel.M, hints, qrCode); 	 	    //create the matrix to be encoded 	 		ByteMatrix matrix = qw.renderResult(qrCode, 256, 256);	 	 		//create the image from the matrix    	 	 		BufferedImage image = createImageFromMatrix(matrix); Thanks again!        ()                                   qr.png    1.0 KB      &nbsp; View    &nbsp; Download                                             Got it, let me look into it. Failing to decode at all is probably not to do with the Greek text, but let me look.                 Status: AcceptedOwner: srowen               So far I think the problem is with the encoder -- it looks like it's not properly indicating that the data is 8  bytes long -- says it's 4. I imagine there is some goof in counting characters versus bytes. The UTF-8  encoding of these chars is of course 8 bytes, not 4.  In the meantime, you can try specifying encoding "ISO8859_7". That may work since it will select the ISO  encoding for Greek, which is a single-byte encoding. But I will look at the underlying problem.  The only issue with using UTF-8, which I am already seeing while debugging, is that there isn't an ECI value  for it so it can't be specified. Decoders must guess, and I think these bytes will also decode as Shift_JIS, and  our decoder (and others likely) will prefer to guess Shift_JIS. So it may be the ISO8859_7, if it works, is the  better choice.  But, some decoders might barf on an ECI segment, even though it's part of the spec.  It is unfortunately problematic to encode non-Latin characters in a QR code (except for Kanji which has its  own mode).        Hmm, are you using the latest code? When I generate a QR code for this I get a different code, that does appear  to work. I wonder if there was some issue fixed in recent history that explains the difference.        i use the code that i downloaded one week ago. is not this the latest one? i would likw mainly to thank for your interest. i am gratefull. I tried to use: hints.put(EncodeHintType.CHARACTER_SET, "ISO8859_7"); but with not too much improvement . Instead of "¦Ã¦Å¦É¦Á" only the last letter appears correctly with two squares(??) in front of it. Is there a more rescent code? Thanks again for your tips.                                   qr2.png    1.0 KB      &nbsp; View    &nbsp; Download                                             Have you got the latest code from subversion, rather than the 1.3 release? While I don't specifically recall a fix  here, it has been a while since 1.3 was released, so perhaps there was a fix since then that I have that you don't  in that release.  That change indicates it's working more -- the ?? is more a function of the browser or device you have not being  able to display the characters? which decoder are you using and how are you decoding?        i am using the i-nigma tool in my samsung omnia mobile. to be honest i havent get the latest code from subversion. i'll try it and i will inform you. Regards         OK good, try the latest code.  Also try sending the result to our online decoder -- http://zxing.org/w/decode.jspx  I think i-nigma is decoding it fine, just that your handset maybe can't display the Greek characters? this  browser-based decoder ought to not have that issue.        (Tentatively closing but open again if there is still an issue)                 Status: Fixed               in a previous message you told me that "When I generate a QR code for this I get a different code, that does appear to work". That means that the greek encoding worked for you? what code did you use in order to produce the qr image. could you please send me this lines? thanks again.        Yes, I picked UTF-8 encoding and it produced a different, correct encoding. It is the same code you use -- you  have it right. Just, perhaps that I am using the latest code in Subversion. Have you tried your code with the latest  in Subversion?        thanks so much. i did ittttttt... i run the latest src but i had to change the code a little. this is what i used:                       QRCodeWriter qw =new QRCodeWriter(); 	    	//this is the parameter that will be encoded 	 	    String content = "¦Ã¦Å¦É¦Á ¦Ö¦Á¦Ñ?" 	 	   	 	    //set the character encoding 	 		Hashtable hints = new Hashtable();		 	 		hints.put(EncodeHintType.CHARACTER_SET, "UTF-8"); 	 		QRCode qrCode = new QRCode(); 	 		//set the correction level 	 	    Encoder.encode(content, ErrorCorrectionLevel.M, hints, qrCode); 	 	    //create the matrix to be encoded 	 	  	ByteMatrix matrix = qw.renderResult(qrCode, 256, 256);	 	 	    	 	    //create the image from the matrix    	 	 		BufferedImage image = toBufferedImage(matrix); 	 		 	 ---------------------------------------------------------------------- public static BufferedImage toBufferedImage(ByteMatrix matrix) {     	int WHITE = 0x00000000;     	int BLACK = 0x00FFFFFF;          int width = matrix.getWidth();         int height = matrix.getHeight();         BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);         for (int x = 0; x < width; x++) {           for (int y = 0; y < height; y++) {             image.setRGB(x, y, matrix.get(x, y) == 0 ? WHITE : BLACK);           }         }         return image;       }  ---------------------------------------------------------------------- Dear sro... thanks so much for your great help. i really appreciate it. I wish from the bottoms of my heart every program you make now on to be perfect and bugless.  Wishes from greece. ¦²¦Å ¦Ö¦Á¦É¦Ñ¦Å¦Ó?        		kostisa...@gmail.com	sro...@gmail.com
249	Defect	Fixed	sro...@gmail.com	franck.serot	1255370192000	1255400130000	1277133343000	[J2ME] Build Failed	   1. build core 2. build J2ME application 3.    build success  What version of the product are you using? On what operating system? latest source code     Below this is build log :  Buildfile: N:\workspace-ganymede\zxing-javame\build.xml init: build:     [unzip] Expanding: N:\workspace-ganymede\zxing-core\core.jar into N:\workspace-ganymede\zxing-javame\build      [copy] Copying 1 file to N:\workspace-ganymede\zxing-javame\src\com\google\zxing\client\j2me       [jar] Building jar: N:\workspace-ganymede\zxing-javame\BarcodeReader.jar      [move] Moving 1 file to N:\workspace-ganymede\zxing-javame      [java] ProGuard, version 4.4      [java] Reading input...      [java] Reading program jar [N:\workspace-ganymede\zxing-javame\temp.jar]      [java] Reading library jar [C:\WTK2.5.2\lib\cldcapi11.jar]      [java] Reading library jar [C:\WTK2.5.2\lib\midpapi20.jar]      [java] Reading library jar [C:\WTK2.5.2\lib\mmapi.jar]      [java] Note: duplicate definition of library class [javax.microedition.media.protocol.DataSource]      [java] Note: duplicate definition of library class [javax.microedition.media.MediaException]      [java] Note: duplicate definition of library class [javax.microedition.media.Player]      [java] Note: duplicate definition of library class [javax.microedition.media.Controllable]      [java] Note: duplicate definition of library class [javax.microedition.media.PlayerListener]      [java] Note: duplicate definition of library class [javax.microedition.media.Manager]      [java] Note: duplicate definition of library class [javax.microedition.media.Control]      [java] Note: there were 9 duplicate class definitions.      [java] Note: duplicate definition of library class [javax.microedition.media.control.VolumeControl]      [java] Note: duplicate definition of library class [javax.microedition.media.control.ToneControl]      [java] Reading library jar [C:\WTK2.5.2\lib\jsr234.jar]      [java] Initializing...      [java] Warning: com.google.zxing.qrcode.detector.FinderPatternFinder: can't find referenced method 'java.lang.Object get(int)' in class java.util.Vector      [java] Warning: com.google.zxing.qrcode.detector.FinderPatternFinder: can't find referenced method 'java.lang.Object remove(int)' in class java.util.Vector      [java] Warning: com.google.zxing.datamatrix.detector.Detector: can't find referenced method 'java.lang.Integer valueOf(int)' in class java.lang.Integer      [java] Warning: com.google.zxing.common.CharacterSetECI: can't find referenced method 'java.lang.Integer valueOf(int)' in class java.lang.Integer      [java] Warning: there were 4 unresolved references to program class members.      [java]          Your input classes appear to be inconsistent.      [java]          You may need to recompile them and try again.      [java]          Alternatively, you may have to specify the options       [java]          '-dontskipnonpubliclibraryclasses' and/or      [java]          '-dontskipnonpubliclibraryclassmembers'.      [java] java.io.IOException: Please correct the above warnings first.      [java] 	at proguard.Initializer.execute(Initializer.java:308)      [java] 	at proguard.ProGuard.initialize(ProGuard.java:210)      [java] 	at proguard.ProGuard.execute(ProGuard.java:85)      [java] 	at proguard.ProGuard.main(ProGuard.java:499)  BUILD FAILED N:\workspace-ganymede\zxing-javame\build.xml:107: Java returned: 1  Total time: 3 seconds      Good catch, looks like some recent changes ended up using methods not found in MIDP 2. I fixed these.                 Status: FixedOwner: srowen               I think i am at the same point with a similar problem ...     [java] Initializing...      [java] Warning: com.google.zxing.oned.OneDReader: can't find referenced method 'java.lang.Object clone()' in class java.util.Hashtable      [java] Warning: there were 1 unresolved references to program class members.      [java]          Your input classes appear to be inconsistent.      [java]          You may need to recompile them and try again.      [java]          Alternatively, you may have to specify the options      [java]          '-dontskipnonpubliclibraryclasses' and/or      [java]          '-dontskipnonpubliclibraryclassmembers'.      [java] java.io.IOException: Please correct the above warnings first.      [java]     at proguard.Initializer.execute(Initializer.java:308)      [java]     at proguard.ProGuard.initialize(ProGuard.java:210)      [java]     at proguard.ProGuard.execute(ProGuard.java:85)      [java]     at proguard.ProGuard.main(ProGuard.java:499)  BUILD FAILED C:\Daten\Workspace\zxing\javame\build.xml:112: Java returned: 1        Good one, I fixed this too. I guess Hashtable.clone() doesn't exist in J2ME.        Still got the same error  platform:windows xp java version "1.6.0_17" Java(TM) SE Runtime Environment (build 1.6.0_17-b04) Java HotSpot(TM) Client VM (build 14.3-b01, mixed mode, sharing)   Java_ME_platform_SDK_3.0 this SDK only contains "jsr135_1.1.jar" no "jsr135_1.2.jar", how to get one?    my log:  E:\zxing\source\javame>ant Buildfile: E:\zxing\source\javame\build.xml  init:  build:     [javac] E:\zxing\source\javame\build.xml:90: warning: 'includeantruntime' wa s not set, defaulting to build.sysclasspath=last; set to false for repeatable bu ilds     [unzip] Expanding: E:\zxing\source\core\core.jar into E:\zxing\source\javame \build      [copy] Copying 192 files to E:\zxing\source\javame\build-j2me      [copy] Copying 1 file to E:\zxing\source\javame\src\com\google\zxing\client \j2me       [jar] Building jar: E:\zxing\source\javame\BarcodeReader.jar      [move] Moving 1 file to E:\zxing\source\javame      [java] ProGuard, version 4.4      [java] Reading input...      [java] Reading program jar [E:\zxing\source\javame\temp.jar]      [java] Reading library jar [D:\Java_ME_platform_SDK_3.0\lib\cldc_1.1.jar]      [java] Reading library jar [D:\Java_ME_platform_SDK_3.0\lib\midp_2.0.jar]      [java] Note: duplicate definition of library class [java.io.ByteArrayOutput Stream]      [java] Reading library jar [D:\Java_ME_platform_SDK_3.0\lib\jsr135_1.2.jar]       [java] Note: duplicate definition of library class [javax.microedition.medi a.Control]      [java] Note: duplicate definition of library class [javax.microedition.medi a.Controllable]      [java] Note: duplicate definition of library class [javax.microedition.medi a.Manager]      [java] Note: duplicate definition of library class [javax.microedition.medi a.MediaException]      [java] Note: duplicate definition of library class [javax.microedition.medi a.Player]      [java] Note: duplicate definition of library class [javax.microedition.medi a.PlayerListener]      [java] Note: duplicate definition of library class [javax.microedition.medi a.control.ToneControl]      [java] Note: duplicate definition of library class [javax.microedition.medi a.control.VolumeControl]      [java] Reading library jar [D:\Java_ME_platform_SDK_3.0\lib\jsr234_1.0.jar]       [java] Initializing...      [java] Note: there were 9 duplicate class definitions.      [java] Warning: com.google.zxing.oned.rss.expanded.RSSExpandedReader: can't  find referenced method 'boolean add(java.lang.Object)' in class java.util.Vecto r      [java] Warning: com.google.zxing.oned.rss.expanded.RSSExpandedReader: can't  find referenced method 'java.lang.Object get(int)' in class java.util.Vector      [java] Warning: com.google.zxing.oned.rss.expanded.BitArrayBuilder: can't f ind referenced method 'java.lang.Object get(int)' in class java.util.Vector      [java] Warning: there were 3 unresolved references to program class members .      [java]          Your input classes appear to be inconsistent.      [java]          You may need to recompile them and try again.      [java]          Alternatively, you may have to specify the options      [java]          '-dontskipnonpubliclibraryclasses' and/or      [java]          '-dontskipnonpubliclibraryclassmembers'.      [java] java.io.IOException: Please correct the above warnings first.      [java]     at proguard.Initializer.execute(Initializer.java:308)      [java]     at proguard.ProGuard.initialize(ProGuard.java:210)      [java]     at proguard.ProGuard.execute(ProGuard.java:85)      [java]     at proguard.ProGuard.main(ProGuard.java:499)  BUILD FAILED E:\zxing\source\javame\build.xml:124: Java returned: 1  Total time: 6 seconds            Got those too, thanks       		Nick...@gmail.com	franck.serot	mp3ra...@googlemail.com	sro...@gmail.com
254	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1255922050000	1256003845000	1256003845000	History crashes in 3.0 beta 1	 10-19 10:01:00.781 D/AndroidRuntime( 1667): Shutting down VM 10-19 10:01:00.781 W/dalvikvm( 1667): threadid=3: thread exiting with uncaught exception  (group=0x4001b178) 10-19 10:01:00.781 E/AndroidRuntime( 1667): Uncaught handler: thread main exiting due to uncaught  exception 10-19 10:01:00.791 E/AndroidRuntime( 1667): android.database.sqlite.SQLiteException: no such column:  format: , while compiling: SELECT text, format FROM history ORDER BY timestamp DESC 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteProgram.native_compile(Native Method) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:59) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:49) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1220) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1107) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1065) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1142) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.google.zxing.client.android.history.HistoryManager.getHistoryItems(HistoryManager.java:59) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.google.zxing.client.android.history.HistoryManager.buildAlert(HistoryManager.java:77) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.google.zxing.client.android.CaptureActivity.onOptionsItemSelected(CaptureActivity.java:275) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.app.Activity.onMenuItemSelected(Activity.java:2170) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:139) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:525) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at android.view.View.onTouchEvent(View.java:4179) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.widget.TextView.onTouchEvent(TextView.java:6532) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.view.View.dispatchTouchEvent(View.java:3709) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.view.ViewRoot.handleMessage(ViewRoot.java:1690) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at android.os.Handler.dispatchMessage(Handler.java:99) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at android.os.Looper.loop(Looper.java:123) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  android.app.ActivityThread.main(ActivityThread.java:4310) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at java.lang.reflect.Method.invokeNative(Native Method) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at java.lang.reflect.Method.invoke(Method.java:521) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 10-19 10:01:00.791 E/AndroidRuntime( 1667): 	at dalvik.system.NativeStart.main(Native Method)     ()                 Summary: History crashes in 3.0 beta 1               This may only be happening when upgrading from a 3.0 alpha build. Sean, did the database schema change?  Can you patch the code to upgrade from the older format?        What if you uninstall? that column should be there.         I've heard that uninstalling, then reinstalling beta 1 directly works. Lots of users had one of the alphas though. Is  there an easy workaround?        Here's what happened -- basically I changed the database format from one version to the next, and didn't  update the DB number. Oops. I guess I didn't really understand that lots of people had started using the initial  version, so, kept counting the new version as "1".  One fix is to up the number, of course, and put out a new build. The update should happen automatically,  since the process is just to delete the DB and start again. This doesn't fix it for people with the current build - - that needs an uninstall. But I'll make the change so that people upgrading from beta 1 to beta 3 (or final  version) don't see a problem.  This doesn't ultimately affect end users who never saw the intermediate version anyhow.                 Status: Fixed               I'm getting reports of crashing running beta2. It looks like an upgrade problem only but I'm not sure which  path. Is there anything we can do about this?  E/AndroidRuntime( 3631): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.zxing.client.android/com.google.zxing.client.android.CaptureActivity}: android.database.sqlite.SQLiteException: table history already exists: CREATE TABLE history (id INTEGER PRIMARY KEY, text TEXT, format TEXT, display TEXT, timestamp INTEGER); E/AndroidRuntime( 3631):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2454) E/AndroidRuntime( 3631):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2470) E/AndroidRuntime( 3631):        at android.app.ActivityThread.access$2200(ActivityThread.java:119) E/AndroidRuntime( 3631):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1821) E/AndroidRuntime( 3631):        at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 3631):        at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 3631):        at android.app.ActivityThread.main(ActivityThread.java:4310) E/AndroidRuntime( 3631):        at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime( 3631):        at java.lang.reflect.Method.invoke(Method.java:521) E/AndroidRuntime( 3631):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) E/AndroidRuntime( 3631):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) E/AndroidRuntime( 3631):        at dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime( 3631): Caused by: android.database.sqlite.SQLiteException: table history already exists: CREATE TABLE history (id INTEGER PRIMARY KEY, text TEXT, format TEXT, display TEXT, timestamp INTEGER); E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method) E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1609) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.history.DBHelper.onUpgrade(DBHelper.java:56) E/AndroidRuntime( 3631):        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:108) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.history.HistoryManager.trimHistory(HistoryManager.java:130) E/AndroidRuntime( 3631):        at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:148) E/AndroidRuntime( 3631):        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) E/AndroidRuntime( 3631):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)                 Status: Accepted               Hm, onUpgrade() does this:    @Override   public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {     sqLiteDatabase.delete(TABLE_NAME, null, null);     onCreate(sqLiteDatabase);   }  (onCreate() then makes the table anew) I guess the delete doesn't work, but don't see why. Otherwise I can't figure out why the table would exist.  I'll look at it but by far the easiest workaround for folks is to go into app management and delete the app  data. (Or reinstall.)        Oh wait, I get it now after rereading the API. This just deletes rows from the table. I will find the right way to  drop a table and commit ASAP.        Think I got it now                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
263	Defect	Fixed	sro...@gmail.com	dswit...@gmail.com	1257025744000	1257175290000	1270864048000	Barcode Scanner force closes on Samsung Moment	 This is a tracking bug. We don't have the crash log yet.     I loved this app. But it doesn't work on Moment.....        If you can reproduce the crash, then run 'adb logcat' and capture the output it would very helpful.        Attaching logcat output and relevant part of traces.txt.  Thanks!                                   logcat.txt    9.4 KB      &nbsp; View    &nbsp; Download                                            traces.txt    2.6 KB      &nbsp; View    &nbsp; Download                         The issue is the preview format is not supported: "yuv422i"  At the least I can commit a change that would make this situation clearer.  Daniel you think it's safe to guess this is in fact an interleaved YUV format? that's sort of what the code looks for  now, "yuv422i-yuyv". I'm guessing it's reasonable given the name.                                   Issue_263.patch    894 bytes      &nbsp; View    &nbsp; Download                         Yeah, the patch looks OK. Just please add a comment including the current string I'm using, and that we  specifically changed this for compatibility with this device.        Hang on, that's not it:  preview-format=yuv420p  Look at this:  E/AndroidRuntime( 3275): java.lang.IllegalArgumentException: Source must be non-null. E/AndroidRuntime( 3275): 	at com.google.zxing.Binarizer.<init>(Unknown Source) E/AndroidRuntime( 3275): 	at com.google.zxing.common.GlobalHistogramBinarizer.<init>(Unknown  Source) E/AndroidRuntime( 3275): 	at  com.google.zxing.client.android.DecodeThread.access$000(DecodeThread.java:43) E/AndroidRuntime( 3275): 	at  com.google.zxing.client.android.DecodeThread$1.handleMessage(DecodeThread.java:92) E/AndroidRuntime( 3275): 	at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 3275): 	at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 3275): 	at com.google.zxing.client.android.DecodeThread.run(DecodeThread.java:100)        It should be yuv420sp (notice the 's'). I have no idea what yuv420p is.        Oops you're ahead of me already. See my reply on the groups thread.  Why don't we guess this is the same thing and see how it works?        I can confirm that it crashes on the Moment.  It instantly Force Closes.        I'll work on a fix. In the future, let's get folks to run "ZXing Test" from the Android Market and email us the  output of the "Get camera parameters" button.        OK yeah but what about this patch as at least a first step? at least it gets more information, and may well work. It  will stop this cause of the force close too.                                   Issue_263.patch    1.8 KB      &nbsp; View    &nbsp; Download                         Sure, go for it.                 Owner: srowen               Done. If any Moment owners care to check out and build, would be cool. May well just work.        Checking out now. Will give feedback as soon as I can.  Thanks for the quick response on this issue!        Yep, that did it! Worked beautifully.        Good, maybe we can get out a point release for this. Not sure but it kind of looks like this is a bug in the  Moment, maybe we can report it.        ()                 Status: Fixed               Sorry to clutter up this thread, but I literally just got the Moment on Sunday and it's  my first android phone.  How do I install the patch?  I'm not at home right now so I  don't have the USB cable.        You would need to build the latest source code from source and install on your device. Roughly, that's:  1) Build core from core/ with "ant clean build-no-debug" 2) Build android from android/ with "ant" 3) Delete the existing copy of the app from your device 4) "adb reinstall"        Ok.... I don't really know how to do any of that so I'll wait for the official release!        LMAO! (me neither!)         Issue 271  has been merged into this issue.        Barcode Scanner 3.01 is now live on Market with a fix for the Samsung Moment.        I have similar problem with my HTC touch, cant use the barcode scanner.        		acadieme...@gmail.com	blueadept	dswit...@gmail.com	flipara...@gmail.com	frazm...@gmail.com	skratchz...@gmail.com	sro...@gmail.com
265	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1257198126000	1257550488000	1257550488000	The barcode writer is generating inverted images	 All of them. I know we'd looked at this before but somehow the fix is still reversed or something got  crossed.   I think the intent of the encoders is to return a ByteMatrix of luminances, since it's trying to fill it  with 255 and 0. Actually that results in -1 and 0.   The renderer is then interpreting 0 as white... which isn't consistent with the intent of the writers. I  can fix that much.  But I also wonder whether the writers shouldn't just return BitMatrix? That seems to be what the  renderer kind of had in mind (0 = off = white, 1 = on = black). It makes more sense. I might make  this API change.      I committed a change for the immediate issue. I still feel like the encode API should return BitMatrix, not  ByteMatrix, right? Don't see the point in the latter.        PS here is my BitMatrix change. What do folks think, worth it?                                   BitMatrix.patch    21.3 KB      &nbsp; View    &nbsp; Download                         One potential reason for returning bytes is so that an encoder can render antialiased text under the barcode.        True I guess. I'll punt on this.                 Status: Fixed              		dswit...@gmail.com	sro...@gmail.com
272	Defect	Fixed	sro...@gmail.com	integr8e	1258026321000	1258046256000	1258052354000	GenericMultipleBarcodeReader has a logical error in its doDecodeMultiple(...) method	 Library Version: 1104 (trunk)  While writing an example application to test whether I could decode all the barcodes on a coversheet, I came across a bug in the GenericMultipleBarcodeReader class' doDecodeMultiple(...) method.  In its last two recursive calls, it passes the maxX and width, maxY and height variables as the left and width, top and height parameters (respectively) of the call to image.crop(...).  The problem is, image.crop(...) adds each pair together and tests whether the sum is greater than the corresponding width or height of the original BufferedImage, which quickly results in an Exception being thrown since the sum of the max(X|Y) and (width|height) is often greater than the corresponding width or height of the BufferedImage.  If, rather than passing the width determined by doDecodeMultiple(...) to image.crop(...), the difference between the width and maxX is passed, the problem is resolved; likewise, passing the difference between the height and maxY to image.crop(...) ensures the top and height parameters never exceed the BufferedImage's height.  I have attached a patch for GenericMultipleBarcodeReader.java, as well as my example application and the coversheet.                                 GenericMultipleBarcodeReader.java.patch    872 bytes      &nbsp; View    &nbsp; Download                                          ZXingDemo.java    1.2 KB      &nbsp; View    &nbsp; Download                                          Barcode Cover Sheet.jpg    358 KB      &nbsp; View    &nbsp; Download                                         It still seems to miss one of the labels, though.  Can anyone determine a better algorithm?        Yup good one, I committed the change. I'll take a look at your file too.                 Status: FixedOwner: srowen               Yeah there was another little problem that was making it look at he wrong part of the image in one part of the  recursion. Try it now, it gets all 5        That did it!  Thank you for your help.       		integ...@gmail.com	sro...@gmail.com
276	Defect	Fixed	sro...@gmail.com	sro...@gmail.com	1258417452000	1258432533000	1263983262000	Android 2.0 busts the build with: Unable to resolve target 'Google Inc.:Google APIs:4'	 Just posting this even as I figure out where to begin on this. Probably something easy.     Oh OK, that was quick. I see you have to then have the SDK download platform support. Will see how it goes  after that finishes.        With that, and one change to default.properties, works now. I think that change may make it not build with the  1.6 SDK now though, so update everyone.                 Status: FixedOwner: srowen               I get this error for Android SDK: android-sdk_r04-linux_86. Is there something I am missing?        Sounds like you need to install that component using sdk/tools/android.        So, what is the solution?  install 1.6 SDK instead of 2.0  Or modify build.properties?  what is the correct answer? plz let me know....         No, see Daniel's previous comment. You need to run 'android' to install the components  of the 2.0 SDK that you need. If in doubt just install everything.        OK. I got it.  all of Google APIs need to be installed.  \tools\android sdk update or eclipse perference-android click :) i can build the zxing android  thank you for your help.  (but i also encounter error message line 193  <java jar="${WTK-home}/bin/proguard.jar" fork="true" failonerror="true"> )           ... and have you installed Proguard?        Yap. I installed proguard.!!!  it is "ant clean" progblem. (line 193 problem is ant clean problem :) )   http://groups.google.com/group/zxing/browse_thread/thread/e212099edd2543e0/fc69a21169 b190cb?lnk=gst&amp;q=dex+dx+error#fc69a21169b190cb  and then, I met another problem. dx command line error    http://groups.google.com/group/zxing/browse_thread/thread/ca00c576c14dae04/cd52c5b64a 97e3f1?lnk=gst&amp;q=dex+dx+error#cd52c5b64a97e3f1  you can fix dx.bat according to above help article.   and then, I met another problem. dx blah blah error   http://groups.google.com/group/zxing/browse_thread/thread/d1fc90c2384c77f/7ae7ff6ee48 353a7?lnk=gst&amp;q=dx#7ae7ff6ee48353a7  you can fix this problem using build option "--build-no-debug" for builiding core  lib. :)   finally, I made APK. (barscanner-debug.apk) and then uploaded APK to my Droid !!!   (Windows environment  is different from default build XML. Several Fixes are needed.  And this news group solves all of those...)         		dswit...@google.com	ichattop...@gmail.com	sro...@gmail.com	vico...@gmail.com
294	Defect	Fixed	sro...@gmail.com	jason.cipriani	1260316012000	1260347685000	1260413320000	zxing.appspot.com generator contact info only works with zxing barcode scanner.	 The "contact information" QR codes generated by zxing.appspot.com are only interpreted correctly by the zxing Barcode Scanner application.  Google's QR scanner in the iTunes store for iPhone interprets contact info as text if a company name is present.  The Blackberry scanner either interprets it as text or does not recognize the format at all (I am not sure, I have only heard from Blackberry user but do not have the details).  However, the MeCARD format contact info generated at http://www.mskynet.com/static/maestro is recognized by at least the Google scanner on the iPhone, and zxing's scanner on the Droid. I do not know if the Blackberry interprates these correctly but I will find out soon.  What contact info format is zxing's generator using?     By "Google scanner" I mean the one that Google was recommending, which I guess is QuickMark.         It is MECARD as well, and as far as I know, the generator is correct. Provide an example  of what you are trying to encode that isn't working for you, otherwise not much we can  do.                 Labels: -Priority-Medium Priority-Low               Here is one, generated with the zxing generator, that causes problems on iPhone QuickMark, at least:  http://chart.apis.google.com/chart?cht=qr&amp;chs=350x350&amp;chl=MECARD%3AN%3AJason+Cipriani%3BORG%3ACompany%3BTEL%3A5555555555%3BEMAIL%3Ajason.cipriani%40xyz.com%3BADR%3ACity%2C+10001%3BADR%3ACity%2C+10001%3BNOTE%3AThis+is+the+memo.%3B%3B  If the company name is removed the program recognizes it just fine. However, that image reads just fine in the zxing Barcode scanner for Android. I noticed that the generator at mskynet.com does not have a "company name" field for MeCARD. Is company name not part of MeCARD?  I have not tried other iPhone scanners (e.g. NeoReader, BeeTagg, or Barcode). I also do not have any more details on the Blackberry.   I'm sorry I don't have any additional information. When I find out more about the iPhone or Blackberry I will post it here.        By the way, on the topic of misinterpreting barcodes, the zxing barcode scanner for Android seems to ignore the Address 2 field in the contact info generated by the zxing generator. It does not appear in the interpreted data on the phone.        http://202.214.192.60/english/service/imode/make/content/barcode/function/applica tion/addressbook/  Yeah ORG is non-standard. For reasons I forget the decoder supports it, probably  because we saw it in use somewhere. The encoder shouldn't put that in though, in my  opinion. I can change that.  Yes I can also have it read multiple address lines, that's a good idea.                 Status: AcceptedOwner: srowen               ()                 Status: Fixed               Try again now, Yohann just pushed a change that should address both these things, if I  am right.       		jason.ci...@gmail.com	sro...@gmail.com
295	Defect	Fixed	sro...@gmail.com	dwagner00	1260384950000	1285171666000	1285171666000	Encoded QR code doesn't contain second address line.	   1. Enter a bunch of contact info, including a 2nd address line (e.g.  Kirkland, WA 98033 2. Generate QR code 3. Scan QR code, second address line is missing.    Encoded QR code should have the 2nd second address line  What version of the product are you using? On what operating system? I can't tell which zxing I'm using, but it's on MAC OS/X, but I doubt that's  relevant.    Pretty reproducible.     Sorry, what encoder are you using? zxing.appspot.com? locally built?  In any event pretty sure I understand the issues, and they are fixed in Subversion, but  will need to get pushed out.  Yohann, any chance you have a moment to update the generator? I believe I've now  fixed two small items.                 Status: FixedOwner: srowenCc: leppoc dswit...@google.com               Done ! New version is serving now. Thanks.                 Status: Verified               Wow, so it is. Thanks! super fast.  There were really two potential 'issues' here, one in encoding and one in decoding, and  fixing either one resolves 294 and 295. I fixed both, so pushing one should take care of  things. The next client release will just be that more robust then.        ()                 Status: Fixed              		dwagne...@gmail.com	lep...@gmail.com	sro...@gmail.com
298	Defect	Fixed	sro...@gmail.com	joseph.dries	1260835917000	1260846075000	1260846075000	Generational Qualifiers preceded by comma are misinterpreted.	   1. Generate a contact QR code, I used  http://zxing.appspot.com/generator/ 2. Have a generational qualifier in the name. I used "Joseph F. Dries, III" 3. Scan generated QR code    The QR contact should decode as  "Joseph F. Dries, III" instead it decodes as  " III Joseph F. Dries" (note the preceding space, as well as being flipped.)  What version of the product are you using? On what operating system? v3.1b1    Attaching the QR code and v3.1b1 decode.                                 JosephFDriesIII.png    2.1 KB      &nbsp; View    &nbsp; Download                                                              BarcodeDecode_Gen_Qual.png    95.2 KB      &nbsp; View    &nbsp; Download                                         Good point. In the format, a comma separates the first and last name in a "last,first"  form. That's why it's being read this way.   http://www.nttdocomo.co.jp/english/service/imode/make/content/barcode/function/a pplication/addressbook/index.html  I don't see here a way to escape the comma, so my proposed fix is to strip the comma  from the input here.                  Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Fixed, will have to push a new version of the generator to make it live though. For now  just omit the comma.                 Status: Fixed              		joseph.d...@gmail.com	sro...@gmail.com
300	Defect	Fixed	sro...@gmail.com	dr.langner	1261017279000	1261449016000	1261449016000	encode/decode of mixed case text broken	   1. create qr code @ http://zxing.appspot.com/generator/ text:  Da65cV1g^>%^f0bAbPn1CJB6lV7ZY8hs0Sm:DXU0cd]GyEeWBz8]bUHLB  2. decode with 'Barcode Scanner v3.01' on Andoid 2.0  What is the expected output?  Da65cV1g^>%^f0bAbPn1CJB6lV7ZY8hs0Sm:DXU0cd]GyEeWBz8]bUHLB  What do you see instead? da65cv1g^>%^f0babpn1cjb6lv7zy8hs0sm:DXU0cd]GyEeWBz8]bUHLB  What version of the product are you using? On what operating system? Barcode Scanner v3.01; Andoid 2.0 (milestone)    some letters big letter are decoded as small letters. a png with qr code created with  http://zxing.appspot.com/generator/ is attached.                                   bug.png    886 bytes      &nbsp; View    &nbsp; Download                                         qr code generated with http://qrcode.kaywa.com/ is decoded correct. so this issue seems to be in the encoder @ http://zxing.appspot.com/generator/. (qr code from kaywa attached)                                   nobug.png    494 bytes      &nbsp; View    &nbsp; Download                                             that's funny... qr code encoded @ http://qrcode.kaywa.com/ decodes to the expected text only when encoding with newline at the end, without newline the qr code is different and decodes to the same 'broken' result as shown above.        My guess is that the ':' is causing the crude heuristics to think it's trying to be  a URL. So it gets normalized by lowercasing.  While this is an artifical situation, can be patched up I'm sure.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Hm, I am not able to reproduce this. I encoded your string as text with the project  generator (attached). I decode it online and got the exact string back. Are you using  text mode?                                   chart.png    1.9 KB      &nbsp; View    &nbsp; Download                                                      Status: CannotReproduce               hi, when decoding your chart.png with "Barcode Scanner v3.01" on Android 2.0 i get the same wrong result with lowercased characters.        I get it now, it's actually more of a display issue in the client. It is being though of as a  URI. think I can fix it now.                 Status: Fixed              		dr.lang...@gmail.com	sro...@gmail.com
303	Defect	Fixed	sro...@gmail.com	davin.xyz	1261543574000	1272137017000	1272137017000	behold ii not scanning 	   1. Any barccode any light cond and any dist or angle 2. 3.    cam flash goes on and off forever really no focus just white in viewer What version of the product are you using? On what operating system? 3.1         Did not have this issue on my touch         Yes, tons of people are writing in about this. It is, as far as we can tell / are concerned,  a device bug.  There is no real way to turn off the flash in Android 1.x. However devices exposes raw  camera parameters we can manipulate. Samsung exposes 'flash-value'. However the  value that turns off the flash for the Galaxy ('2') doesn't work on the Behold 2. That's  about the end of the story. Contact Samsung.                 Status: NotABug               Hi,  Please use flash-value 1 to turn off flash on Behold II.  I've successfully done this  with my Camera Widget app.  I am not sure why Samsung would flip around flash-value meanings on two devices that  are very similar...  Thanks, Ivan        Yep, then that breaks the Samsung Galaxy. In principle I don't want to work around Samsung's issue; they should,  and have not bothered at all it seems.  In practice I suppose one can query the MODEL string and alternate behavior accordingly. Maybe one line of code  isn't so bad.        OK done                 Status: FixedLabels: -Priority-Medium Priority-Low              		davin....@gmail.com	iiredal...@gmail.com	sro...@gmail.com
309	Defect	Fixed	sro...@gmail.com	eric.doughty	1262511225000	1262568617000	1262795661000	Add support for iCal vCard export birthdate format	   1. Create an AddressBook.app contact with a birthdate 2. Generate QRCode for the vCard 3. Try to decode QRCode on Android 2.0  What is the expected output?   Display corresponding contact as if it didnt have a birthdate  What do you see instead?   Application crashes. (Dialog with "The application Barcode Scanner(process com.google.zxing.client.android" has stopped unexpectedly. Please try again.")  What version of the product are you using? On what operating system?   Version 42 on Android of motorola milestone.       I took a look at the source, I believe it is due to the birthday format having '-' characters in it. Here is an example: BDAY;value=date:1983-10-10    I am not a java developper, but I managed to reproduce on the desktop application, and this change seems to fix it:  in core/src/com/google/zxing/client/result/VCardResultParser.java in public static AddressBookParsedResult parse(Result result):  replace     String birthday = matchSingleVCardPrefixedField("BDAY", rawText, true);     if (birthday != null &amp;&amp; !isStringOfDigits(birthday, 8)) {       return null;     }  with     String birthday = matchSingleVCardPrefixedField("BDAY", rawText, true);     if (birthday != null &amp;&amp; !isStringOfDigits(birthday, 8)) { 		birthday = birthday.replaceAll("-", ""); 	    if (!isStringOfDigits(birthday, 8)) {       		birthday = null; 		}     }      Just in case, I forgot to specify, by AddressBook.app I mean the Mac OS X application, my version is Leopard, and OS locale is set as per attached screenshot.                                    Picture 13.png    62.5 KB      &nbsp; View    &nbsp; Download                                             Yeah this was fixed some while ago, and should be live in the latest app on the market.  Are you up to date?                 Status: FixedOwner: srowenLabels: -Priority-Medium Priority-Low               I am up to date.  Here is an example QRCode that provoques the error: http://chart.apis.google.com/chart?cht=qr&amp;chs=350x350&amp;chl=BEGIN%3AVCARD%0AVERSION%3A3.0%0AN%3ADoughty-Papassideris%3BEric%3B%3B%3B%0AFN%3AEric+Doughty-Papassideris%0ABDAY%3Bvalue%3Ddate%3A1983-10-20%0AEND%3AVCARD%0A  Here is the location in the source, although it does seem my version was a tad outdated, it sure looks like that code would do the same thing. Besides, if you can't parse the date, why not just drop it instead of dropping the whole vCard ? http://code.google.com/p/zxing/source/browse/trunk/core/src/com/google/zxing/client/result/VCardResultParser.java#60 Thanks        (by "version was a tad outdated" I am referring to the source in http://zxing.googlecode.com/files/ZXing-1.4.zip , not my application on the android)        I'll have to look more into why it doesn't like this as a vCard.  It would ignore unrecognized parts of the vCard; that's not the issue.  I do see you're using things like 'BDAY;value=date:' instead of 'BDAY' -- is that  standard? that would explain why it's ignored; it's not the dashes (that was fixed;  that was a crash).  You're also adding things I think you might want to omit, like VERSION, and encoding  both FN and N. For limited-size QR codes I might optimize for length.  But I still don't see why it's not recognized as a vCard; I'll have to look more  later.                 Status: Accepted               That vCard is exactly as outputed by AddressBook.app (and slightly anonimized so I could publish it). The reason I want to keep it as such is because I have written a QuickSilver plugin that displays QRCodes from various objects including contacts which I export using the built in version. I have quite complete contact sheets, and never ran into a size issue. For the moment I pre-process the vCard to remove the dashes, but I'd rather not publish the source with that hack yet though.  From my debugging, the "value=date" stuff did not bother zxing, the value it captured was only the date, only the dashes did.  If you look at the line I pasted above ( http://code.google.com/p/zxing/source/browse/trunk/core/src/com/google/zxing/client/result/VCardResultParser.java#60 ), you'll find it completely gives up returning a parsedresult instead of just ignoring the BDAY line, so it does not ignore the BDAY, if present and not parsed, the whole card is cancelled, not just the field.  Thats why I suggested replacing "return null" with "birthday = null" in case of unexpected format.  Thanks for looking into it, I'm looking forward to sharing my plugin, its already been very helpfull for me to quickly send a phone number or url to the phone, even when offline.        Just thought I'd add that the value=date parameter is perfectly valid as per RFC: Page 30 of http://www.ietf.org/rfc/rfc2426.txt : ;For name="BDAY"    param        = ("VALUE" "=" "date")         Actually it doesn't give up if it can't parse a birthday -- note that  'isLikeVcardBirthday' accepts null.  Yeah actually I looked again and the code is all fine in this regard, it handles all of  this syntax. I think you were just hitting a bug fixed a while ago. When I run this  locally it all parses fine.  I'll see about updating the online decoder since I think it doesn't quite have the latest  stuff.  If you're writing a plugin that does intend to put all this in a QR Code, I'd suggest  trying to trim it down if you can for easier scanning. I'd also note that "MECARD"  format is probably more widely supported as a format for contact info.                 Status: Fixed               I must insist that this is not a version problem (unless the code.google svn is out of date, in which case I cannot help). Here are the steps to reproduce: 1) Check out the code from SVN. 2) Paste the following file to javase/src/com/google/zxing/client/j2se/VCardTest.java : http://vim.pastey.net/130986 3) Compile (I used ant -f core/build.xml &amp;&amp; ant -f javase/build.xml) 4) Run java -cp javase/javase.jar:core/core.jar com.google.zxing.client.j2se.VCardTest  Output is: => Testing width BDAY '1983-10-20': Got type: ADDRESSBOOK: 'FirstName LastName 1983-10-20'  => Testing width BDAY '1983-sdf10-20': Got type: TEXT: 'BEGIN:VCARD VERSION:3.0 N:LastName;FirstName;;; FN:FirstName LastName BDAY;value=date:1983-sdf10-20 END:VCARD '  As you can see, the first result is as expected, but the second is simple raw text.  If you don't have time or what not, would you accept it if I submitted a patch attached to a comment here ?  Regarding my plugin: thank you for your advice, it is sound, but for the moment I am using Mac OS X's vCard export API, parsing the result or building the vCard myself would open a can of worms as the one we are observing here.        Yes, but that's not a valid birthday, so it's not technically valid vCard info. You're not  seeing this output are you? that would be an AddressBook problem.  I understand the argument that, well, yeah it's not valid but it looks like it's trying to be  vCard, so silently ignore it. I could say that's a slippery slope -- how much invalidness  do you work around? Working around this doesn't seem like much of a sin, even if I  strongly prefer to hold the line against accepting bad input. But does this even come up  in practice?        In that case zxing should support all datetime values as per RFC (http://www.ietf.org/rfc/rfc2426.txt - see page 10 for some valid formats zxing rejects, such as '1953-10-15T23:10:00Z').  If the implementation is incomplete, I hardly expect a URL or phone number to begin with 'BEGIN:VCARD', and thus the pragmatic approach is to simply drop the field (or not attempt to parse it into a DateTime object and simply copy its string value, letting the client fight with it).  To answer your question 'how much invalidness do you work around?', I would answer quite simply that you should work around until it is pointless to consider it a VCard (for example, if it has no name/phone number/email). As they say, be liberal with input, strict with output.  I am not seeing this output no, however, if this had been applied, my phone would not crash when trying to decode a perfectly valid VCard.        I understand now, actually the bad birthday does cause it to be rejected as a vCard. It  wasn't the dashes issues. OK, I can make that one-line change.  You're right it is not at all a complete vCard parser. I'd like to accept a subset of valid  input, and no invalid input, in principle, but OK I can see simply ignoring bad parts of  input in cases like this.        Thanks, for the change, and the conversation :)        Any idea when this would reach android market ? (At least the dashes fix)        No real ETA... wouldn't expect it inside of a month. I suppose we don't like to release too  too often to avoid annoying people.        There was also a problem with the dashes in the android client. I have learned a lot from reading zxing's code, so thanks! Please do not hesitate to comment should the attached patch not live up to the high standards of this code base, I am still very much beginning with java.                                   date_format_attempts.diff    2.2 KB      &nbsp; View    &nbsp; Download                         Looks good to me but what's the deal with catching Exception -- what are you  expecting might be thrown there?        Well I thought it might throw a ParseException if it didn't match at first, I only realised later that it returned null, but I didn't remove the catching, it didn't seem to get in the way. Feel free to remove if it's useless of course.       		eric.dou...@gmail.com	sro...@gmail.com
310	Defect	Fixed	sro...@gmail.com	cl0ud3dstr1f3	1262538290000	1262547990000	1262547990000	Monochrome Bitmap Source, BufferedImageMonochromeBitmapSource deprecated in 1.4?	 In "Developer Notes," you recommend to call zxing using:  "For example, an implementation exists for instances of java.awt.BufferedImage:  BufferedImage myImage = ...; MonochromeBitmapSource source = new BufferedImageMonochromeBitmapSource(myImage); "  Are MonochromeBitmapSource and BufferedImageMonochromeBitmapSource deprecated in  zxing1.4? My eclipse can't seem to find it/process it. Importing the zxing package doesn't work  either.  I'm currently trying to use a png QRcode file.           Reader reader = new QRCodeReader();         File myFile = new File("x.png");         BufferedImage myImage = ImageIO.read(myFile);         MonochromeBitmapSource source=new BufferedImageMonochromeBitmapSource(myImage);         Result result = reader.decode(source);  I'm running Eclipse on a Mac OS X Leopard machine.  Thanks ahead of time.      Yeah that's out of date, I updated it. Look at CommandLineRunner for a complete  example.                 Status: FixedOwner: srowenLabels: -Priority-Medium Priority-Low              		cl0ud3ds...@gmail.com	sro...@gmail.com
311	Defect	Fixed	sro...@gmail.com	jiay...@google.com	1262621506000	1262626860000	1262626860000	Code128Reader array index out of bound problem	    java -cp javase/javase.jar:core/core.jar  com.google.zxing.client.j2se.CommandLineRunner  /data/barcode/java_exception_errors/ --try_harder     Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 16         at com.google.zxing.common.BitArray.get(BitArray.java:50)         at  com.google.zxing.oned.Code128Reader.decodeRow(Code128Reader.java:423)         at  com.google.zxing.oned.MultiFormatOneDReader.decodeRow(MultiFormatOneDReader .java:72)         at com.google.zxing.oned.OneDReader.doDecode(OneDReader.java:142)         at com.google.zxing.oned.OneDReader.decode(OneDReader.java:50)         at  com.google.zxing.MultiFormatReader.decodeInternal(MultiFormatReader.java:14 6)         at  com.google.zxing.MultiFormatReader.decode(MultiFormatReader.java:64)         at  com.google.zxing.client.j2se.CommandLineRunner.decode(CommandLineRunner.jav a:207)         at  com.google.zxing.client.j2se.CommandLineRunner.decodeOneArgument(CommandLin eRunner.java:148)         at  com.google.zxing.client.j2se.CommandLineRunner.main(CommandLineRunner.java: 91)  What version of the product are you using? On what operating system?  ZXing-1.4 on Linux.     Fixed core/src/com/google/zxing/oned/Code128Reader.java line 423 (before):  while (row.get(nextStart)) { line 423 (after):  while (nextStart < row.getSize() &amp;&amp; row.get(nextStart))  {     Nice one, fixed.                 Status: FixedOwner: srowenLabels: -Priority-Medium Priority-Low              		jiay...@google.com	sro...@gmail.com
312	Defect	Fixed	dswit...@gmail.com	juergen.treml	1262640463000	1262647943000	1275677090000	Web-based decoder on zxing.org no longer working well	 On my not natively supported mobile phone I've till recently made use of the  web-based decoder at http://zxing.org/w/decode.jspx to decode QR codes. While  this used to work like a charm even with stretched and blurred pictures,  since a few days ago the decoder quality seems to have degraded strongly.  Right now even crystal clear shots and generated test codes in most cases no  longer work. Have any changes been made to the web-based version? Anything  happened?     here's a few QR codes which till recently could be decoded fine by the web-based decoder but are no longer working:  http://www.treml.mobi/test/09bb6be5b47e52af16afa59912775c1b.jpg http://www.treml.mobi/test/f2d35ea1ac69224b990dc9191c7ded42.jpg http://www.treml.mobi/test/22584a0afe05a6ff5ca8aede949f785e.jpg http://www.treml.mobi/test/1d16f8060ad61444736e6a72dbc5fded.jpg http://www.treml.mobi/test/36d16ab1cc3135979d0a7c05fef1889e.jpg http://www.treml.mobi/test/d8e1ec935968d539c5d7aceb27169369.jpg         The new hybrid binarizer is optimized for small images from a the camera's viewfinder,  large images like these won't work well.        Daniel what are your thoughts on this. I did just put up a new copy of what's in trunk. I  can try the global binarizer, which is as I understand the 'old' approach, and I could see  why that might work better on the sorts of images people upload on the web.                 Owner: dswitkin               Try it now. I changed to the global binarizer.        just did. 4 out of those 6 images are working again. (as for the other two, this might just be my bad. I'm not 100% sure all of those did work to begin with but I know most of them did)  Thanks for such a quick response to the problem!        Sounds like a reasonable change. Marking fixed.                 Status: FixedOwner: srowen               There are some serious bugs I encountered.  Don't know if it is related to COMMA and SEMICOLON, but even  without them, there are some limitations in zxing (the web versions of the generator and decoder).  Documented here:   http://www.edepot.com/forums/viewtopic.php?f=12&amp;t=3846#p6840        there is no bug, you are not understanding the QR code specification. The maximum size depends on the encoding mode used. If you only use alpahnumeric  characters, yes it's like 4K charaters. As soon as you use certain other symbols, it  switches to byte mode, which has a lower limit.  The generator and decoder are working correctly in this regard AFAICT.       		dswit...@gmail.com	ede...@gmail.com	juergen....@gmail.com	ralf.kis...@gmail.com	sro...@gmail.com
316	Defect	Fixed	sro...@gmail.com	jiay...@google.com	1263039697000	1263059976000	1263080345000	Returned wrong resultPoints when barcode is detected 90 degrees CCW.	 The returned resultPoints are rotated when 1D barcode is detected 90 degrees  CCW. Seems to be a bug in core/src/com/google/zxing/oned/AbstractOneDReader.java::decode(). The  orientation value is adjusted, but the result points are not.  Fixed by adding:   ResultPoint[] points = result.getResultPoints();   int height = rotatedImage.getHeight();   for (int i = 0; i < points.length; ++i) {     points[i] = new ResultPoint(height - points[i].getY() - 1,  points[i].getX());   }      I'll have to look at this. The result points are flipped in doDecode(), so I would think this  works, but will try it out.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Oh I see the issue now. Yes good fix. I'll commit.                 Status: Fixed               I'd like to understand the behavior here more clearly:  If I feed in a landscape image, and a barcode is found by rotating and decoding in portrait, are the coordinates  produced by this change in landscape? I think that would be the right behavior, since the user didn't rotate the  image themselves.                 Cc: dswit...@google.com               I don't think that will matter -- well up the chain from where the issue occurs. Whether  it's in landscape or portrait, it will feed the image in the library in some orientation, and  get coordinates relative to that orientation, and draw accordingly. I think that's fine.  The issue was when detecting at 90 or 270 degrees (from internally-rotated images in  core/), the coordinates weren't translated.        I was just giving an example. Let me try to be clearer:  I feed in a 640x480 image. The barcode exists in the top-left corner as seen in landscape mode. Internally the  image is rotated and a barcode is found in the 480x640 image in the bottom-left corner. Does this change  cause the library user to see the coordinates as reported in the top-left of the 640x480? If so we're all set.        Yes, that's exactly the fix.       		dswit...@google.com	jiay...@google.com	sro...@gmail.com
322	Defect	Fixed	sro...@gmail.com	juergen.treml	1263480573000	1263510578000	1263510578000	Online Decoder no longer available?	 Clicking the link for the Online Deocder I get a "404 - Not Found" error. Is it no longer available?     Weird, the instance seems to have restarted and a default HTTP server went up. I fixed  it.                 Status: FixedOwner: srowen              		juergen....@gmail.com	sro...@gmail.com
329	Defect	Fixed	sro...@gmail.com	beyonddeath	1264467684000	1265320167000	1265320167000	QRCode creation in csharp is broken.	   1. Try and create a qrcode using c# 2. output array is all -1 (sbyte)255 3. ? 4. profit    the qrcode array  What version of the product are you using? On what operating system? csharp    here is the fix:             for (int x = 0; x < outputHeight; x++)             {                 for (int y = 0; y < outputWidth; y++)                 {                     output.set(y, x, outputArray[x][y]);                 }             } at line 133 in qrcodewriter.cs  Please give credit :)     We don't support this code, but happy to try to patch it. Where does this go?  I think someone was going to re-port all the csharp/ code FWIW.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Oh you said where it was there. Done.                 Status: Fixed              		beyondde...@gmail.com	sro...@gmail.com
336	Defect	Fixed	sro...@gmail.com	dswit...@google.com	1264982791000	1267399184000	1267399184000	Strange interactions with "Open in Browser"	 From a coworker:  STEPS TO REPRODUCE: 1. Open Barcode Scanner 2. Scan a QR Code with a URL 3. Click "Open in Browser" 4. Click the Home soft button 5. Open Barcode Scanner  EXPECTED RESULTS:  I expected to see the Barcode Scanner app's scanning screen (camera + red line).  OBSERVED RESULTS:  Instead, I see the Browser's page. It's like "Open in Browser" didn't take me out of the Barcode Scanner  app. This was very confusing the first time I saw it. You can get back to the scanning screen by  pressing the Back soft button an appropriate number of times.  SOLUTION:  The suggested fix is to use this flag:  http://developer.android.com/intl/de/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_ WHEN_TASK_RESET     For whatever reason I don't observe this behavior on my Hero (HTC-flavored Android  1.5). Sure why not just set that flag?        I submitted this change and am testing it now... while I wasn't able to reproduce this  myself, the change doesn't seem to have any negative effect.                 Status: FixedOwner: srowen              		dswit...@google.com	sro...@gmail.com
340	Defect	Fixed	dswit...@google.com	blunden2	1265402778000	1265408503000	1265419003000	Update to highres (hdpi) icon on hdpi devices	   1. Look at the icon.     I would be very happy there was a highres icon. I see a blurry icon which makes it stick out.   What version of the product are you using? On what operating system? Latest market version on Android 2.1.    Barcode scanner is such an important part of the Android experiance for a lot of people.  Unfortunately on newer hdpi devices it doesn't fit in as perfectly as it did before. Would you  please consider adding a highres icon in an upcoming update?     Thanks for the report. It's already been fixed and a new version should be on Market in a few weeks.                 Status: Fixed               Awesome. Looking forward to it. I just reported it in case you hadn't thought about it.         		blunden2	dswit...@google.com
344	Defect	Fixed	sro...@gmail.com	LatinSuD	1265642355000	1267082537000	1267082537000	Geeksphone One PreviewFormat crash	   1. Open application in Geeksphone One. 2. It will crash after opening camera.  What version of the product are you using? On what operating system? svn r1203, geeksphone one (android 1.5).     Preview format is uninitialized, and previewFormatString is null, so we get a NP exception around CameraManager.java:300.  I think a good solution is to detect this situation early and force the format to default. I attach a patch.                       This is the patch.                                   geeksphone-pixelformat.diff    1013 bytes      &nbsp; View    &nbsp; Download                         I can apply a patch like this, but it will just cause more confusing errors later if the  preview format is not in fact the default -- which is actually exactly your situation in   issue 343 .                 Labels: -Type-Defect -Priority-Medium Type-Other Priority-Low               Hmm, Daniel I see you intentionally had it crash on an unsupported format. I tend to  agree with that in principle  Do you think that there's an argument to default to YUV420SP? it happens to work if  the format is any kind of planar YUV.  However it doesn't address this particular situation, which only highlights the  downside to this change.  At the least, we need to avoid an NPE here by replacing a null previewFormatString  with, say, "unknown". I'm going to make that change and consider the rest of this a  duplicate of 343.                 Status: FixedOwner: srowenCc: dswit...@google.comLabels: -Type-Other Type-Defect               Phones are required to support yuv420sp AND use it as the default if we don't set something else.        Ah OK, that seems to seal it. The rest is a problem with the Sciphone / Geeksphone  then. The data is plainly not YUV420SP.   Good thing I didn't start writing that support...        Geeksphone does support yuv420sp AND uses it, it is just that it doesn't report it...         Ah I missed the resolution being different. Yes, that's likely the reason. The image is  being doubled up and corrupted somehow                 Status: AcceptedOwner: ---               I'm thinking of a patch like this to actually parse the preview-size-values param and/or  use the camera's default preview size in preference to screen resolution. Daniel,  thoughts?                                   Camera_preview_size_change.patch    4.6 KB      &nbsp; View    &nbsp; Download                                  Owner: srowen               I confirm that patch works on Geeksphone (previews at 320x240) and HTC Dream (previews at 480x320).  If you were curious, these are Geeksphone current camera parameters: antibanding=off;effect=none;jpeg-quality=85;luma-adaptation=18;picture-size=2048x1536;preview-size=320x240;whitebalance=auto;zoom=1.0        That's good news. Daniel I wonder if this is related to the issue we discussed offline on  that Japanese device. I'll wait for a nod from you as you understand more about the  implications of this change.        I committed my change so we can begin evaluating it (works for me and works for this  issue).                 Status: Fixed              		LatinSuD	dswit...@google.com	sro...@gmail.com
357	Defect	Fixed	sro...@gmail.com	fct.dev	1268154142000	1271656249000	1271656249000	Failure decoding PDF417 barcode	 We are currently evaluating ZXING for a banking records system which uses PDF417 on printed documents. The input images are grayscale JPEGs from a scanner.  The system already decodes Code39 successfully, but PDF417 fails with NotfoundException or FormatException on the attached images (same encoded text on all of them):  00123MCTA0123456789012345678901234567890123456789012345678900101  I'm using version 1.5 on Windows XP. I've modified the GUIRunner to run with the following params:          Hashtable<DecodeHintType, Object> hints = new Hashtable<DecodeHintType, Object>(3);     	Vector<BarcodeFormat> vector = new Vector<BarcodeFormat>(8);     	vector.addElement(BarcodeFormat.PDF417);     	hints.put(DecodeHintType.POSSIBLE_FORMATS, vector);     	hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);      	result = new PDF417Reader().decode(bitmap, hints);  They are decoded successfully with FineReader OCR engine, but we'd like to avoid that solution for barcode detection since it taxes the CPU heavily.  Apart from that, ZXING is a wonderful project, thanks for your work!                                            image00008.jpg    452 KB      &nbsp; View    &nbsp; Download                                         Forgot to add, the JRE we are using is Sun's 1.5.0_15. Tell so if you need more information.        There are two issues.  In both, there are 2 barcodes in the image, which doesn't quite work, since it will  detect the top of one and bottom of the other as the boundaries. You can use the  detectors in com.google.zxing.multi to handle multiple barcodes in one image.  If you split up the barcodes, the ones in image 2 decode fine.   However that is not the issue for image 1. They're not decoding even after separating  them. It's finding the boundaries of the barcode correctly, but when sampling the  bits, it comes out wrong. Looking closely at the image, I think it may be due to a  slight warping of the barcode? It appears like it's on a curved page. It also looks like  it is stretched out horizontally, which I'm not sure is allowed. Can you get a more  straightforward scan of the barcode, like in image 2?   Since I think this explains the output, I'm marking as 'not a bug' but we can continue  discussion in any event.                 Status: NotABugOwner: srowenLabels: -Priority-Medium Priority-Low               The ones in image 1 are a copy of those in image 2 stretched to resemble what might have been the final output, using Paint. Sorry, disregard that one, not even FineReader detects the barcodes.  As for image 2, instead of splitting I deleted a single one and it still raises a NotFoundException. I attach the file which decodes correctly on FineReader in case it's of any use.  I also attach a second file using something similar to a document with a barcode (skewed due to the scanner). Same case, NotFoundException in ZXing and FineReader detects it.  If you want more error cases in scanned documents for testing I can provide them. But I understand this project is centered on snapshots from mobile phones and might not be a priority. Still, QR and Code39 detection have proven quite reliable for our project.  Thanks for your help.                                   image00009.jpg    647 KB      &nbsp; View    &nbsp; Download                                                                Dibujo2.jpg    307 KB      &nbsp; View    &nbsp; Download                                             After reading the code (didn't write it originally) I see it makes the assumption that  the barcode is in the center of the image, which stops it from being recognized. I  relaxed this assumption and committed a change to Subversion.  it's still not decoding, but now it is due to not liking the contents of the code. I think  it is still missing some of the modules and the error correction is failing.  This ought to help, but not address this 100%. Unfortunately I don't think I personally  have time to investigate further on these but you're welcome to dig in to the code and  try to determine what the issue is.        Also, if you are able to use QR codes instead, that would be much easier to decode.  You can also use this library first, and in the cases it doesn't decode, use the other one.                 Status: WontFix               I'm also pro QR codes, but we have hardware readers used for Code39 which support PDF417.  I've looked at the problem in the debugger and it seems like the detector skips the first and last rows of data (binarization problem?). The PDF417 code might need some update, it seems to recycle some legacy code from previous revisions which has been improved since then.  I probably won't have time to work on the code myself, but I wonder if you could leave the status as accepted or akin for someone who has the time to improve the detector.  Thanks again.        I don't see any obvious issues with how it samples. I'll leave it sitting around for a while.                 Status: NewOwner: ---                Issue 368  has been merged into this issue.         Issue 366  has been merged into this issue.        Hi, i am attaching an image which decodes into the following text. AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAQQAAAAAAAAAAAA  GAAAAAAAAAAAAAAAAAAAAAAAACCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAMSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQAA AAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAHPAAAAAAAAAAAAAAAAAAAAAAAAIBAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAHPAAAAAAAAAAAAAAAAAA AAAAAAIBAAAAAAAAAAJHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAA  i guess this is because the unicode characters are encoded into the barcode. the  finally got this string when i commented out correctErrors(codewords, erasures,  numECCodewords); statement in the decoder class and public DecoderResult  decode(BitMatrix bits) method. before commenting out the above statement i was  getting a formatexception. plus i have tried zxing with a simple 2d barcode and have  observed that where special characters are present the string is decoded in a wrong  format.   Regards, Wajeeh                                    PDF417_sdfsf.JPG    825 KB      &nbsp; View    &nbsp; Download                                             Hi,  we are evaluating zxing's pdf417 decoding capabilities, and so far we have not been  able to decode a single image. can anyone please help out in this as i have tried  everything to decode the adove provided image. any help will be appreciated thanks.  Regards, Wajeeh Ullah        I doubt it will decode images like the one you posted, but it will decode things like the images linked earlier in  this thread. I think you'll need to work on improving the detector if you really want it to work on images like that.        wajeehu, from my tests, using the GlobalHistogramBinarizer instead of the HybridBinarizer improves the detection rate with PDF417. But it still fails in many cases where FineReader succeeds. Hope it helps.        Thanks fct.dev, i tried with GlobalHistogramBinarizer but im getting better results  using HybridBinarizer. i tried decoding an image (also attached here ). i got the  following results. byte[] => 65 74 55 48 48 48 48 48 48 48 49 53 48 85 65 65 65 65 65 67 65 70 67 69 66  73 70 65 76 13 48 48 84 50 51 84 13 51 49 48 51 49 48 48 48 48 48 48 6 45 6 69 6 47 6  32 43 13 29 -61 -128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 28 -61 -71 14 70 0 0 0 0 0 98 32 38  -61 -93 -62 -127 25 68 6 71 6 32 51 6 0 0 0 0 3 26 13 51 6 68 6 -61 -116 6 69 6 32 39  6 0 0 0 0 3 70 68 6 13 69 6 -62 -87 6 39 6 70 6 32 0 0 0 0 0 62 49 6 32 49 48 53 12 6  -62 -81 6 68 6 0 0 0 0 0 -61 -123 6 68 6 -61 -127 6 32 49 49 6 -61 -116 6 51 0 0 0 0  1 -61 -90 49 6 50 -61 -68 114 -62 -102 49 6 39 6 72 6 69 56 46 118 118 -62 -66 -62 - 120 6 -61 -116 6 12 6 13 13 49 6 39 6 0 0 0 0 0 14 69 -61 -111 16 -62 -74 -61 -123 70  0 0 0 0 0 0 13 32 32 32 32 32 32 48 48 48 48 48 48 48 48 32 32 32 32 48 48 32 32 32  32 32 32 32 32 32 32 32 32 32 32 32 32 48 48 48 48 48 48 47 94 32 32 32 32 32 32 32  32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 48 48 48 48 48 48 48 48 32 32 32 32 32  32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 48 48 48 48 48 48 48 48 32 32 32  32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 48 48 48 48 48 48 48 48 32  32 32 32 48 48 32 32 32 32 32 32 32 32 32 32 32 32 32 32 48 48 48 48 48 48 48 48 48  48 32 32 32 32 48 48 32 32 32 32 32 32   Text Result => AJ70000000150UAAAAACAFCEBIFAL00T23T31031000000-E/ +?        i cant attach the image as it says  "Issue attachment storage quota exceeded." :)          Issue 375  has been merged into this issue.        The issue is that there is a bug in  com.google.zxing.pdf417.decoder.numericCompaction so that it does not decode numeric  data properly.  Specifically, as currently written it doesn't decode when the  numeric data terminates.  Here is one possible fix:  private static int numericCompaction(int[] codewords, int codeIndex, StringBuffer  result) {     int count = 0;     boolean end = false;      int[] numericCodewords = new int[MAX_NUMERIC_CODEWORDS];      while ((codeIndex < codewords[0]) &amp;&amp; !end) {       int code = codewords[codeIndex++]; 	  if(codeIndex == codewords[0])         end = true;       if (code < TEXT_COMPACTION_MODE_LATCH) {         numericCodewords[count] = code;         count++;       } else if ((code == TEXT_COMPACTION_MODE_LATCH) || 		            (code == BYTE_COMPACTION_MODE_LATCH) || 		            (code == BYTE_COMPACTION_MODE_LATCH_6) || 		            (code == BEGIN_MACRO_PDF417_CONTROL_BLOCK) || 		            (code == BEGIN_MACRO_PDF417_OPTIONAL_FIELD) || 		            (code == MACRO_PDF417_TERMINATOR)) { 	        codeIndex--; 	        end = true;       }         if (((count % MAX_NUMERIC_CODEWORDS) == 0) ||           (code == BYTE_COMPACTION_MODE_LATCH) || end) {         // Re-invoking Numeric Compaction mode (by using codeword 902         // while in Numeric Compaction mode) serves  to terminate the         // current Numeric Compaction mode grouping as described in 5.4.4.2,         // and then to start a new one grouping.         String s = decodeBase900toBase10(numericCodewords, count);         result.append(s);         count = 0;       }     }     return codeIndex;   }          Thanks, I can commit this fix. Which is a test image that works only after this change, so I can add a unit test?        One bit I don't understand is: codeIndex < codeWords[0] instead of codeIndex < codeWords.length  -- index is  an offset into the array right?        Oops.  I see that I have an artifact from previous testing: BYTE_COMPACTION_MODE_LATCH in the final if test should be  NUMERIC_COMPACTION_MODE_LATCH  "index is an offset into the array right?" Yes, but if you look for example at textCompaction, you will also see this test,  because you don't want to decode the error-correction codes at the end.    I was using a sample for testing on which the detector failed, so I had to hard-code  the vertices (and it is from my work, and so may be proprietary).  The bug will show  up on any barcode that uses numericCompaction (since the decodeBase900toBase10 is  not called for the "final" grouping; the original code would only work when the data  starts and ends with NUMERIC_COMPACTION_MODE_LATCH.        You know this code better than I do at this point -- may not be able to construct a test case on my own but am  willing to take your word for it. if you're an active user and this is improving the result, good. Also I wonder if  byteCompaction has the same sort of issue? I wonder because I see it has that same curious large empty if  statement, which I suspect is intended to include the two lines that follow as its body (as your change does). I'm  inclined to fix that, not even knowing more about this        You're right.  There was an additional problem of a misplaced closing bracket in  the "large if" statement in numericCompaction, so that the body of the ifs only  contain the     codeIndex--; statement and not the     end = true; statement, as well.  This same bug appears twice in byteCompaction, and should be  fixed.        Here's my latest patch (now can attach since our quota has been increased) -- is this roughly what you have in  mind? It passes whatever tests we have and I'd be willing to commit if one more glance doesn't reveal an obvious  issue.                                   PDF417.patch    4.7 KB      &nbsp; View    &nbsp; Download                         Not quite.  The "end = true;" statement needs to be inside all the if blocks in  byteCompaction and numericCompaction.  What's going on, is that the code at the  current index is indicating a termination of the previous decompression (i.e., "un- compaction") method, the index is backing up so the code will be re-read by the  caller to invoke the correct decompression routine.        OK committed the fix, thank you, and credit you in AUTHORS. This may be as close to a fix as this issue will see  so resolving it.                 Status: Fixed              		fct....@gmail.com	jwi...@baycomp.com	sro...@gmail.com	waje...@gmail.com
363	Defect	Fixed	dswit...@google.com	mtomc...@google.com	1269558654000	1277074751000	1277074751000	App stops scanning barcodes if power button is pressed while barcode information is displayed	   1. Scan a QR address code 2. While the "Found contact info" dialog is visible, tap the power button  to put the phone in standby mode (NOTE: apologies; I don't know the  technical term for the mode but I'm referring to "the mode where you can  put the phone in your pocket; it's still on but the UI won't respond until  you press the top button again and enter your login pattern") 3. Tap the power button again to display the phone's login pattern screen 4. Enter login pattern. The barcode app reappears, but the "Found contact  info dialog is not visible. 5. Attempt to scan a barcode; the barcode will not scan. It is as if the  program thinks the dialog is still open, but the dialog is not visible.     When the phone awakens from standby and I log in, I expect to be returned  to the barcode dialog screen that was previously visible.  What version of the product are you using? On what operating system? Barcode Scanner v3.21, Nexus One, Kernel 2.6.29-01117-g4bc62c2         Good bug, thanks!                 Status: AcceptedOwner: dswit...@google.com               Most of what you describe is by design, though we could change it. In general the  app always returns you to the scanning screen when it comes back, from sleep or  another app or anything. This avoids some confusing situations where, for example,  the user left while picking a contact to share. Coming to BS and seeing contacts is  odd.  I think we could remove this behavior in this one case though, for the case of the  Intent that shows scan results. Daniel thoughts?  I wasn't able to reproduce the rest of this though, I was able to scan and rescan the  same code after waking, without trouble. I'm on a Hero.        I did repro this on Nexus. What happens is you go back to the scanning screen but autofocus isn't running and  image processing does not appear to be running. This is a genuine bug.        The core issue here is part 5 from the OP. Daniel do you think your last change for Acer fixed this one?        Yup this is exactly the case I fixed.                 Status: Fixed              		dswit...@google.com	mtomc...@google.com	sro...@gmail.com
364	Defect	Fixed	sro...@gmail.com	d.klykvin	1269896227000	1269912435000	1270062219000	Crashes on Highscreen Zeus	   1. When BarcodeScanner runs, it dead with NullPointerException 2. 3.    V/CameraManager( 2138): Calculated framing rect: Rect(50, 0 - 350, 240) W/dalvikvm( 2138): threadid=17: thread exiting with uncaught exception (group=0x4001da28) E/AndroidRuntime( 2138): Uncaught handler: thread Thread-9 exiting due to uncaught exception E/AndroidRuntime( 2138): java.lang.IllegalArgumentException: Unsupported picture format: 0/null E/AndroidRuntime( 2138): 	at com.google.zxing.client.android.CameraManager.buildLuminanceSource(CameraManager.java:318) E/AndroidRuntime( 2138): 	at com.google.zxing.client.android.DecodeThread.access$000(DecodeThread.java:44) E/AndroidRuntime( 2138): 	at com.google.zxing.client.android.DecodeThread$1.handleMessage(DecodeThread.java:98) E/AndroidRuntime( 2138): 	at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 2138): 	at android.os.Looper.loop(Looper.java:123) E/AndroidRuntime( 2138): 	at com.google.zxing.client.android.DecodeThread.run(DecodeThread.java:106) I/Process ( 1009): Sending signal. PID: 2138 SIG: 3   What version of the product are you using? On what operating system? version 48, Android 1.6 (on 1.5 it also crash)    Well, as I see, problem is in capturing video from camera. If you say me, I can build test app, or something else     This looks like a device bug as it is not correctly advertising its preview format. Can you run the app "ZXing  Test" from the market? it will send us more information on the device.  Unless we know the device is properly using YUV420 preview format, we can't just assume it's this format. It  would cause other problems. So we might have to blacklist the device and ask you to contact the manufacturer  about a fix.  Marking not-a-bug until we know otherwise since the output here shows the device is not implementing the  platform correctly.                 Status: NotABug               Even if the device returns the wrong (or no) values we shouldn't crash. We should put up a dialog explaining that  this device is not compatible with the Android camera spec.                 Status: AcceptedCc: dswit...@google.com               Well, "Take test photos" works ok. "Scan product" or "Scan anything" crashes with IllegalArgumentException I sent you mail to zxing-external@ (Version Incremental: eng.rmcc.20100328.045021 , etc). Say me, if you need more information        Yep you're right Daniel -- just got the camera parameters report and it's another geeksphone. I'm going to  'blacklist' it like we do the Pulse.  ... we could then actually proceed with pretending the device is using YUV 420? it may not work, but at least we  warned the user it might not work.  Yes, we got the message fine. The other functions invoke BS, and yes the device isn't behaving as expected so the  app stops.                 Status: Fixed               Someone upload version that work: http://slil.ru/28711898 Maybe you can look at it, and modify your version?        Yes I think the device actually uses YUV420, which is the required default, so just skipping this check happens to  work on this device. It's not clear that works on other devices. So yes I understand the hack that works here, and  you're welcome to use that build or make the hack locally and build for yourself  But really the manufacturer needs to fix this, so I'd contact them as well and ask what's up.        Well, it's geeksphone firmware, but phone named Highscreen Zeus. I'll try to ask  support email and put it in this issue. Maybe you can add list of devices (such as Zeus or Pulse), where you can skip check?  So people can download your app from AppStore, and don't google for working version?        I'll comment check for previewFormat, but it don't work ( Now BarcodeScanner infinitely try to autofocus. It can't capture code from paper and  monitor, even if my hands don't shake.  Maybe I can try something else? Disable autofocus, etc        Continuous auto-focus is normal, but not scanning is not normal. If you have a clear, steady, well lit QR code and  it's not scanning then something else is surely wrong. Maybe the data format is not YUV420 then? not sure.        Hi;  I maintain a ROM for those devices (GP ONE/Highscreen Zeus/Commtiva Z1/etc) and coincidentally looked into this about a week ago... and you're correct: the original camera driver does not send a preview format (it's SP, btw)  The continuous focus is a different problem: When you generate the PlanarYUVLuminanceSource, you do so with the originally requested preview size. Even if you get different values from probing the camera resolution, the source dimensions remain the same (in these devices, with the stock ROM, you ask for "full-screen", 360x240, and get back 320x240, which is a preview size supported by the camera driver). From that point onwards, scan operations fail.  I fixed this simply by adding the full screen dimensions to the list of supported preview sizes in the driver; without that, I got the same behaviour as d.klykvin.        That's good to know, but would it not be simpler to add a preview-size parameter to the list of parameters the  camera returns? (Or are you saying this is not possible at the ROM level?)  You are right that it takes a wild guess at the end if it doesn't know better, and guesses the screen size, and that  is probably wrong in some cases - like this one.        Er, I did, you're mixing 2 separate issues.   Issue 1 : lack of preview size, causes crash on start.  Issue 2 : mismatched resolution, causes never-ending auto-focus and inability to scan.        If preview-size is set, there ought not be no mismatched resolution. It will use this size, and not 'guess' that it's  the same as the screen size.        My bad, I hadn't had my coffee... You're partly right: the camera provides "preview-size", but your code actually expects a list in preview-size-values, which should also be present but isn't.        Oops yes I meant the preview-size-values parameter. we used to look for preview-size but want to actually  select the size closest to the screen size so changed that.       		d.klyk...@gmail.com	dswit...@google.com	ricardo....@gmail.com	sro...@gmail.com
376	Defect	Fixed	sro...@gmail.com	viperwolf	1270555041000	1270609482000	1285514140000	Zoom on Android 2.1 not working	   1. Install latest Market version 2. Start app 3. Not zoomed in    Supposed to start at zoom 2.  What version of the product are you using? On what operating system? Version 48 for android    I've run tests with the camera, and it appears it does not let you set an initial zoom, it always starts at 0. In my tests, starting a side thread with a sleep of 100 millis that sets the zoom seems to correct the issue. Could also be solved by simply providing zoom controls on the main view.     Gonna need to know what device you are using, and for you to use the ZXing Test app in the market to send  us a dump of its camera parameters.  This app is written to use Android 1.x, which has no direct APIs for zoom control. Instead it tries to set device  specific camera parameters to set zoom. Right now it sets 2 or 3 such params. I can try to guess and set  another one if your device has yet another way to do this.  When the world is 99% on Android 2.x we can move as well. I'm sure that the real API for this, which i assume  you're using, does in fact work on the device.                 Labels: -Type-Defect -Priority-Medium Type-Enhancement Priority-Low               Don't think 2.1 has any new canera api. When I said Oom control I ment a screen widget so I could  change zoom manualy. The params.set("zoom", 2) works, but only after camera has finished its first  auto focus, so in my little test app, delaying it with a second thread helped.  I'm using Motorola Droid, got the 2.1 update few days ago. Never tried on 2.0, first time using app. Will  try your test app in a few hours when I'm actually awake.        Hmm you could be right. There are new explicit params for focus, effects, flash, white balance in 2.x but I  don't see zoom. I had assumed there was. In any event, yes the "zoom" param is already being set.  I checked in a change to look for and respect 'mot-zoom-values', though I am not sure it's actually anything  to do with it. This param shows up in reports from the Moto Blur.  I went back and combed a device report from the Droid and see 'mot-zoom-step' of 0.5. I'm guessing the  device won't accept zoom values that aren't a multiple of 0.5. Right now the default is 2.7x (which is  conveniently the max zoom on the Hero, my personal device).  I'll make a change in the next 15 minutes or so to respect that value. Once that second change is in maybe  you are in a position to download/build from SVN and try it?                 Status: AcceptedOwner: srowenLabels: -Type-Enhancement Type-Defect               Checked out from SVN and ran it, but didn't solve the zoom issue. There is still the issue that (at least on the droid) that it's preventing you from pre-setting the zoom. No matter what zoom level you set during the initialize phase is being reset to default (maybe even other values as well, but zoom is whats noticeable to me).  I did a little experiment and found two possible solutions for this bug (be it a Droid bug or an Android 2.1 bug).  ----- -----  1) Wrap the call to setZoom in a Thread with a slight delay:     new Thread() {     	public void run() {     		try {     			Thread.sleep(100);     		} catch (Exception e) {     		}      	    Camera.Parameters parameters = camera.getParameters();     	    setZoom(parameters);     	    camera.setParameters(parameters);     	}     }.start();  2) Call it after the auto focus:   private final Camera.AutoFocusCallback autoFocusCallback = new Camera.AutoFocusCallback() {     public void onAutoFocus(boolean success, Camera camera) {       if (autoFocusHandler != null) {         Message message = autoFocusHandler.obtainMessage(autoFocusMessage, success);         // Simulate continuous autofocus by sending a focus request every 1.5 seconds.         autoFocusHandler.sendMessageDelayed(message, 1500L);         autoFocusHandler = null;         if (zoomInit) {           zoomInit = false;           Camera.Parameters parameters = camera.getParameters();           setZoom(parameters);           camera.setParameters(parameters);         }       }     }   };  ----- -----  Either of those get the Droid to zoom after the first auto focus is completed. Might even be wise to move the entire camera configure into that as well, just to make sure the Droid (or Android 2.1) isn't loosing all the parameters being set.        Nice one. I just committed something like this. Actually I completely overhauled how CameraManager is  organized since it was getting unruly. I'd appreciate people like yourself trying the build, not only to see if this  works but to make sure scanning's OK.  (So I can credit you, can you mail me your name? I'm srowen. Or happy to credit viperwolf)                 Status: Fixed               Sorry for delay, been really busy last few weeks. The fix sort of works, but not 100% of the time. Seems like 1 out of 10 times it will zoom on first use, but then wont zoom again after viewing a product in the browser and returning. Any chance of adding the zoom controls (android.widget.ZoomControls) to the screen? Still try and default to 2, but then for problem phones like mine, we could manually zoom in as needed.        I'm reluctant to since it complicates the interface and not all phones have this function. I don't know if it would  solve things. The app is already repeatedly requesting zoom, and that wouldn't be changed by this        Zoom is working fine, but only for Droid and Nexus One, with HTC sence it dosen't work.        		audumbar...@gmail.com	sro...@gmail.com	viperw...@gmail.com
383	Defect	Fixed	sro...@gmail.com	megaho...@gmail.com	1271281678000	1271361395000	1271361395000	3.22 on Samsung Spica (480x320) shows only 1/4 of magnified screen	 Upgrade 3.2 -> 3.22 introduced new bug on Samsung Spica i5700.  At 480x320 screen, program shows only left upper corner of camera input. Picture looks twice bigger, than it should be. It's impossible to scan any codes.  Rolled back to 3.2, until fixed.     I can give you a build that may address this if you'll get me your email address separately.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Will be glad to help with testing. vitaly@rcdesign.ru          Debug package, you've sent, is ok at spica.        I committed my fix to SVN, a change which also ought resolve an issue on the Moment + Android 2.1                 Status: Fixed              		megaho...@gmail.com	sro...@gmail.com
396	Defect	Fixed	sro...@gmail.com	IngmarStein	1272870654000	1272911134000	1272911134000	Memory leaks in C++ decoder	   Run the decoder on a live stream of images    I expect the memory usage to be constant  What version of the product are you using? On what operating system? Latest snapshot from svn    I tried to fix most of the leaks in the attached patch.                                 zxing_leaks.diff    13.7 KB      &nbsp; View    &nbsp; Download                     Interesting, Dave just hours ago mentioned he had a patch to clean up some things like this. Perhaps his change  will encompass some or all of this, then we can try this patch.                 Owner: dmaclachLabels: -Priority-Medium Priority-Low               Maybe he wants to have a look at this patch nevertheless, to increase the chances that we found all of the leaks.  Let me know how when he commits to the repo...        OK, it's not a big patch -- even if it conflicts I'm sure Dave can figure it out. However I'm not able to apply this patch -- it seems to want to move the files around. Could you look at  regenerating it? maybe from the project root or cpp/ root, but really anything that doesn't move the files I can  figure out.        I generated the diff from my own copy of the C++ decoder. You should be able to apply the patch in the  cpp/core/src/zxing directory using the correct -p switch for patch.        OK yeah -p5 from the cpp/core/src dir worked.                 Status: Fixed              		IngmarSt...@gmail.com	sro...@gmail.com
407	Defect	Fixed	sro...@gmail.com	patriccio	1274098808000	1274894934000	1274894934000	Update broke app on my Incredible?	   1. Open app 2. Won't scan a barcode other than QRCode  What is the expected output? Used to scan everything up close  What do you see instead? Instant zoom and constantly trying to focus and  doesn't focus into barcode  What version of the product are you using? 51  On what operating system? HTC Sense Android 2.1      Before the 51 update, I could scan any barcode at a close distance. I  noticed a new behavior with v51 - when I open the app it automatically  zooms the camera.   I think the problem I am having is that it's too far zoomed in, so when it  tries to focus, it can't because barcodes are not clear enough to scan,  unless I hold them about 9-12" away, and at that point the app gets  confused with other product lines on the packaging.  I'm not technical when it comes to programming apps, but I wanted to let  you know that I haven't been able to use this app on my HTC Incredible  since upgrading to the 51 version, and think the zoom or focus is the  problem.       Similar problem on MyTouch3G, android 1.6 stock T-Mobile version. App worked great until last update now auto-focus keeps trying to focus on barcode (QR on screen from market and book UPC used as test) and won't read it, but most times if I go into the app's menu and change a setting (enable or disable 1D codes for example) it will then scan and read the barcode. Problem seems independent of code being scanned.        This seems specific to new, Sense-based devices -- have heard this in regards the  MyTouch too. For example the N1 is fine, and a Hero with 1.5 is fine. I think we have a workaround so anyone willing to try a new build can contact me off- list.        Update to 3.3 broke most QR scanning on my Droid (2.1).  It continuously zooms in and out.  It's in focus at  times, and even puts green highlights on the big corner squares, but seems hung in an infinite loop.  This  happens for Google business card I got at the ISEF in San Jose last week, and a Google add on the back cover of  Business Week.  I tried in various lighting conditions, but no change.  It did work on a BTWD poster at Google HQ,  though.    There are lots of comments about the problem in the Android Market reviews.         Issue 413  has been merged into this issue.        Similar issue reported on reddit  (http://www.reddit.com/r/Android/comments/c8gl3/barcode_scanner_doesnt_work_on_cyanog enmod_v507/).    My fix (which worked for others) was to go into Settings and not change anything.   Scanning worked after exiting from Settings.  Info: Phone: HTC Dream/G1 rooted Barcode Scanner: v51 Mod: CyanogenMod-5.0.7-DS Build number: EPE54B        It's not actually related. It's a race condition in restarting the scanning activity. Anything which restarts it spins  the roulette wheel again.  Marking fixed since 3.3.1 beta is up and appears to fix this on all affected devices.                 Status: FixedOwner: srowen              		dgingr...@gmail.com	fjt...@gmail.com	patric...@gmail.com	r...@google.com	sro...@gmail.com
411	Defect	Fixed	sro...@gmail.com	beanster.v	1274229848000	1274240219000	1274240219000	IllegalArgumentException;  message=Both dimensions must be greater than 0	   1. 2. 3.      What version of the product are you using? On what operating system? Latest checked out on May 18th on Windows &amp; Linux     Code attached Images where the error occured                                              temppage57.png    37.2 KB      &nbsp; View    &nbsp; Download                                         Complete code                                   Code.java    9.3 KB      &nbsp; View    &nbsp; Download                         public static Collection<Result> scanBarcodes(LuminanceSource source) is the  function that generates the error.          Thanks, I'll look into this more. Should be easy to avoid this.  java.lang.IllegalArgumentException: Both dimensions must be greater than 0 	com.google.zxing.common.BitMatrix.<init>(BitMatrix.java:49) 	com.google.zxing.common.BitMatrix.<init>(BitMatrix.java:44) 	com.google.zxing.qrcode.QRCodeReader.extractPureBits(QRCodeReader.java:150) 	com.google.zxing.qrcode.QRCodeReader.decode(QRCodeReader.java:69) 	com.google.zxing.MultiFormatReader.decodeInternal(MultiFormatReader.java:156) 	com.google.zxing.MultiFormatReader.decode(MultiFormatReader.java:64) 	com.google.zxing.web.DecodeServlet.processStream(DecodeServlet.java:316) 	com.google.zxing.web.DecodeServlet.doGet(DecodeServlet.java:212) 	javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 	javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 	com.google.zxing.web.DoSFilter.doFilter(DoSFilter.java:72)                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Should be fixed in SVN now                 Status: Fixed              		beanste...@gmail.com	sro...@gmail.com
412	Defect	Fixed	sro...@gmail.com	beanster.v	1274249640000	1274298653000	1274395184000	 ArithmeticException;  message=/ by zero	   1. Use the following function from code attached with the image attached 2. public static Collection<Result> scanBarcodes(LuminanceSource source) 3. see the catch ArithmeticException, that is where the exception occurs      What version of the product are you using? On what operating system? Checked out as of May 18th, 2010     Code and the image file attached                                 Code.java    9.3 KB      &nbsp; View    &nbsp; Download                                          temppage14.png    22.7 KB      &nbsp; View    &nbsp; Download                                         Also easy to fix.  You're running into corner-cases in the "pure barcode" mode. This maybe not surprising  since these images aren't a pure barcode, let alone contain a barcode!  Why are you using pure barcode mode though? This shouldn't be needed.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               ()                 Status: Fixed               I am using the scanning in batch mode. Only the separator pages would have barcodes. Majority of the pages that I scan do not have any barcode.        BTW. Thank you for fixing those issues so quick.        If they're scans, even if the pages are really clean scans, you may not want  PURE_BARCODE. It gets thrown off easily if it's not actually a pure, exactly oriented  image. I would just set TRY_HARDER. But hey if you tried it and it worked better, go  ahead.       		beanste...@gmail.com	sro...@gmail.com
432	Defect	Fixed	sro...@gmail.com	yatarchivist	1275547099000	1275548391000	1275548391000	UTC is not GMT + 1	 com.google.zxing.web.generator.client.TimeZoneList lines 44 and 45 currently read:      new TimeZoneInfo("GMT", "Greenwich Mean Time", "GMT",               0 * ONE_HOUR + 0 * THIRTY_MIN), // 0     new TimeZoneInfo("UTC", "Universal Coordinated Time", "GMT",        1 * ONE_HOUR + 0 * THIRTY_MIN),   The second line is incorrect as UTC is (as the "relative" field correctly indicates) equivalent to GMT at this level of precision.     Cool, fixed.                 Status: FixedLabels: -Priority-Medium Priority-Low              		sro...@gmail.com	yatarchi...@googlemail.com
456	Defect	Fixed	sro...@gmail.com	rasmussch	1276833261000	1277020913000	1277020913000	Danish translation	 Hi, I have updated the Danish translation of this nice app and fixed some spelling errors.  Rasmus S?rensen                                 Barcode Scanner.txt    8.2 KB      &nbsp; View    &nbsp; Download                     I can get on merging that with the current translation.                 Status: AcceptedOwner: srowenLabels: -Priority-Medium Priority-Low               Thanks, I've committed this.                 Status: Fixed              		rasmussch	sro...@gmail.com
461	Defect	Fixed	rpech...@gmail.com	kenberkeley	1277283827000	1277302062000	1285194677000	Build error in scanTest due to decoder.mm error: cannot allocate an object of abstract type 'GrayBytesMonochromeBitmapSource'	   Attempting to build ScanTest with the changes in r1454 causes errors in build in decoder.mm  This revision was to make changes in core so that 1D barcode scanner would work.     /Users/y925249/Desktop/MacysQRCode/zxingSVN3/zxing-read-only/iphone/ZXingWidget/Classes/Decoder.mm:164:0 /Users/y925249/Desktop/MacysQRCode/zxingSVN3/zxing-read-only/iphone/ZXingWidget/Classes/Decoder.mm:164: error: cannot allocate an object of abstract type 'GrayBytesMonochromeBitmapSource'    What version of the product are you using? On what operating system? r1460 running on iOS 3.1.3         Have made a patch to make ScanTest build. It seems that there has been some api broken with matest cpp update. Have added const qualifiers to LuminanceSource.h. If there is a good reason not to have these const qualifier, then this should be reverted and Subclasses of LuminanceSource shoud be updated accordingly                 Status: Fixed               Hi. This patch doesn't appear to have been committed into SVN, or has been reverted?         This problem still alive.        Hi. This problem still alive.         THe original problem is fixed. ScanTest doesn't use GrayBytesMonochromeBitmapSource anymore. If you're seeing this problem, it sounds like you have out of date code. Or perhaps you're trying to build Barcodes, which is currently not working: see  issue 529 .       		glmou...@gmail.com	harrylep...@gmail.com	kenberke...@gmail.com	rpech...@gmail.com	smpar...@smparkes.net	zyfking_...@163.com
465	Defect	Fixed	sro...@gmail.com	strykerF...@gmail.com	1277979562000	1278101383000	1283059735000	Android fails to build - revision 1466	   1. Following instructions in Getting Started wiki page fails when building android.     BUILD FAILED com.android.apkbuilder.ApkBuilder$ApkCreationException: /home/akira/android/zxing-read-only/android/libs is not a folder!         at com.android.apkbuilder.internal.ApkBuilderImpl.processNativeFolder(ApkBuilderImpl.java:325)         at com.android.ant.ApkBuilderTask.execute(ApkBuilderTask.java:210)         at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)         at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:616)         at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)         at org.apache.tools.ant.Task.perform(Task.java:348)         at org.apache.tools.ant.Target.execute(Target.java:357)         at org.apache.tools.ant.Target.performTasks(Target.java:385)         at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)         at org.apache.tools.ant.Project.executeTarget(Project.java:1306)         at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)         at org.apache.tools.ant.Project.executeTargets(Project.java:1189)         at org.apache.tools.ant.Main.runBuild(Main.java:758)         at org.apache.tools.ant.Main.startAnt(Main.java:217)         at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)         at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)     As it says does creating libs/ make it build?                 Labels: -Priority-Medium Priority-Low               Yeah, that fixes it. Don't know why that didn't occur to me. Thanks.        OK I just added an empty libs/ directory to SVN. I bet that will address this.                 Status: FixedOwner: srowen               I created a mirror git repo and this problem is occurring again (git doesn't keep empty folders). I'd recommend fixing the ref to check if the folder exists instead of just adding an empty folder to the repo.        Yeah looks like that reference is easy to cut out of a stock Android build script. I'll just do that here and you can try the result.       		chb...@gmail.com	sro...@gmail.com	strykerF...@gmail.com
469	Defect	Fixed	sro...@gmail.com	panason2010	1278434922000	1280534874000	1280534874000	J2SE Reader not recognize code	 I use zxing for J2SE to detect large QRCODE code does not always recognize, but rather rare, often "com.google.zxing.NotFoundException" Code  LuminanceSource source = new BufferedImageLuminanceSource (image);     BinaryBitmap bitmap = new BinaryBitmap (new HybridBinarizer (source));     Result result;     try (       result = new MultiFormatReader (). decode (bitmap);     ) Catch (ReaderException re) (       return re.toString ();     )     return result.getText ();                                 code.JPG    229 KB      &nbsp; View    &nbsp; Download                                         Use the TRY_HARDER hint and it decodes fine. You can see this working by uploading to http://zxing.org/w/decode.jspx. It says:  <?xml version="1.0" encoding="UTF-8"?> <xfa:data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/" ><root ><metadata ><region >1234</region ><id >4</id ><email >apanasovich@diasoft.ru</email ><mail_notice >1</mail_notice ><telefon /><sms_notice >0</sms_notice ><password >0000</password ></metadata ><data ><question1 >§ä§Ñ§Ü§å§ð§ä§à</question1 ><question2 >§±§Ñ§ß§Ñ§ã§à§Ó§Ú§é §¡§Ý§Ö§Ü§ã§Ñ§ß§Õ§â</question2 ><question3 >§á§à§ã§ä§Ñ§Ó§Ú§ä§î §ß§Ñ §å§é§Ö§ä</question3 ><question4 >§á§â§Ú§Ý§à§Ø§Ö§ß§Ú§ñ</question4 ><question5 >§±§Ñ§ß§Ñ§ã§à§Ó§Ú§é §¡§Ý§Ö§Ü§ã§Ñ§ß§Õ§â §£§Ñ§ã§Ú§Ý§î§Ö§Ó§Ú§é</question5 ><question6 >2010-06-25</question6 ><question7 >§á§Ñ§ã§á§à§â§ä</question7 ><question8 >§²§à§ã§ã§Ú§ñ</question8 ><question9 >§¢§Ö§Ý§Ñ§â§å§ã§î</question9 ><question10 >2</question10 ><question11 >111111111111</question11 ><question12 >11111111</question12 ><question13 >1111</question13 ><question14 >§Þ§Ñ§ê§Ú§ß§Ñ</question14 ><question15 >§®§à§ä§à§è§Ú§Ü§Ý</question15 ><question16 >§Ù§Ñ§Ó§à§Õ</question16 ><question17 >4</question17 ><question18 >§Ú§ð§ß§ñ 2010</question18 ><question19 >§Þ§Ñ§ê§Ú§ß§Ñ</question19 ><question20 >111111111111.00000000</question20 ><question21 >44444444.00000000</question21 ><question22 >444444</question22 ><question23 >33333333</question23 ><question24 >333.00000000</question24 ><question25 >33.00000000</question25 ><question26 >33.00000000</question26 ><question27 >333</question27 ><question28 >??????????lt;/question28 ><question29 >333.00000000</question29 ><question30 /><question31 /><question32 /><question33 /><question34 /><question35 /></data ></root ></xfa:data >                 Status: NotABugLabels: -Priority-Medium Priority-Low               I'm trying to identify a site  HTTP Status 500 -  type Exception report  message  description The server encountered an internal error () that prevented it from fulfilling this request.  exception  java.lang.ArithmeticException: / by zero 	com.google.zxing.qrcode.QRCodeReader.extractPureBits(QRCodeReader.java:133) 	com.google.zxing.qrcode.QRCodeReader.decode(QRCodeReader.java:69) 	com.google.zxing.MultiFormatReader.decodeInternal(MultiFormatReader.java:156) 	com.google.zxing.MultiFormatReader.decode(MultiFormatReader.java:64) 	com.google.zxing.web.DecodeServlet.processStream(DecodeServlet.java:316) 	com.google.zxing.web.DecodeServlet.doPost(DecodeServlet.java:245) 	javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 	javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 	com.google.zxing.web.DoSFilter.doFilter(DoSFilter.java:72) note The full stack trace of the root cause is available in the Apache Tomcat/6.0.26 logs.  Apache Tomcat/6.0.26        What do you mean "Use the TRY_HARDER hint" ?        The error looks like something fixed a while ago. I think I just need to update the web site's code.  See DecodeHintType. You want to use something like:  Hashtable hints = new Hashtable(); hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);  and then pass this hints object to the decode method.        I did as you said and probyval raspoznovat many times. Anyway, on large code does not work stably notretsognize-not recognized retsognize-Read                                   Desktop.zip    855 KB      &nbsp; Download                         Yes these are going to be hard to read. I don't think its realistic to use QR codes with that much teext.        I need to recognition of large codes (more than 2000 characters), and he made them in AdobeLiveCycle. Recommend the optimum size of the code (the parameters of creation of the CD code), for better recognition by means of your library. Thank you in advance.        I would stick to a couple hundred characters, ideally. I notice that the data inside it is very verbose XML. You probably want to choose a more compact representation. The same data is probably only a couple hundred bytes. You could also compress the data, and modify the encoder to accept a byte array directly. The decoder would likewise need to access the raw byte[] content rather than String.        Could you provide will make both with the help of your library to encode and decode the byte array        Sorry what is your question?        Sorry for my English)) How to convert byte[] -> QRcode and back, using your library?        You need to modify the encoder to accept a byte[] directly, rather than a String. You can find the point where it has already converted the String to byte[], and instead inject a byte[] directly.   The decoder can likewise be modified.        I have the same kind of problem, I use zxing for J2SE to generate file, but in some strange case, it's not able to decode back it's own generated file. I have attached a java test file which was tested with trunk version.  For the same coded Text, the problem occurs when image's resolution is increased.  I hope it could help                                   StringToImage.java    2.4 KB      &nbsp; View    &nbsp; Download                         You need to use PURE_BARCODE hint to reliably decode images like this. The library is expecting something more like a photo.        I have tryed with hint PURE_BARCODE (in StringToImage.java), this time test(0) and test(928) are not working. Hint just moves the problem to an other image resolution.  How is possible that perfect image can not be decoded ?   Called 'perfect' because it's not scanned image but image generated by zxing.        Can you post an image that is not decoding? I am surprised if PURE_BARCODE doesn't work. The answer is that a pure image has a lot more regions that look like a finder pattern, so many many more chances for a false positive in that phase.        I have attached some files which should not work. out_test_0.png => ChecksumException out_test_57.png  => ChecksumException out_test_1207.png  => NotFoundException  I have changed my StringToImage.java file to use QRCodeReader (and not MultiFormatReader)                                        out_test_0.png    234 bytes      &nbsp; View    &nbsp; Download                                                                out_test_57.png    284 bytes      &nbsp; View    &nbsp; Download                                                                out_test_1207.png    19.7 KB      &nbsp; View    &nbsp; Download                                                                StringToImage.java    3.1 KB      &nbsp; View    &nbsp; Download                         The first two are indeed a corner-case problem. I just fixed it. The last one is very strange. It seems like the PNG isn't read correctly, since white pixels appear near the top-left corner where there should be none and it's thrown off. I have no idea what's going on there to be honest. It's not a problem with the decoder per se since you can read any of these off the screen correctly. The latter may be some strange image parsing problem. As it's a real corner case I am not sure I personally would investigate it further.        I have taken new trunk version and it solves problem for previous test0 and test57. But some strange thing still happens. So, I have put more file which are not working, particularly test_1102 which generates a exception at QRCodeReader.extractPureBits(QRCodeReader.java:137)   The other files generate ChecksumException.                                    out_test_50.png    273 bytes      &nbsp; View    &nbsp; Download                                                                out_test_944.png    12.8 KB      &nbsp; View    &nbsp; Download                                                                out_test_1102.png    17.0 KB      &nbsp; View    &nbsp; Download                                             Yeah like I said, you're welcome to investigate more, though it almost looked like a problem in the image reader to me. Very strange. I myself  probably won't look into this more.        I have read the source code and i have found the bug!  In HybridBinarizer class, in threshold8x8Block function, the code (pixel < threshold) must be replaced by (pixel <= threshold)    (less or EQUALS) Why. because when a large full black aerea is analysed, threshold is calculted to zero but threshold8x8Block never set black into matrix as 0 is not 'less than' 0 .It should be 'less than or equals'. I have tested it with my test case, it works better, otherwise full black area are considered as white.          I see what you are saying, but isn't this just creating the opposite "bug"? Imagine what happens in an all white region. Either way you have such an issue, and it is an issue. The question is which way is better in practical situations. Try the change, then run the unit tests again to see how many more or fewer images pass.        In White region, there is already a check which says,  int average = (max - min > 24) ? (sum >> 6) : (min >> 1); So in white region average is 255>>1 ---> 127 So it will work because (pixel < threshold) is never true for 255<=127 => So matrix is not set to black. That's ok for me         ()                 Status: New               Your changes have not yielded significant improvements. All the codes that I sent you, also not recognized. Tell me whether to recognize effect zoom in "Windows Picture and fax Viewer"?        Hello Panason, i tried to decoded your picture code.jpg, it was not working. In my point of view, I'm not sure that code is managing small rotation of picture. Your picture is not well horizontal, and it's large picture. Maybe ? There is no log.debug in sources. but I got the message for corner point :  point found: (773.0,22.0)  point found: (109.0,33.0)  point found: (286.5,447.5) In source comments, corner are expected in 3 modules in size .     // Look for an alignment pattern (3 modules in size) around where it     // should be The question is: Does source code rotate image to get a perfect horizontal? (for me not) but i have to read source code...        IF code.jpg is a bit rotated, it can be managed and decoded. The result is a long string :  <?xml version="1.0" encoding="UTF-8"?> <xfa:data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/" ><root ><metadata ><region >1234</region ><id >4</id ><email >apanasovic........         This change makes loads of other images fail unfortunately. I think it's there for a reason. But if it works for you, you can use that modification locally for your own app of course.  Rotation is not the reason there is an issue here.        Do you mean the "pixel < threshold" vs "pixel <= threshold" change, Sean? I stumbled upon the same idea a while ago when dealing with pure data images (was trying to avoid knowing which I had ahead of time). Without that change, the hybrid binarizer drills white holes in black regions like the alignment patterns.  Guess I need to get the tests running under CI ...        If previous modification is a problem for some kind of your testcases, an other more secured way consists in improving the average formula in case of black area. for the moment its:   int average = (max - min > 24) ? (sum >> 6) : (min >> 1);  but its not working as average must be greater than color. In black area, calculated average is 0. Zero can not used as average. Dividing 'sum' by 64 or 'min' by 2 it's returning 0 as average which will be misused by HybridBinarizer. This bug should occured when resolution of picture is more than 8 pixels by black spot.(hight quality image)  Formula can be easily improved like:  int average = (max - min > 24) ? (sum >> 6) : (max>0 ? min >> 1 : 1);  There are a lot of simple way for not badly ignoring black area.  The last one  with  (max>0 ? min >> 1 : 1) is working for me and should not annoy other kind of pictures because the change is used only when max=0.  This case it's for very very very black zone. It's good for pure_barcode. But it's not helping for not PURE which may have the same problem.           OK I'll commit this. It doesn't seem to affect unit tests. The logic makes sense; this change is a pretty conservative step.                 Status: FixedOwner: srowen              		jeanclau...@free.fr	panason2...@gmail.com	smpar...@smparkes.net	sro...@gmail.com
470	Defect	Fixed	flya...@gmail.com	flya...@gmail.com	1278460692000	1278634700000	1278634700000	Reversing is broken in C++ port	   1. Try to scan an image where the barcode is reversed using the C++ decoder 2. It won't work 3. Try it again where the barcode isn't reversed and it will work    Expected: each row is scanned forwards and backwards, so that if the image is rotated 180 degrees it'll still catch it Instead: rotated images  Please use labels and text to provide additional information. BitArray.reverse() is inverting each bit instead of reversing the row. Also, where the coordinates for resultPoints are being detected, the code that would reverse the coordinates is commented out. And it's in Java.     Sure, just need a patch. I don't understand the part about the Java code though.                 Labels: -Priority-Medium Priority-Low               Fixed in r1472.                 Status: Fixed              		flya...@gmail.com	sro...@gmail.com
471	Defect	Fixed	flya...@gmail.com	flya...@gmail.com	1278460855000	1278634737000	1278634737000	C++ port's BinaryBitmap and Binarizer are not performing row caching correctly	   1. I haven't done this, but I think any image where the barcode is not on the middle row won't work 2. 3.    What it's doing: if (cache != null) return cache; cache=scan(row); return cache;  What it should be doing: if (cache != null AND cached_row == row) return cache; cache=scan(row); cached_row=row; return cache;   This is in two places.     Sounds good, go ahead and commit a patch or attach one.                 Labels: -Priority-Medium Priority-Low               Fixed in r1473.                 Status: Fixed              		flya...@gmail.com	sro...@gmail.com
472	Defect	Fixed	flya...@gmail.com	flya...@gmail.com	1278460984000	1278992689000	1278992689000	C++ port's interface to binarizer and binary bitmap is very out of sync with Java port	   1. Compare source code for BinaryBitmap and Binarizer in C++ and Java 2. 3.    The names of similar calls are different, but the biggest difference is, Java provides a getRow() interface which caches rows, etc. The C++ port uses getPixel() and then does row-caching manually (and incorrectly, but that's a different issue.)   Please use labels and text to provide additional information.      You can submit a patch if you want but yeah the C++ version is not supported and is just never going to be in sync.                 Status: WontFixLabels: -Priority-Medium Priority-Low               Working on a patch now.                 Status: Started               Fixed by r1480.                 Status: Fixed              		flya...@gmail.com	sro...@gmail.com
474	Defect	Fixed	sro...@gmail.com	erik.teichmann	1279257713000	1279309227000	1279314841000	Contact importer chokes without name fields	   1. Create a contact without a name. For example, add your local pizza place with "Joe's Pizza" filled in under the company name, an address, and a phone number. 2. Share the contact via the contacts application or directly from Barcode Scanner 3. Scan the generated QRCode with another phone.    Should ask the user to add a contact; instead displays the data as raw text.  What version of the product are you using? On what operating system? Barcode Scanner 3.31 on Android 2.1 (Moto Droid, HTC Magic)    Figured out the obvious workaround (just add a name to the contact) but it seems like a simple bug to squash.     Yes, I believe this is something we fixed a month or so ago. You can try the SVN version or wait for an update.                 Status: FixedOwner: srowenLabels: -Priority-Medium Priority-Low               Excellent! Love the app, thanks for all the devs' hard work!       		erik.tei...@gmail.com	sro...@gmail.com
475	Defect	Fixed	sro...@gmail.com	ashtonbrsc	1279302852000	1279309187000	1279309187000	Incorrect comment in Intent Class	   The source code for the Intents class in the Android app has the following comment in WifiConnect:    public static final class WifiConnect {         /**          * Use Google Book Search to search the contents of the book provided.          */         public static final String ACTION = "com.google.zxing.client.android.WIFI_CONNECT";     A comment that is about Wifi not book search  What version of the product are you using? On what operating system?  Latest SVN         Sure, fixed.                 Status: FixedOwner: srowenLabels: -Priority-Medium Priority-Low              		ashtonbrsc	sro...@gmail.com
488	Defect	Fixed	sro...@gmail.com	smpar...@smparkes.net	1280647405000	1280692644000	1280700356000	C++ FinderPatternFinder bug + patch	 The sorting comparators in the C++ FinderPatternFinder are wrong: they're returning -1,0,1 and  STL sort expects a boolean.  Here's the patch:  diff --git a/cpp/core/src/zxing/qrcode/detector/FinderPatternFinder.cpp b/cpp/core/src/zxing/qrcode/detector/FinderPatternFinder.cpp index 8b46b0f..7dbd334 100644 --- a/cpp/core/src/zxing/qrcode/detector/FinderPatternFinder.cpp +++ b/cpp/core/src/zxing/qrcode/detector/FinderPatternFinder.cpp @@ -39,17 +39,17 @@ public:    ClosestToAverageComparator(float averageModuleSize) :        averageModuleSize_(averageModuleSize) {    } -  int operator()(Ref<FinderPattern> a, Ref<FinderPattern> b) { +  bool operator()(Ref<FinderPattern> a, Ref<FinderPattern> b) {      float dA = abs(a->getEstimatedModuleSize() - averageModuleSize_);      float dB = abs(b->getEstimatedModuleSize() - averageModuleSize_); -    return dA < dB ? -1 : dA > dB ? 1 : 0; +    return dA < dB;    }  };    class CenterComparator {  public: -  int operator()(Ref<FinderPattern> a, Ref<FinderPattern> b) { -    return b->getCount() - a->getCount(); +  bool operator()(Ref<FinderPattern> a, Ref<FinderPattern> b) { +    return a->getCount() < b->getCount();    }  };     I'm hestitant to change this since it seems working, and this code is used without STL AFAIK (just as the Java version does not use the standard libraries for compatibility with J2ME).                 Status: WontFix               It's definitely not working. This wasn't found through inspection, it was found via (laboriously) tracking down tests that pass java and fail in C++.  I don't quite follow your "without STL" comment. Sort is coming out of the standard <algorithm>. The spec for sort (http://www.cplusplus.com/reference/algorithm/sort/) says that the comparison function returns a boolean.  Without the fix, the sort basically does nothing. Since both -1 and 1 are true, the sort algorithm is completely whacked (which shows upon on one of the tests where an outlier pattern gets chosen when it shouldn't be).        How does this compile? I don't know much about the port, but the original source does not use a sorting library. It uses a simple insertion sort. If that's been ported, this works. If there are good answers for that sure I could believe this is needed but is this so?        The C++ port does use STL (or uSTL). If the patch fixes broken tests, it should be used.        OK sounds good, committed                 Status: FixedLabels: Type-Defect Priority-Low               Thanks!       		ralf.kis...@gmail.com	smpar...@smparkes.net	sro...@gmail.com
492	Defect	Fixed	sro...@gmail.com	smpar...@smparkes.net	1280887947000	1281759116000	1281759116000	AbstractBlackBoxTestCase does not rotate non-square images correctly	 The java test driver doesn't rotate images correctly if the image isn't square.  Not a huge deal. Mostly the reason for looking into it was the desire to crosscheck the Java with the C++ which doesn't have this issue.  Patch attached. It create nine new QR successes. It also creates four new false/partial positives. The new cases are ones where there's already a failure coming from the same image at a different angle (so it's not surprising that now that the images are not getting cropped, they are also getting incorrectly decoded?)                                  rotate.patch    4.6 KB      &nbsp; View    &nbsp; Download                     The rotation is right but the resulting image boundary is wrong, is that the issue? OK will have a look when I'm back.                 Status: AcceptedOwner: srowenLabels: Type-Defect Priority-Low               Yeah, sorry. Poor choice of words. It's just that the new image has to be of a different size and that also means that there has to be translation to move the old center to the new center. The patch will actually handle non-90 degree rotations and produce an image of the necessary size and placement. That generality is currently not used, but the general case is easier to code than the special cases.        Looks great, will commit.                 Status: Fixed              		smpar...@smparkes.net	sro...@gmail.com
507	Defect	Fixed	sro...@gmail.com	ralf.enders	1281412937000	1281480295000	1281827480000	Company field in generator seems not to work	   1.go to http://zxing.appspot.com/generator/ 2.try to generate vcard (contact information) 3.the company field seems not to work    a qr code with company information ;) no info seems to be taken, in the url http://chart.apis.google.com/chart?... is the company info also not shown  What version of the product are you using? On what operating system? chrome 5.0.375.125 on MacOS10.6.4    Some of the tested readers on iphone os 4 has problems with german umlauts (eg ?, ? and so on) but I think that's another problem and not important to you...      There is no vCard support and MECARD does not encode company info. Yeah the field really shouldn't be there. I'll delete it but no real plans to update this.                 Status: AcceptedOwner: srowen               Thanks for the quick response ;) vcard was wrong but many readers seems to support ORG in a mecard, but...        It's not valid, no.                 Status: FixedLabels: Type-Defect Priority-Low               I was able to add mecard ORG: support.  The attached files show the changes. Please keep in mind that I made these changes on version zxing 1.4                                   changes_to_iphone_code_to_support_org_in_mecard.zip    8.1 KB      &nbsp; Download                         Right, it's not that it would be hard to add that. It's that it's not valid.       		ralf.end...@googlemail.com	rico.vaccaro	sro...@gmail.com
508	Defect	Fixed	sro...@gmail.com	smpar...@smparkes.net	1281415794000	1281590695000	1281590695000	Handle boundary conditions in HybridBinarizer a little better	 c.f. http://groups.google.com/group/zxing/browse_thread/thread/d410251c3daa73c8  There's actually a comment for this in HB.java, that the last 7 pixels are dropped. This is kind of a boundary case, but given that my (mythical?) users don't really know how to frame codes, I thought I'd look at it.  It's actually an easy (and elegant?) fix: when there's a fractional block on the right or bottom, simply compute it using the final 8 pixels. This overlaps with the previous block, but that should be fine.  I wouldn't expect any computational impact with this, unless I'm missing something ...                                 hb.patch    8.0 KB      &nbsp; View    &nbsp; Download                      Issue 509  has been merged into this issue.        Sounds good, committed with 511                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		dswit...@google.com	smpar...@smparkes.net	sro...@gmail.com
510	Defect	Fixed	sro...@gmail.com	smpar...@smparkes.net	1281427228000	1281592511000	1281592511000	C++ can core dump on dimension mismatch	 509 surfaces an issue for C++ on 2/11.gif. The dimensions are decoding as different (an interesting error?) and while the Java version correctly throws a not found, the C++ version simply core dumps.  I also added another exception from the Java code that's not in the C++ (while tracking this down). I threw it into the patch for good measure.                                 bmp.patch    1.9 KB      &nbsp; View    &nbsp; Download                     ()                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		smpar...@smparkes.net	sro...@gmail.com
511	Defect	Fixed	sro...@gmail.com	smpar...@smparkes.net	1281436092000	1281590314000	1281590314000	module size estimation is slightly inaccurate	 There are some subtle problems with the estimation of module size. Greatest impact is on low resolution (low pixel-per-module) images, particularly for larger codes.  I actually came across this when looking at 510. blackbox/qrcode-2/11.gif was causing core dumps in C++ but no unexpected exceptions in Java.  The issue in 510 was that the C++ code wasn't handling a difference between the estimated dimension of the image and what was encoded in the version.  Easy enough to fix (adding the check and throwing an exception as the Java code does) but it did make me wonder why 11.gif wasn't getting decoded.  It turns out that the existing module estimation code doesn't estimate the module size quite right. The module size in the 11.gif is 2 pixels but gets estimated at something less (1.8 if I recall). This causes the dimension to be 69 rather than the true 65.  The only thing required to fix this was moving around the -1s. I looked at all the places where it was calculating incorrect values on 11.gif (in the black white black run measuring code) and fixed them. With these changes, all the length measurements are spot on, not just close enough to decode.  The change doesn't do much for the test set; it picks up four (which I assume are 11.gif in it's various rotations). With this change, even single pixel-per-module codes can be decoded, so I added a down-sampled version of 16.gif to the test set.                                  boundary.patch    5.5 KB      &nbsp; View    &nbsp; Download                                          32.gif    708 bytes      &nbsp; View    &nbsp; Download                                         ()                 Owner: srowen               I can commit this, but it doesn't affect the number of images that pass when I run the tests. #11 does not decode. Any ideas?                 Status: Accepted               To see more successes, you'd need 508. Without 508, it'll never find three finders in 11.        I should put an "I think" around that. I don't know that I tested that exact case, but I am pretty sure ...        OK yes I see that now.                 Status: FixedLabels: Type-Defect Priority-Low              		dswit...@gmail.com	smpar...@smparkes.net	sro...@gmail.com
512	Defect	Fixed	sro...@gmail.com	eger.p.eger	1281451641000	1281480173000	1281480173000	ITFWriter throws ArrayIndexOutOfBoundsException	    MultiFormatWriter w = new MultiFormatWriter(); BitMatrix bm = w.encode("213432546576878", BarcodeFormat.ITF, 200, 25);      Stack trace: java.lang.ArrayIndexOutOfBoundsException: 6         at com.google.zxing.oned.ITFWriter.encode(ITFWriter.java:57)         at com.google.zxing.oned.UPCEANWriter.encode(UPCEANWriter.java:50)         at com.google.zxing.oned.ITFWriter.encode(ITFWriter.java:40)         at com.google.zxing.MultiFormatWriter.encode(MultiFormatWriter.java:62)         at com.google.zxing.MultiFormatWriter.encode(MultiFormatWriter.java:40)   What version of the product are you using? On what operating system?  rev 1516 from svn tree      The following code cannot be correct, since ITFReader.PATTERNS inner array is always 5 entries in the second dimension.        for (int j = 0; j < 10; j += 2) {         encoding[j] = ITFReader.PATTERNS[one][j];         encoding[j + 1] = ITFReader.PATTERNS[two][j];       }  was the following instead the intention?        for (int j = 0; j < 5; j ++) {         encoding[j*2] = ITFReader.PATTERNS[one][j];         encoding[j*2 + 1] = ITFReader.PATTERNS[two][j];       }       ()                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		eger.p.e...@gmail.com	sro...@gmail.com
518	Defect	Fixed	smpar...@smparkes.net	evoludo	1281872574000	1281952080000	1281956687000	Large QR codes not detected by online reader	   Scan a large QR code with the online reader    QR code should be decoded    Large QR codes created with zxing, and are valid within the QR code standard, are not read at all.                                 5.png    5.9 KB      &nbsp; View    &nbsp; Download                                         How did you create this?        It's not true that in general "large QR codes" will not decode. This one may not due to false positives in the finder pattern finding, or it could be invalid.                 Status: WontFix               ()                 Status: Fixed               Ha yeah nice one, your last change did make this decode.                 Owner: srowenLabels: Type-Defect Priority-Low Module-core               Actually, it was 519.       		evol...@gmail.com	smpar...@smparkes.net	sro...@gmail.com
519	Defect	Fixed	sro...@gmail.com	rsc@golang.org	1281925065000	1281935950000	1281935950000	wrong alignment position for version 23	 http://code.google.com/p/zxing/source/browse/trunk/core/src/com/google/zxing/qrcode/decoder/Version.java#422   new Version(23, new int[]{6, 30, 54, 74, 102},  I don't have a spec to look at but this line is the only one that doesn't follow a regular pattern with constant delta between  successive alignment positions.  I think the 74 is a typo and should be   new Version(23, new int[]{6, 30, 54, 78, 102},      Good eye. Indeed that is the correct value from Table E.1. I'll commit a fix now.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low Module-core              		rsc@golang.org	sro...@gmail.com
524	Defect	Fixed	smpar...@smparkes.net	smpar...@smparkes.net	1282206265000	1283172467000	1283172467000	qrcode::Detector#findAlignmentInRegion needs a Y boundary condition	 findAlignmentInRegion checks for bad looking X values but it doesn't seem to be checking for bad looking Y values. I just had a core dump in C++ because the bottom and top values get inverted (due to the image bounds) leading to a negative (or very large, in C++ unsigneds) height.  I think it should have a simlar check but wanted to do a sanity check.     Probably so, do you have a patch in mind?                 Owner: smpar...@smparkes.netLabels: Type-Defect Priority-Low               Very simple. I'll apply if there no objections.                                   fair.patch    1.6 KB      &nbsp; View    &nbsp; Download                         ()                 Status: Fixed              		smpar...@smparkes.net	sro...@gmail.com
537	Defect	Fixed	sro...@gmail.com	Simon.Moser	1283271376000	1283282804000	1283282804000	Barcode is not scanned correclty	   1. Scan the attached barcode     Type ean13 is correctly identified correctly. But the barcode number is incorrect.  Correct number would be: 030000769023 Actual result: 30000769023  What version of the product are you using? On what operating system? Android, 3.4 (Market Version)                                    ean13-test.jpg    102 KB      &nbsp; View    &nbsp; Download                                         The barcode itself is actually *both* a UPC-A code and EAN-13. EAN-13 is actually a clever superset of UPC-A, designed that way to enable backward compatibility. The scanner simply picks UPC-A here. The only way to differentiate is that there are actually 13 digits printed below. It is EAN-13, so calling it UPC-A is technically off, but I don't think we're going to go to the trouble of disambiguating just for this.                 Status: WontFix               I did try to force EAN-13 by passing it as SCAN_FORMATS but still 30000769023 is the result.          Ah I think you have a point here. Internally, when scanning for UPC-A and EAN-13, only one decoder (for EAN-13) is deployed since EAN-13 is a superset. If it finds a barcode starting with 0 it construes it as UPC-A. That's a nice trick, but, is not correct when UPC-A is not allowed as a barcode format. In this case it should just return the 13-digit value.  I can fix that I'm pretty sure. It will still come back as UPC-A if scanning for both, but, will come back as EAN-13 if UPC-A is not allowed.                 Status: AcceptedOwner: srowenLabels: Type-Defect Priority-Medium               ()                 Status: Fixed              		Simon.Mo...@gmail.com	sro...@gmail.com
540	Defect	Fixed	smpar...@smparkes.net	btjones	1283935797000	1283991086000	1283991086000	ZXingWidget iOS 4.1 Not Working	 I am using ZXingWidget and tested it on a device running iOS 4.1 which just came out. Using the same code I previously had (straight from the example app) the ZXingWidgetController is no longer being displayed when trying to show it modally. This only happens on a device running iOS 4.1 (4.0.x all work and even the simulator running iOS 4.1 displays the view just like always with a black screen and proper overlays).  Any ideas on the issue? I receive no error messages, crashes, or warnings.  To recreate, just use the latest version of the iPhone ZXingWidget on a device running iOS 4.1.     Checking.        I've tracked it down to ZXingWidgetController.m  Moving line 347 [self.captureSession startRunning]; down below [self.view.layer addSublayer: self.prevLayer]; seems to have solved the issue. Anyone know why this solves the issue and what has changed with 4.1 from 4.0?        Yeah, that's what I thought it would be and I found references from other people having the same issue for the same reason.  It looks to me like a bug. If you break the debugger while it's hung, you see that it's hung while trying to stop a preview while you're adding the (only) preview. Sounds like it's confused.  I'll commit the workaround in the morning.                 Status: StartedOwner: smpar...@smparkes.netLabels: Type-Defect Priority-Critical               ()                 Status: Fixed              		btjo...@gmail.com	smpar...@smparkes.net
548	Defect	Fixed	sro...@gmail.com	a.fradiani	1284022070000	1284068451000	1284165905000	RIM app Crashing!. JVM Exception: ConnectionClosed exception.	   1.run ZxingUiApplication inside zxlib 1.5 package. 2.goto snap. 3.take a picture of a QR-code (image obtained from "simulate camera image" in the simulator)     the expected output is the app decoding correctly and showing the url. what happens is the JVM Exception 104: ConnectionClosed Exception. can't go anywhere from here..  What version of the product are you using? On what operating system?  zxing 1.5. on Blackberry 9800 simulator. Windows XP (on top of Oracle Vbox... for what is worth, all the other apps i have simulated with this system did not presented any problems).     maybe is this a problem with the sd-card not being present?. or is it the library decoding the picture having a bug??  thanks for any help.      Sounds like a problem simply opening the web page: "connection closed". That's not related to the app. It's not supported anyway.                 Status: NotABug               i'll check with other code images in that case. (i'm also trying now to run the app on the 8530 simulator.)  what exactly is not supported?.        Nobody hass worked on the BlackBerry client, and don't think there's a plan to, so I don't know what it's status is regarding newer phones / OS / emulator.        The error is in com.google.zxing.client.rim => ZxingLMMainScreen.java :  In the run() method : file.delete() is called after file.close() in the "finally" block. Thus an ConnectionClosed exception appears. So, call delete() before close().  Hope it helps :)  This bug is fixed in another issue.        Update : Have a look @  issue 126  :)        I see, this works differently than the Java File/FileInputStream, where you'd have to close() the stream then delete() the file. I switched these around and you can try again now.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low               Fixed!. changed the 'file.delete()' call as you said. Thanks for the help!.       		a.fradi...@gmail.com	morgan.jacquet	sro...@gmail.com
570	Defect	Fixed	sro...@gmail.com	patrick.c.connolly	1285821637000	1285822449000	1285822449000	online QR code generator warning is incorrect	   1. Try to generate an event QR code with the online generator 2. Make the begin date after the start date. 3. Red warning text appears that says "Ending date is AFTER starting date." (which doesn't make sense)  Awesome project yo :)     Oops, yeah fixed in SVN now. I may be lazy in deploying an update though.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		patrick....@gmail.com	sro...@gmail.com
573	Defect	Fixed	sro...@gmail.com	Marek.Urbaniak	1285881565000	1285885687000	1285885687000	Results drawn incorrectly on Samsung Spica	 Steps that will reproduce the problem: 1. Launch Android Barcode Scanner from an external app to scan a barcode. 2. Recognized characteristic points (possible result) are drawn in a wrong place on the screen - to see it for a longer time, place only a part of a barcode in the view finder. 3. When barcode is recognized a result bitmap is incorrectly scaled (partially out of screen).  I have fixed it and created a patch based on the last trunk revision (r1612). Please check and integrate it into the project, it is released on the same license as zxing (Apache License 2.0).                                  SamsungSpicaResultDrawing.patch    2.0 KB      &nbsp; View    &nbsp; Download                     Ah yeah, that is necessary when the screen and preview size differ. They don't on my device so hadn't seen it. The patch seems to work fine on my phone too as expected. I'll commit it and you and others can verify it works. Thanks.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Medium              		Marek.Urbaniak	sro...@gmail.com
579	Defect	Fixed	sro...@gmail.com	flokaiser	1286429392000	1287026769000	1287026769000	Wifi-Setting not possible when ";;" in WPA pass	     1. Open BarcodeScanner  2. scan: WIFI:T:WPA;S:MyWPANetworkID;P:awZb[5;di9>jj_.6`.)!+aht]14?4h4[n;er\sd[;; (WIFI:T:WPA;S:mynetwork;P:mypass;;    -   Password: awZb[5;di9>jj_.6`.)!+aht]14?4h4[n;er\sd[ ) 3. Connect to network    Visible Output seems right (ID&amp;Type), doesn't show code (assume normal behavior?) on trying to connect authentication fails  - manual copy&amp;paste of scanned code (awZb[5;di9>jj_.6`.)!+aht]14?4h4[n;er\sd[) works.  What version of the product are you using? On what operating system? Android 2.1 Barcode Scanner 3.5         This seems like a pretty artificial situation, but valid. This made-up WIFI format is supposed to follow DoCoMo's MECARD format. In that format, ';' must be escaped as "\;". Same with ':'. There is an unescaped ';' in the password here. What happens if you escape it?        I'm going to make :, / and \ escaped too.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		flokai...@gmail.com	sro...@gmail.com
587	Defect	Fixed	sro...@gmail.com	omisone	1287422840000	1287523160000	1287526234000	IllegalStateException decoding QRCode	   1.try to decode QRcode 2. 3.    QRcode decoded, an exception   What version of the product are you using? On what operating system? zxing1.6 change r616, Android 1.6    Related to change r616 when try to decode QRCode the App always throw IllegalStateException, class com.google.zxing.common.GridSampler, row 120      You mean r1616? Can you help me by providing the QR code, or a full stack trace?                  Status: AcceptedOwner: srowenLabels: Type-Defect Priority-Medium               Yes I mean change r616 (rectangular DM support  issue 563 ), if You whant You can try with any QRCode, it doesn't decode, as soon as possible I'll send You stack trace.        Again that r1616 not r616, I'm assuming. I'm not seeing this behavior. QR codes seem to work fine. Yes, please provide a stack trace and/or code. Also are you able to try the latest code from SVN?        I'm sorry, You are right the change is r1616, try to use this classes (from r1616)  src/com/google/zxing/common/DefaultGridSampler.java com/google/zxing/common/GridSampler.java com/google/zxing/datamatrix/decoder/BitMatrixParser.java com/google/zxing/datamatrix/decoder/Version.java com/google/zxing/datamatrix/detector/Detector.java  You I'll see com.google.zxing.qrcode.detector class invoke this method  sampler.sampleGrid(image, dimension, transform); this will cause excpetion        That call does not exist in the latest code. Can you try the latest? I think the answer is therefore that it's already fixed.        Ok I see the right invocation method in the latest code, at the moment I'm not able to try it, I'll download qrcode.detector and I'll keep You up to date. But I believe You are right. Thx.        I have replaced qrcode.Detector and common.GridSampler It works ! Cool. Very tanks.         ()                 Status: Fixed               Hi,  Could a moderator please remove me from the notification list of all topics on this forum?  I had only posted a question about one specific question, now my inbox is filling up with every topic from this forum.  I am only asking this in a very polite manner.  Please do remove me from all further notifications though.  Thanks        Like I mentioned to you in an email, you subscribed to the Google Groups list for this project, which is why you get its messages. You can and typically do manage your own subscription/unsubscription. But, I've unsubscribed you manually.       		omis...@gmail.com	sro...@gmail.com	woodsrac...@windstream.net
597	Defect	Fixed	sro...@gmail.com	lincoln....@kewill.com	1287726099000	1287807266000	1287807266000	PDF417 not decoding when PURE_BARCODE hint used	    1. PDF417Reader will not decode monochrome PDF417 barcodes when the PURE_BARCODE hint is used.  2. In the PDF417Reader source code, decode method, I see that method QRCodeReader.extractPureBits is being called when the PURE_BARCODE hint is found.  This looks suspicious.  3. An example monochrome PDF417 barcode is attached.  The content of the barcode is "MI:KI;LB:I;FT:IM;ST:ADMIN;EN:ID345678901234567890;DT:528;SU:S234567890;CO:N;DD:;PA:PAPS5678901234567890123456789012345678901234567890;RE:CI/CI345678901234567890123456789012345678901234567890".  The barcode was generated using Barcode4J.     I get a BarcodeNotFound error when I use the PURE_BARCODE hint.  Otherwise, the barcode is successfully decoded.  What version of the product are you using? On what operating system?  1.6, with JRE/JDK 6.0.21, on Windows.  Eclipse as development environment.      From what I've read, it looks like PDF417 is still under development in zxing.  A good product!                                  TestGeneratePDF417.png    512 bytes      &nbsp; View    &nbsp; Download                                         Yah I see it just uses the QR code reader's "pure barcode extractor" which doesn't quite work for this image. This whole bit of code needs an overhaul and I can do that.                 Status: AcceptedOwner: srowenLabels: Type-Defect Priority-Medium               OK think I got this one.                 Status: Fixed              		lincoln....@kewill.com	sro...@gmail.com
603	Defect	Fixed	sro...@gmail.com	rasmussch	1288849542000	1288854696000	1288854696000	Danish translation	 I have just fixed some translation errors in the Danish translation.                                 strings.xml    9.2 KB      &nbsp; Download                     Great, thank you, committed.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		rasmussch	sro...@gmail.com
608	Defect	Fixed	sro...@gmail.com	awd...@gmail.com	1289373657000	1289422343000	1289776816000	Force close on samsung intercept	   1. Start app 2. Hold over barcode (tried barcode and data matrix) 3. App shows signs of recognizing barcode then crashes. One time my phone made a buzz before crashing but no sounds.    Expected output is read data from barcode.  Instead I get a force close alert. "The application Barcode Scanner (process com.google.zxing.client.android) stopped unexpectedly. Please try again.  What version of the product are you using? On what operating system? Newest one 3.5.1 on android 2.1 samsung intercept. Old version 3.5 did not crash.         There is some weird bug in the Wildfire and/or Intercept that's causing this, even though nothing changed in this particular piece of code. We'll try to work around it.                 Status: Fixed                 Expected output is read data from barcode.  Instead I get a force close alert. "The application Barcode Scanner (process com.google.zxing.client.android) stopped unexpectedly. Please try again.  This is -in German- the same on my phone HTC Wildfire Firmware 2.1. Up 1        Reverted to 3.5 on my Intercept.  Wildfire workaround doesn't seem to work for Samsung Intercept, but 3.5 does.        It'd be greatly helpful to get a stack trace from your logs. I don't have a Wildfire for testing, and it doesn't affect any phone I have, so at the moment it's not clear what the problem is if this didn't address it        Exact same same thing is happening to my Intercept. If I check history, I see the last barcode was successfully read right before the software crashed.        How might I obtain a stack trace from my Intercept?  I did a quick google and it looks like its something you can do through ADB shell.   I'm still new to the android platform (less than 1 month) but I would like to help resolve this issue.         The easiest thing for non-developers is to download a program called "aLogcat". Run it, and switch its log level to 'warning' under its settings. Then go reproduce the problem. Then go back to aLogcat and use it to send the recent log result to me (srowen at gmail).  I'm guessing it's the same issue, and we confirmed it's a weird problem in the device. One of the UI elements is unavailable. I can work around that, but it means you won't get one small new feature until it works (a preview of 'more info' on the barcode).                 Owner: srowenLabels: Type-Defect Priority-Medium               Oops, Lachezar has put his finger on what I am almost certain is the actual problem, and it is my fault. There is a separate layout for LDPI screens (low DPI) which did not have the same UI elements declared correctly. This is why it only affects a few phones. You can try yet another build here: http://code.google.com/p/zxing/downloads/detail?name=BarcodeScanner-Wildfire.apk  This should both work and also let you see the "extra info" field below the barcode content. You'll see what I mean when scanning a barcode. Anyone who can confirm it is OK?                 Labels: -Priority-Medium Priority-High                Issue 609  has been merged into this issue.         Issue 611  has been merged into this issue.         Issue 612  has been merged into this issue.         Issue 614  has been merged into this issue.        Issue fixed on Wildfire with the link given above (comment #8)  The app is no longer crashing once scan is done.        Tested on Samsung intercept. Read several bar codes and a few data matrixes sucessfully.  Looks like this bug is resolved.  Note: I did have to manually uninstall 3.5 manually before the install for 3.51 was sucessful         Issue 615  has been merged into this issue.         Issue 616  has been merged into this issue.        When the fixed version will be available in the market?        it is fixed on wildfire with (comment #8)         thank you, wildfire version from download section is working on wildfire. (in reference to  issue 611 )         Issue 617  has been merged into this issue.        The build at comment #8 is not installed on my wildfire... :( When the fix will be put on the market???         Issue 619  has been merged into this issue.         Issue 620  has been merged into this issue.         Issue 625  has been merged into this issue.        Daniel should put up the new build today or so, sit tight.        New version is in the Market - works great on Wildfire. Many thanks.       		Mr.Med...@gmail.com	and...@kember.net	awd...@gmail.com	eschweng...@t-online.de	kan...@gmail.com	lee.louv...@gmail.com	lphape...@gmail.com	marc...@gmail.com	napo...@gmail.com	sidik.al...@gmail.com	sro...@gmail.com
628	Defect	Fixed	sro...@gmail.com	shawndyer.com	1289909379000	1289920584000	1289920584000	Code 128 prob w/ Shift character from Code B	 It appears that when zxing encounters Shift in a Code A character set it interprets the following value as a Code B character (correctly).  However, when it encounters a Shift in a Code B character set it interprets the following value as Code C. I believe it should instead interpret the symbol following the Shift as a Code A character (I should note, that I haven't found another software decoder that even handles Shift at all).  As a caveat, I do not actually have a copy of the spec, I am generating my bar codes from third party descriptions of the spec found in several locations on the Internet. Please let me know if I am mistaken in how this should behave. I do not currently have access to a good hardware scanner to verify behavior with it.  I have attached two png bar codes that illustrate the issue.  The first, Code_A.png, is composed of:   Start A (103)   A (33)   \t (73)   Shift (98)   a (65)   \t (73)   checkdigit (68)   Stop (106) and should parse as "A\ta\t" (\t being a tab char), which it does as far as I can tell using the Android Barcode Scanner app, V3.52 (Hard to tell what the whitespace is it displays).  The second, Code_B.png, is composed of:   Start B (104)   B (34)   b (66)   Shift (98)   \t (73)   b (66)   checkdigit (53)   Stop (106) and should parse as "Bb\tb". Instead it parses (using the same Android app) as "Bb73b" which indicates to me that the Shift was interpreted as a shift to Code C.                                  Code_A.png    112 bytes      &nbsp; View    &nbsp; Download                                                              Code_B.png    111 bytes      &nbsp; View    &nbsp; Download                                         And, for what it is worth, here are two of the references I used that indicate how Shift functions within the Code 128 symbology:  http://www.adams1.com/128code.html http://en.wikipedia.org/wiki/Code_128        Yes, looks like an easy problem to fix. I just committed it to SVN.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		shawndye...@gmail.com	sro...@gmail.com
631	Defect	Fixed	sro...@gmail.com	giovanni.azzali	1290216031000	1290649198000	1290649217000	Wrong characters in Data Matrix decoding	 The attached 2-D barcode should give: http://www.prismaindustriale.com but instead it gives: http:/awww.prismaindustriale9com  I used ZXing version v3.52 on Android 2.2                                 datamatrix.bmp    854 bytes      &nbsp; Download                     i was going to say I don't know this code well enough to fix it but I got lucky and spotted the problem pretty fast. It's a one line change and is committed. It will go out with the next release.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Medium                Issue 635  has been merged into this issue.       		giovanni...@gmail.com	sro...@gmail.com
658	Defect	Fixed	sro...@gmail.com	koalaatb81dotorg	1292133284000	1292135537000	1292135537000	incorrect data bit counting in aztec code decoder	   1. use aztec code decoder to decode the attached 7.bmp file (from BWIPP)    expect: Code 2D! seen:   Code 2D!, (note the extra comma)  What version of the product are you using? On what operating system? latest svn (1677)    the high-level encoding for "Code 2D!" in aztec code is (56 bits) 00100 11100 10000 00101 00110 11110 0001 0100 1111 00101 0000 00110  the attached file is a 1-layer aztec code, that is, the codeword size is 6-bit: (10 datacodewords, 60 bits total) 001001 110010 000001 101001 101111 000010 100111 100101 000001 011011                    ^                                         ^     ^^ 4 extra "1"'s were added: the 18th and 54th "1"s were "inverted bits" the 59th and 60th "1"s were padding  the decoder indeed skipped those inverted bits, but didn't modify the total message bits, so the correctedBit[] became: 001001 110010 000001 010011 011110 000101 001111 001010 000001 101100  so the last 2 padding 1's and 2 extra 0's became the comma in the decoding result                                 7.bmp    29.3 KB      &nbsp; Download                                          aztec.patch    1.3 KB      &nbsp; View    &nbsp; Download                     Great, I don't know Aztec myself but sounds like you do. I committed this with the test image.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Medium              		koalaatb...@gmail.com	sro...@gmail.com
663	Defect	Fixed	sro...@gmail.com	eljoest	1292626935000	1292699141000	1292699141000	replace %f in custom search URL for code 39 TEXT barcodes	   1. set a custom search URL that includes the barcode format placeholder (%f) 2. scan a barcode (PZN, identified as CODE39 TEXT) 3. open custom search url    %f in the URL is not replaced, works with similar to EAN_8 and EAN_13  What version of the product are you using? On what operating system? 3.52                                     IMG_2010-12-18 16.00.08.361-1.jpg    151 KB      &nbsp; View    &nbsp; Download                                         No problem that is an easy change to make.                 Status: FixedOwner: srowenLabels: Type-Defect Priority-Low              		eljo...@googlemail.com	sro...@gmail.com
